---
phase: 38-switch-component
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/switch/package.json
  - packages/switch/tsconfig.json
  - packages/switch/vite.config.ts
  - packages/switch/src/vite-env.d.ts
  - packages/core/src/styles/tailwind.css
autonomous: true

must_haves:
  truths:
    - "Switch package exists as @lit-ui/switch with correct workspace dependencies"
    - "Switch CSS design tokens (--ui-switch-*) are defined in the core token system"
    - "Package builds without errors after pnpm install"
  artifacts:
    - path: "packages/switch/package.json"
      provides: "@lit-ui/switch package manifest"
      contains: "@lit-ui/switch"
    - path: "packages/switch/tsconfig.json"
      provides: "TypeScript configuration extending shared config"
      contains: "@lit-ui/typescript-config"
    - path: "packages/switch/vite.config.ts"
      provides: "Vite build config using shared library config"
      contains: "createLibraryConfig"
    - path: "packages/switch/src/vite-env.d.ts"
      provides: "Vite client type reference"
      contains: "vite/client"
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Switch design tokens in :root"
      contains: "--ui-switch-track-width-sm"
  key_links:
    - from: "packages/switch/package.json"
      to: "@lit-ui/core"
      via: "workspace dependency"
      pattern: "@lit-ui/core.*workspace"
    - from: "packages/switch/vite.config.ts"
      to: "@lit-ui/vite-config"
      via: "createLibraryConfig import"
      pattern: "createLibraryConfig"
---

<objective>
Create the @lit-ui/switch package scaffolding and add switch CSS design tokens to the core token system.

Purpose: Establish the package structure and theming foundation before implementing the switch component logic.
Output: A buildable (empty) @lit-ui/switch package and complete --ui-switch-* token definitions in tailwind.css.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/38-switch-component/38-RESEARCH.md

Reference packages for exact structure:
@packages/input/package.json
@packages/input/tsconfig.json
@packages/input/vite.config.ts
@packages/input/src/vite-env.d.ts
@packages/core/src/styles/tailwind.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create @lit-ui/switch package scaffolding</name>
  <files>
    packages/switch/package.json
    packages/switch/tsconfig.json
    packages/switch/vite.config.ts
    packages/switch/src/vite-env.d.ts
  </files>
  <action>
Create the `packages/switch/` directory and four config files, following the EXACT structure of `packages/input/`:

**package.json** — Copy from `packages/input/package.json` and change:
- `"name"` → `"@lit-ui/switch"`
- `"description"` → `"Accessible switch/toggle component built with Lit and Tailwind CSS"`
- `"repository.directory"` → `"packages/switch"`
- Keep all dependencies, scripts, exports identical to input's package.json

**tsconfig.json** — Identical to `packages/input/tsconfig.json`:
```json
{
  "extends": "@lit-ui/typescript-config/library.json",
  "compilerOptions": {
    "outDir": "./dist",
    "rootDir": "./src",
    "baseUrl": "."
  },
  "include": ["src"]
}
```

**vite.config.ts** — Identical to `packages/input/vite.config.ts`:
```typescript
import { createLibraryConfig } from '@lit-ui/vite-config/library';

export default createLibraryConfig({
  entry: 'src/index.ts'
});
```

**src/vite-env.d.ts** — Identical to `packages/input/src/vite-env.d.ts`:
```typescript
/// <reference types="vite/client" />
```

After creating files, run `pnpm install` from the workspace root to link the new package.
  </action>
  <verify>
Run `ls packages/switch/package.json packages/switch/tsconfig.json packages/switch/vite.config.ts packages/switch/src/vite-env.d.ts` — all four files exist.
Run `cat packages/switch/package.json | grep '"name"'` — shows `@lit-ui/switch`.
Run `pnpm install` — succeeds without errors.
  </verify>
  <done>
@lit-ui/switch package exists in the monorepo workspace with correct config files and dependencies linked.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add switch CSS design tokens to core tailwind.css</name>
  <files>
    packages/core/src/styles/tailwind.css
  </files>
  <action>
Add the switch component token block to `packages/core/src/styles/tailwind.css` inside the existing `:root` block, after the existing component token sections (input, button, select, etc.). Follow the exact pattern of existing token blocks with a section comment header.

Add this token block:

```css
/* -------------------------------------------------------------------------
 * Switch Component
 * ------------------------------------------------------------------------- */

/* Track dimensions - Small */
--ui-switch-track-width-sm: 2rem;
--ui-switch-track-height-sm: 1.125rem;
--ui-switch-thumb-size-sm: 0.875rem;

/* Track dimensions - Medium */
--ui-switch-track-width-md: 2.5rem;
--ui-switch-track-height-md: 1.375rem;
--ui-switch-thumb-size-md: 1.125rem;

/* Track dimensions - Large */
--ui-switch-track-width-lg: 3rem;
--ui-switch-track-height-lg: 1.625rem;
--ui-switch-thumb-size-lg: 1.375rem;

/* Layout */
--ui-switch-radius: 9999px;
--ui-switch-thumb-radius: 9999px;
--ui-switch-thumb-offset: 2px;
--ui-switch-label-gap: 0.5rem;
--ui-switch-transition: 150ms;

/* Label typography (matches input pattern) */
--ui-switch-font-size-sm: 0.875rem;
--ui-switch-font-size-md: 1rem;
--ui-switch-font-size-lg: 1.125rem;

/* Default state (unchecked) */
--ui-switch-track-bg: var(--color-muted, var(--ui-color-muted));
--ui-switch-track-border: var(--color-border, var(--ui-color-border));
--ui-switch-thumb-bg: white;

/* Checked state */
--ui-switch-track-bg-checked: var(--color-primary, var(--ui-color-primary));

/* Disabled state */
--ui-switch-track-bg-disabled: var(--color-muted, var(--ui-color-muted));
--ui-switch-thumb-bg-disabled: var(--color-muted-foreground, var(--ui-color-muted-foreground));

/* Focus state */
--ui-switch-ring: var(--color-ring, var(--ui-color-ring));

/* Error state */
--ui-switch-border-error: var(--color-destructive, var(--ui-color-destructive));
--ui-switch-text-error: var(--color-destructive, var(--ui-color-destructive));
```

Place these tokens inside the existing `:root { }` block, after the last existing component token section. Maintain the same indentation pattern used by other token blocks.
  </action>
  <verify>
Run `grep --count 'ui-switch' packages/core/src/styles/tailwind.css` — should return 25+ matches.
Run `grep 'ui-switch-track-width-sm' packages/core/src/styles/tailwind.css` — should find the token.
Run `grep 'ui-switch-track-bg-checked' packages/core/src/styles/tailwind.css` — should find the checked state token.
  </verify>
  <done>
All --ui-switch-* design tokens are defined in the core token system, covering dimensions (sm/md/lg), layout, typography, and color states (default, checked, disabled, focus, error).
  </done>
</task>

</tasks>

<verification>
1. `ls packages/switch/package.json packages/switch/tsconfig.json packages/switch/vite.config.ts packages/switch/src/vite-env.d.ts` — all exist
2. `grep '@lit-ui/switch' packages/switch/package.json` — package named correctly
3. `grep 'ui-switch-track-width-sm' packages/core/src/styles/tailwind.css` — tokens defined
4. `pnpm install` — workspace resolves without errors
</verification>

<success_criteria>
- @lit-ui/switch package scaffolding matches @lit-ui/input structure exactly
- All --ui-switch-* tokens (25+) are defined in tailwind.css :root
- pnpm install resolves the new package in the workspace
</success_criteria>

<output>
After completion, create `.planning/phases/38-switch-component/38-01-SUMMARY.md`
</output>
