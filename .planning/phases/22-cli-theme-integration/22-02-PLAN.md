---
phase: 22-cli-theme-integration
plan: 02
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - packages/cli/src/commands/init.ts
autonomous: true

must_haves:
  truths:
    - "lit-ui init accepts --theme parameter"
    - "Theme is applied when --theme provided"
    - "Hint is shown when --theme not provided"
  artifacts:
    - path: "packages/cli/src/commands/init.ts"
      provides: "Init command with theme support"
      contains: "--theme"
  key_links:
    - from: "packages/cli/src/commands/init.ts"
      to: "packages/cli/src/utils/apply-theme.ts"
      via: "import applyTheme"
      pattern: "applyTheme"
---

<objective>
Extend the init command to accept an optional --theme parameter for applying custom themes during project initialization.

Purpose: Users can initialize a project with their custom theme in a single command, reducing setup friction.

Output: Modified init.ts that accepts --theme encoded string and applies theme after base file setup.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-cli-theme-integration/22-CONTEXT.md
@.planning/phases/22-cli-theme-integration/22-01-SUMMARY.md
@packages/cli/src/commands/init.ts
@packages/cli/src/utils/apply-theme.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add --theme argument to init command</name>
  <files>packages/cli/src/commands/init.ts</files>
  <action>
Modify the init command's args object to include the theme parameter:

```typescript
args: {
  // ... existing args (yes, cwd) ...
  theme: {
    type: 'string',
    description: 'Encoded theme configuration from configurator',
    required: false,
  },
},
```

Add this after the existing `cwd` arg. The theme arg is optional - users can still init without a theme.
  </action>
  <verify>TypeScript compiles: `cd packages/cli && pnpm tsc --noEmit`</verify>
  <done>Init command accepts --theme string parameter</done>
</task>

<task type="auto">
  <name>Task 2: Apply theme after base file setup</name>
  <files>packages/cli/src/commands/init.ts</files>
  <action>
1. Add import at top of file:
   ```typescript
   import { applyTheme } from '../utils/apply-theme';
   ```

2. At the END of the run function, AFTER the success message ("lit-ui initialized successfully!"), add theme handling:

```typescript
// Handle theme if provided
if (args.theme) {
  console.log('');
  await applyTheme(cwd, args.theme, { yes: args.yes });
} else {
  // Show hint about theme customization
  console.log('');
  info('Tip: Use --theme to customize colors. Get one at https://lit-ui.dev/themes');
}
```

This ensures:
- Theme is applied after all base setup is complete
- User sees theme application as a separate step
- The --yes flag is passed through to skip prompts in non-interactive mode
- When no theme provided, user gets a helpful hint about the configurator
  </action>
  <verify>TypeScript compiles: `cd packages/cli && pnpm tsc --noEmit`</verify>
  <done>Init command applies theme when --theme provided and shows hint when not provided</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `cd packages/cli && pnpm tsc --noEmit` succeeds
2. `cd packages/cli && pnpm build` succeeds
3. Manual verification possible: `cd packages/cli && node dist/index.js init --help` shows --theme parameter
</verification>

<success_criteria>
- Init command accepts --theme parameter
- Theme is applied after base file setup when provided
- Hint about theme customization shown when --theme not provided
- --yes flag works for non-interactive theme application
</success_criteria>

<output>
After completion, create `.planning/phases/22-cli-theme-integration/22-02-SUMMARY.md`
</output>
