---
phase: 04-cli
plan: 06
type: execute
wave: 4
depends_on: ["04-04", "04-05"]
files_modified:
  - packages/cli/src/commands/list.ts
  - packages/cli/src/index.ts
autonomous: false

must_haves:
  truths:
    - "Running `lit-ui list` shows available components with descriptions"
    - "CLI is fully functional with init, add, and list commands"
    - "All success criteria from ROADMAP.md Phase 4 are met"
  artifacts:
    - path: "packages/cli/src/commands/list.ts"
      provides: "List command implementation"
      exports: ["list"]
    - path: "packages/cli/src/index.ts"
      provides: "Complete CLI with all subcommands"
      contains: "list"
  key_links:
    - from: "packages/cli/src/commands/list.ts"
      to: "packages/cli/src/utils/registry.ts"
      via: "listComponents"
      pattern: "listComponents"
---

<objective>
Implement `lit-ui list` command and verify full CLI functionality.

Purpose: List helps users discover available components; this plan completes the CLI.
Output: Complete, working CLI that meets all Phase 4 success criteria.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-cli/04-CONTEXT.md
@.planning/phases/04-cli/04-04-SUMMARY.md
@.planning/phases/04-cli/04-05-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create list command</name>
  <files>packages/cli/src/commands/list.ts</files>
  <action>
Create list.ts using citty defineCommand:

```typescript
import { defineCommand } from 'citty';
import pc from 'picocolors';
import { listComponents } from '../utils/registry';

export const list = defineCommand({
  meta: {
    name: 'list',
    description: 'List available components',
  },
  async run() {
    const components = listComponents();

    console.log();
    console.log(pc.bold('Available components:'));
    console.log();

    for (const component of components) {
      console.log(`  ${pc.cyan(component.name)}`);
      console.log(`    ${pc.dim(component.description)}`);
      console.log();
    }

    console.log(pc.dim(`Run ${pc.reset('lit-ui add <component>')} to install a component.`));
    console.log();
  },
});
```

Output format:
```
Available components:

  button
    A customizable button with variants, sizes, loading state, and form participation

  dialog
    Accessible modal dialog with focus trapping, animations, and nested dialog support

Run `lit-ui add <component>` to install a component.
```
  </action>
  <verify>TypeScript compiles</verify>
  <done>List command shows all components with descriptions</done>
</task>

<task type="auto">
  <name>Task 2: Wire list command and final build</name>
  <files>packages/cli/src/index.ts</files>
  <action>
1. Update src/index.ts with all commands:
   ```typescript
   import { init } from './commands/init';
   import { add } from './commands/add';
   import { list } from './commands/list';

   const main = defineCommand({
     meta: {
       name: 'lit-ui',
       version,
       description: 'Add lit-ui components to your project',
     },
     subCommands: { init, add, list },
   });

   runMain(main);
   ```

2. Final build: `npm run build`

3. Verify all commands:
   - `node dist/index.js --help` shows all subcommands
   - `node dist/index.js list` shows components
   - `node dist/index.js init --help` shows init options
   - `node dist/index.js add --help` shows add options
  </action>
  <verify>All CLI commands work</verify>
  <done>CLI complete with init, add, list commands</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete lit-ui CLI with three commands:
- `lit-ui init` - Initialize project with config and base files
- `lit-ui add <component>` - Add component to project
- `lit-ui list` - Show available components
  </what-built>
  <how-to-verify>
1. Create a new test directory outside the monorepo
2. Run: `node /path/to/packages/cli/dist/index.js --help`
   - Should show lit-ui name, version, and 3 subcommands

3. Run: `node /path/to/packages/cli/dist/index.js list`
   - Should show button and dialog with descriptions

4. Run: `node /path/to/packages/cli/dist/index.js init`
   - Should create lit-ui.json
   - Should copy base files to lib/lit-ui/
   - Should show Tailwind setup instructions

5. Run: `node /path/to/packages/cli/dist/index.js add button`
   - Should copy button.ts to components/ui/button/

6. Verify Phase 4 success criteria from ROADMAP.md:
   - [ ] Running `npx lit-ui init` creates lit-ui.json config and installs required dependencies
   - [ ] Running `npx lit-ui add button` copies button component source to user's project
   - [ ] CLI detects user's build tool (Vite, Webpack, esbuild) and provides appropriate setup instructions
   - [ ] Running `npx lit-ui list` shows available components with descriptions
   - [ ] CLI configures Tailwind v4 CSS-based setup (not legacy config file)
  </how-to-verify>
  <resume-signal>Type "approved" if all criteria pass, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
- `lit-ui list` outputs formatted component list
- `lit-ui --help` shows init, add, list subcommands
- All Phase 4 success criteria from ROADMAP.md verified
</verification>

<success_criteria>
CLI is complete and meets all Phase 4 requirements
</success_criteria>

<output>
After completion, create `.planning/phases/04-cli/04-06-SUMMARY.md`
</output>
