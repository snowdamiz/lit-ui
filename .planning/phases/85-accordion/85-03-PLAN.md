---
phase: 85-accordion
plan: "03"
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/accordion/SKILL.md
autonomous: true
requirements:
  - ACC-03

must_haves:
  truths:
    - "SKILL.md CSS Custom Properties table has 14 entries matching tailwind.css :root exactly"
    - "Color token defaults use double-fallback var() form (e.g. var(--color-border, var(--ui-color-border)))"
    - "Missing --ui-accordion-gap token is present in the table"
    - "Behavior Notes section exists covering accordion-specific behaviors (state management, animation, keyboard nav, lazy loading, etc.)"
  artifacts:
    - path: "skill/skills/accordion/SKILL.md"
      provides: "Accurate SKILL.md with 14 CSS tokens and Behavior Notes section"
      contains: "--ui-accordion-gap"
  key_links:
    - from: "skill/skills/accordion/SKILL.md (CSS Custom Properties table)"
      to: "packages/core/src/styles/tailwind.css (:root accordion block)"
      via: "Default values match tailwind.css :root entries exactly"
      pattern: "var(--color-border, var(--ui-color-border)) double-fallback form"
---

<objective>
Update `skill/skills/accordion/SKILL.md` to fix the CSS Custom Properties table (13 → 14 entries, correct double-fallback defaults) and add a Behavior Notes section.

Current issues:
1. 13 entries — missing `--ui-accordion-gap` (present in tailwind.css :root)
2. Color token defaults use single `var()` form instead of double-fallback form
3. No Behavior Notes section (all prior phases 70-84 added this section)

Purpose: Claude agents using this skill file will implement accordion correctly without needing to read source files.
Output: `SKILL.md` with 14-entry CSS token table and a Behavior Notes section with ~10 entries covering accordion-specific behaviors.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Exact tailwind.css :root accordion token block (ground truth for default values): -->

```css
  --ui-accordion-border: var(--color-border, var(--ui-color-border));
  --ui-accordion-border-width: 1px;
  --ui-accordion-radius: 0.375rem;
  --ui-accordion-gap: 0;

  --ui-accordion-header-padding: 1rem;
  --ui-accordion-header-font-weight: 500;
  --ui-accordion-header-font-size: 1rem;
  --ui-accordion-header-text: var(--color-foreground, var(--ui-color-foreground));
  --ui-accordion-header-bg: transparent;
  --ui-accordion-header-hover-bg: var(--color-muted, var(--ui-color-muted));

  --ui-accordion-panel-padding: 0 1rem 1rem;
  --ui-accordion-panel-text: var(--color-muted-foreground, var(--ui-color-muted-foreground));

  --ui-accordion-transition: 200ms;

  --ui-accordion-ring: var(--color-ring, var(--ui-color-ring));
```

From accordion.ts — key behaviors to document:
- `value` prop = controlled mode (comma-separated expanded item values)
- `default-value` prop = uncontrolled mode (initial value; ignored once `value` is set)
- `multiple` attribute = multi-expand mode
- `collapsible` attribute = allow closing last panel in single-expand mode
- `disabled` on container propagates to all child items
- `lui-accordion` dispatches `ui-change` with `{ value: string, expandedItems: string[] }`
- `lui-accordion-item` has `lazy` prop for deferred content rendering
- `heading-level` prop controls ARIA heading level (default 3)
- `tabindex` prop on items managed by roving tabindex (managed by parent)
- CSS Grid animation: `panel-wrapper` transitions `grid-template-rows: 0fr → 1fr`
- `prefers-reduced-motion` sets transition-duration to 0ms
- `data-state` attribute on items: `open` | `closed`
- Internal event: `ui-accordion-toggle` (from item to parent; consumer should use `ui-change`)
- `focusHeader()` method on item used by parent for roving tabindex keyboard nav

Established Behavior Notes pattern from prior phases (e.g. Phase 84-03 Toast: 13 entries, Phase 83-03 Popover: 13 entries).
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix CSS token defaults and add Behavior Notes to SKILL.md</name>
  <files>skill/skills/accordion/SKILL.md</files>
  <action>
    In `skill/skills/accordion/SKILL.md`, make two changes:

    **1. Replace the CSS Custom Properties table** (currently 13 entries with stale single-var() defaults) with 14 accurate entries:

    ```markdown
    ## CSS Custom Properties

    | Property | Default | Description |
    |----------|---------|-------------|
    | `--ui-accordion-border` | `var(--color-border, var(--ui-color-border))` | Border color between items and around the container. |
    | `--ui-accordion-border-width` | `1px` | Border width. |
    | `--ui-accordion-radius` | `0.375rem` | Container border radius. |
    | `--ui-accordion-gap` | `0` | Gap between accordion items. |
    | `--ui-accordion-header-padding` | `1rem` | Header button padding. |
    | `--ui-accordion-header-font-weight` | `500` | Header font weight. |
    | `--ui-accordion-header-font-size` | `1rem` | Header font size. |
    | `--ui-accordion-header-text` | `var(--color-foreground, var(--ui-color-foreground))` | Header text color. |
    | `--ui-accordion-header-bg` | `transparent` | Header background color. |
    | `--ui-accordion-header-hover-bg` | `var(--color-muted, var(--ui-color-muted))` | Header background on hover. |
    | `--ui-accordion-panel-padding` | `0 1rem 1rem` | Panel content padding. |
    | `--ui-accordion-panel-text` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Panel text color. |
    | `--ui-accordion-transition` | `200ms` | Animation duration for expand/collapse. |
    | `--ui-accordion-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring color. |
    ```

    **2. Append a Behavior Notes section** at the end of the file:

    ```markdown
    ## Behavior Notes

    - **State management**: `lui-accordion` manages expanded state centrally. `lui-accordion-item` never self-toggles — it fires `ui-accordion-toggle` (internal) and the parent updates `expanded` on each item.
    - **Controlled mode**: Set `value` (comma-separated item values) to control expanded state externally. React to `ui-change` event to update.
    - **Uncontrolled mode**: Use `default-value` for initial state. Omit `value` entirely — once `value` is set it takes precedence over `default-value`.
    - **Single-expand (default)**: Opening one panel auto-closes others. Clicking the active header is a no-op unless `collapsible` is set.
    - **Collapsible**: With `collapsible` attribute on the container, clicking the active header closes all panels (value becomes `""`).
    - **Multi-expand**: `multiple` attribute allows any number of panels open simultaneously. `value` is a comma-separated string (e.g. `"item-1,item-3"`).
    - **Lazy rendering**: `lazy` attribute on an item defers default slot mounting until first expand. Once expanded once, content is preserved on collapse (not destroyed).
    - **CSS Grid animation**: Panel uses `grid-template-rows: 0fr → 1fr` transition via `--ui-accordion-transition`. No JS height calculation needed.
    - **Reduced motion**: `prefers-reduced-motion: reduce` sets both panel wrapper and chevron transition-duration to `0ms`.
    - **Keyboard navigation**: ArrowDown/ArrowUp move focus between enabled items (wrapping). Home/End jump to first/last. Enter/Space toggle via native button click. Roving tabindex managed by parent.
    - **data-state attribute**: Each `lui-accordion-item` exposes `data-state="open"` or `data-state="closed"` for CSS targeting or test queries.
    - **Heading level**: `heading-level` on `lui-accordion-item` sets the `aria-level` on the wrapping `role="heading"` div. Default is 3. Match your page's document outline.
    - **Disabled propagation**: `disabled` on `lui-accordion` sets `disabled` on all child items. Individual items can also be disabled independently.
    ```

    Do NOT change the Usage examples, Props tables, Slots tables, or Events table — only update the CSS Custom Properties table and append Behavior Notes.
  </action>
  <verify>
    <automated>grep -c "ui-accordion" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md</automated>
    Expect: 14 token rows in the CSS Custom Properties table (plus mentions in Behavior Notes = more than 14 total matches).

    Also run:
    <automated>grep "ui-accordion-gap" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md</automated>
    Expect: Present (was missing).

    Also run:
    <automated>grep "Behavior Notes" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md</automated>
    Expect: Section heading found.

    Also run:
    <automated>grep "ui-color-border\|ui-color-foreground\|ui-color-muted\|ui-color-ring" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md</automated>
    Expect: Matches confirming double-fallback var() form for color tokens.
  </verify>
  <done>SKILL.md CSS Custom Properties table has 14 entries with double-fallback defaults; --ui-accordion-gap is present; Behavior Notes section appended with ~13 entries covering state management, animation, lazy loading, keyboard nav, and accessibility.</done>
</task>

</tasks>

<verification>
grep -n "Behavior Notes" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md
Expected: Section heading present.

grep "ui-accordion-gap" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md
Expected: Present in CSS Custom Properties table.

grep "var(--color-border, var(--ui-color-border))" /Users/sn0w/Documents/dev/lit-components/skill/skills/accordion/SKILL.md
Expected: Found (correct double-fallback default for border token).
</verification>

<success_criteria>
- CSS Custom Properties table has exactly 14 entries
- `--ui-accordion-gap` entry present with default `0`
- All 5 color token defaults use double-fallback `var(--color-X, var(--ui-color-X))` form
- Behavior Notes section present with ~13 entries
</success_criteria>

<output>
After completion, create `.planning/phases/85-accordion/85-03-SUMMARY.md`
</output>
