---
phase: 75-checkbox
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/styles/tailwind.css
autonomous: true
requirements: [CHK-01]

must_haves:
  truths:
    - "Checkbox dark mode tokens inherit from semantic .dark overrides — no hardcoded oklch values in the .dark block for --ui-checkbox-* properties"
    - "All checkbox state tokens (bg, border, bg-checked, border-checked, check-color, bg-indeterminate, border-indeterminate, ring) use the double-fallback pattern in :root"
    - "Checkbox token defaults in :root match the THEME-SPEC.md values exactly"
  artifacts:
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Checkbox CSS tokens in :root and cleaned-up .dark block"
      contains: "--ui-checkbox-bg: var(--color-background"
  key_links:
    - from: "packages/core/src/styles/tailwind.css (.dark block)"
      to: "Semantic dark tokens (.dark { --color-background, --color-foreground, --color-border, etc. })"
      via: "double-fallback var(--color-*, var(--ui-color-*))"
      pattern: "ui-checkbox.*var\\(--color-"
---

<objective>
Polish the Checkbox component CSS defaults in tailwind.css to match the v8.0 monochrome theme by removing redundant hardcoded dark mode overrides.

Purpose: The .dark block in tailwind.css contains 8 hardcoded oklch values for checkbox tokens (lines 401-408). These bypass the semantic dark mode token cascade. The :root block tokens correctly use the double-fallback pattern — but the .dark block overrides them with raw oklch values, breaking the token contract. The same pattern was applied to Button (Phase 70-01), Dialog (Phase 71-01), Input (Phase 72-01), Textarea (Phase 73-01), and Select (Phase 74-01).

Output: The .dark block no longer overrides checkbox color tokens. The semantic .dark overrides of --color-background, --color-border, --color-primary, --color-ring are sufficient to drive checkbox dark mode appearance via the :root double-fallback cascade.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/69-theme-foundation/THEME-SPEC.md

<interfaces>
<!-- Current state of checkbox tokens in tailwind.css. Executor should verify these before editing. -->

From packages/core/src/styles/tailwind.css (.dark block, PROBLEMATIC — needs removal):
```css
/* Checkbox dark mode */
--ui-checkbox-bg: oklch(0.10 0 0);
--ui-checkbox-border: oklch(0.45 0 0);
--ui-checkbox-bg-checked: oklch(0.985 0 0);
--ui-checkbox-border-checked: oklch(0.985 0 0);
--ui-checkbox-check-color: oklch(0.18 0 0);
--ui-checkbox-bg-indeterminate: oklch(0.985 0 0);
--ui-checkbox-border-indeterminate: oklch(0.985 0 0);
--ui-checkbox-ring: oklch(0.55 0 0);
```

From packages/core/src/styles/tailwind.css (:root block, CORRECT — matches THEME-SPEC and uses double-fallback):
```css
/* Default state (unchecked) */
--ui-checkbox-bg: var(--color-background, white);
--ui-checkbox-border: var(--color-border, var(--ui-color-border));

/* Checked state */
--ui-checkbox-bg-checked: var(--color-primary, var(--ui-color-primary));
--ui-checkbox-border-checked: var(--color-primary, var(--ui-color-primary));
--ui-checkbox-check-color: white;

/* Indeterminate state (same visual weight as checked) */
--ui-checkbox-bg-indeterminate: var(--color-primary, var(--ui-color-primary));
--ui-checkbox-border-indeterminate: var(--color-primary, var(--ui-color-primary));

/* Focus state */
--ui-checkbox-ring: var(--color-ring, var(--ui-color-ring));

/* Error state */
--ui-checkbox-border-error: var(--color-destructive, var(--ui-color-destructive));
--ui-checkbox-text-error: var(--color-destructive, var(--ui-color-destructive));
```

Why the .dark overrides should be removed: The .dark semantic block already defines:
- `--color-background: oklch(0.10 0 0)` → --ui-checkbox-bg inherits via var(--color-background, white)
- `--color-border: oklch(0.37 0 0)` → --ui-checkbox-border inherits via var(--color-border, var(--ui-color-border))
- `--color-primary: oklch(0.985 0 0)` → --ui-checkbox-bg-checked, --ui-checkbox-border-checked, --ui-checkbox-bg-indeterminate, --ui-checkbox-border-indeterminate inherit
- `--color-ring: oklch(0.55 0 0)` → --ui-checkbox-ring inherits via var(--color-ring, var(--ui-color-ring))

Note: --ui-checkbox-check-color is `white` in :root (hardcoded white, not a var()). In dark mode the .dark override sets it to oklch(0.18 0 0) (near-black), which makes sense because the checked bg becomes near-white. This one IS intentional. Remove all EXCEPT --ui-checkbox-check-color if it is semantically needed.

Wait — actually: in dark mode, bg-checked becomes oklch(0.985 0 0) (near-white via --color-primary), so the check-color must be near-black to be visible. The hardcoded white in :root would produce invisible white-on-white in dark mode. So --ui-checkbox-check-color in .dark IS required and must NOT be removed.

Remove: --ui-checkbox-bg, --ui-checkbox-border, --ui-checkbox-bg-checked, --ui-checkbox-border-checked, --ui-checkbox-bg-indeterminate, --ui-checkbox-border-indeterminate, --ui-checkbox-ring (7 lines).
Keep: --ui-checkbox-check-color: oklch(0.18 0 0) — this is semantically required for dark mode contrast.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove redundant hardcoded checkbox tokens from .dark block in tailwind.css</name>
  <files>packages/core/src/styles/tailwind.css</files>
  <action>
In packages/core/src/styles/tailwind.css, find the .dark block. Locate the "/* Checkbox dark mode */" comment and the 8 hardcoded --ui-checkbox-* override lines below it.

Remove the following 7 lines (these are fully covered by the semantic .dark cascade via double-fallback in :root):
- `--ui-checkbox-bg: oklch(0.10 0 0);`
- `--ui-checkbox-border: oklch(0.45 0 0);`
- `--ui-checkbox-bg-checked: oklch(0.985 0 0);`
- `--ui-checkbox-border-checked: oklch(0.985 0 0);`
- `--ui-checkbox-bg-indeterminate: oklch(0.985 0 0);`
- `--ui-checkbox-border-indeterminate: oklch(0.985 0 0);`
- `--ui-checkbox-ring: oklch(0.55 0 0);`

KEEP `--ui-checkbox-check-color: oklch(0.18 0 0);` — this is required because the :root default is `white` (hardcoded, not a var()), and in dark mode the checked bg becomes near-white (oklch(0.985 0 0) via --color-primary), so the checkmark must become near-black for contrast. This is a genuine dark mode exception, not a redundant override.

Also keep the "/* Checkbox dark mode */" comment if --ui-checkbox-check-color is kept below it. If the comment is removed, the remaining single line should stay.

Do NOT modify the :root block. Do NOT modify checkbox.ts or checkbox-group.ts.

After editing, verify: `grep -n "ui-checkbox" packages/core/src/styles/tailwind.css` shows at most 1 line in the .dark block (--ui-checkbox-check-color).
  </action>
  <verify>
    <automated>grep -c "ui-checkbox-bg: oklch\|ui-checkbox-border: oklch\|ui-checkbox-bg-checked: oklch\|ui-checkbox-border-checked: oklch\|ui-checkbox-ring: oklch\|ui-checkbox-bg-indeterminate: oklch\|ui-checkbox-border-indeterminate: oklch" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css || echo 0</automated>
  </verify>
  <done>The .dark block contains at most --ui-checkbox-check-color (kept for contrast). All 7 redundant oklch overrides removed. Count of remaining hardcoded checkbox oklch values (excluding check-color) is 0.</done>
</task>

</tasks>

<verification>
1. Run: `grep -n "ui-checkbox" packages/core/src/styles/tailwind.css` — results in .dark block should show at most one line (--ui-checkbox-check-color: oklch(0.18 0 0))
2. Run: `grep -c "ui-checkbox-bg: oklch" packages/core/src/styles/tailwind.css` — should output `0`
3. Run: `grep "ui-checkbox-bg" packages/core/src/styles/tailwind.css` — should show only the :root entry with `var(--color-background, white)`
</verification>

<success_criteria>
- The .dark block contains at most --ui-checkbox-check-color (required for contrast)
- All 7 other redundant --ui-checkbox-* oklch values removed from .dark block
- The :root block checkbox tokens remain intact and match THEME-SPEC.md
- Checkbox dark mode appearance is governed by semantic .dark overrides via double-fallback cascade
- CHK-01 satisfied: Checkbox default styles match the v8.0 monochrome theme
</success_criteria>

<output>
After completion, create `.planning/phases/75-checkbox/75-01-SUMMARY.md` with what was changed, why, and the before/after for the .dark block removal.
</output>
