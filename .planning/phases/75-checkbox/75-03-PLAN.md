---
phase: 75-checkbox
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/checkbox/SKILL.md
autonomous: true
requirements: [CHK-03]

must_haves:
  truths:
    - "The SKILL.md CSS Custom Properties table covers all tokens from tailwind.css :root checkbox block with correct default values"
    - "A Behavior Notes section exists documenting accessibility semantics, keyboard interactions, form participation, and indeterminate state"
    - "The Events table accurately reflects both ui-change events (lui-checkbox and lui-checkbox-group select-all)"
  artifacts:
    - path: "skill/skills/checkbox/SKILL.md"
      provides: "Accurate checkbox skill file with expanded token set and Behavior Notes"
      contains: "## Behavior Notes"
  key_links:
    - from: "skill/skills/checkbox/SKILL.md (CSS Custom Properties table)"
      to: "packages/core/src/styles/tailwind.css (:root checkbox block)"
      via: "matching default values"
      pattern: "ui-checkbox-size-sm"
---

<objective>
Update skill/skills/checkbox/SKILL.md to expand the CSS token table from 12 entries to the full set (21 tokens), correct inaccurate default values, and add a Behavior Notes section documenting accessibility, keyboard, form, and indeterminate state semantics.

Purpose: The current SKILL.md has 12 CSS token entries with several inaccurate default values (wrong check-color default, wrong radius default, simplified var() without double-fallback). It also lacks a Behavior Notes section. Claude agents using this skill file would generate incorrect CSS overrides and miss important behavioral details. The same update was applied to Button (Phase 70-03), Dialog (Phase 71-03), Input (Phase 72-03), Textarea (Phase 73-03), and Select (Phase 74-03).

Output: SKILL.md with 21 accurate CSS token entries matching tailwind.css :root exactly, plus a Behavior Notes section covering the checkbox's unique tri-state, form participation, select-all coordination, and accessibility semantics.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Current SKILL.md state and what to add/fix -->

Current CSS Custom Properties table (12 entries, several wrong defaults):
- --ui-checkbox-check-color default: `var(--color-primary-foreground)` → WRONG, should be `white`
- --ui-checkbox-radius default: `var(--radius-sm)` → WRONG, should be `0.25rem`
- Color tokens missing double-fallback form (e.g., `var(--color-background)` → should be `var(--color-background, white)`)
- Missing: size-sm, size-md, size-lg, border-width, font-size-sm, font-size-md, font-size-lg, bg-indeterminate, border-indeterminate

Current Events table lists `change` event — WRONG, actual event name is `ui-change`.
Wait: reading SKILL.md again... the event table says `change` with detail `{ checked: boolean, value: string }`. But the source code dispatches `dispatchCustomEvent(this, 'ui-change', ...)`. The SKILL.md event name is wrong — must be `ui-change`.

Also: SKILL.md does not document the lui-checkbox-group ui-change event (dispatched on select-all toggle).

Behavior Notes section to add (modeled after Phase 70-03, 71-03, 72-03, 73-03, 74-03 patterns):
- Indeterminate tri-state: always clears to checked or unchecked on user interaction
- Form participation: uses ElementInternals (client-side only); submits value when checked, null when unchecked
- Select-all coordination: CheckboxGroup with select-all shows indeterminate when some children checked
- Keyboard: Space key toggles; Enter does NOT toggle (per W3C APG checkbox spec)
- Accessibility: role="checkbox", aria-checked (true/false/mixed), aria-labelledby links box to label
- Disabled: pointer-events none on :host([disabled]); aria-disabled on the box
- Required validation: touched-based (error shows only after user interaction)
- prefers-reduced-motion: all transitions set to 0ms
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand CSS tokens, fix event name, and add Behavior Notes to SKILL.md</name>
  <files>skill/skills/checkbox/SKILL.md</files>
  <action>
Rewrite skill/skills/checkbox/SKILL.md with these changes:

1. **Fix Events table**: Change event name from `change` to `ui-change`. Add second event row for lui-checkbox-group:

```markdown
## Events

| Event | Fired on | Detail | Description |
|-------|----------|--------|-------------|
| `ui-change` | `lui-checkbox` | `{ checked: boolean, value: string \| null }` | Fired when checkbox is toggled. value is null when unchecked. |
| `ui-change` | `lui-checkbox-group` | `{ allChecked: boolean, checkedCount: number, totalCount: number }` | Fired when select-all checkbox is toggled. |
```

2. **Replace CSS Custom Properties table** with the full 21-entry set matching tailwind.css :root exactly:

```markdown
## CSS Custom Properties

| Property | Default | Description |
|----------|---------|-------------|
| `--ui-checkbox-size-sm` | `1rem` | Checkbox box width and height at sm size. |
| `--ui-checkbox-size-md` | `1.25rem` | Checkbox box width and height at md size (default). |
| `--ui-checkbox-size-lg` | `1.5rem` | Checkbox box width and height at lg size. |
| `--ui-checkbox-radius` | `0.25rem` | Border radius of the checkbox box. |
| `--ui-checkbox-border-width` | `2px` | Border width of the checkbox box. |
| `--ui-checkbox-label-gap` | `0.5rem` | Gap between checkbox box and label text. |
| `--ui-checkbox-transition` | `150ms` | Transition duration for check/uncheck animations. |
| `--ui-checkbox-group-gap` | `0.5rem` | Gap between items in a checkbox group. |
| `--ui-checkbox-font-size-sm` | `0.875rem` | Label font size at sm size. |
| `--ui-checkbox-font-size-md` | `1rem` | Label font size at md size (default). |
| `--ui-checkbox-font-size-lg` | `1.125rem` | Label font size at lg size. |
| `--ui-checkbox-bg` | `var(--color-background, white)` | Background color when unchecked. |
| `--ui-checkbox-border` | `var(--color-border, var(--ui-color-border))` | Border color when unchecked. |
| `--ui-checkbox-bg-checked` | `var(--color-primary, var(--ui-color-primary))` | Background color when checked. |
| `--ui-checkbox-border-checked` | `var(--color-primary, var(--ui-color-primary))` | Border color when checked. |
| `--ui-checkbox-check-color` | `white` | Checkmark and dash icon color. |
| `--ui-checkbox-bg-indeterminate` | `var(--color-primary, var(--ui-color-primary))` | Background color in indeterminate state. |
| `--ui-checkbox-border-indeterminate` | `var(--color-primary, var(--ui-color-primary))` | Border color in indeterminate state. |
| `--ui-checkbox-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring color. |
| `--ui-checkbox-border-error` | `var(--color-destructive, var(--ui-color-destructive))` | Border color on validation error. |
| `--ui-checkbox-text-error` | `var(--color-destructive, var(--ui-color-destructive))` | Error message text color. |
```

3. **Add Behavior Notes section** after CSS Parts (or at the end of the file):

```markdown
## Behavior Notes

- **Indeterminate tri-state**: The `indeterminate` property is JS-only (not reflected to attribute). It always clears to checked or unchecked when the user interacts — there is no way for the user to set indeterminate directly.
- **Form participation**: Uses ElementInternals (client-side only, guarded with `isServer`). Submits `value` when checked, `null` when unchecked. Indeterminate state does not affect form submission value.
- **Keyboard**: Space key toggles the checkbox. Enter key does NOT toggle (per W3C APG checkbox pattern). `preventDefault()` stops page scroll on Space.
- **Accessibility**: `role="checkbox"` on the box div, `aria-checked` is `"true"`, `"false"`, or `"mixed"` (indeterminate). `aria-labelledby` links box to label element. `aria-disabled` set on box when disabled. `aria-required` set on box when required.
- **Required validation**: Error shows only after `touched` is true (user has interacted). The error message "Please check this box." is hardcoded in the component.
- **Select-all coordination**: `lui-checkbox-group` with `select-all` attribute renders an internal "Select all" checkbox. When some children are checked, select-all shows indeterminate state. Toggling select-all checks/unchecks all enabled children in a batch (prevents race condition via internal `_batchUpdating` flag).
- **Disabled propagation**: Setting `disabled` on `lui-checkbox-group` propagates to all child `lui-checkbox` elements. Group-level disabled renders at 50% opacity via `:host([disabled])`.
- **Focus ring**: Applied to `.checkbox-box:focus-visible` (the box div, not the host). Uses `outline: 2px solid` with 2px offset.
- **prefers-reduced-motion**: All transitions on `.check-path`, `.dash-path`, and `.checkbox-box` are set to `transition-duration: 0ms`.
```

Preserve all existing content not being replaced (frontmatter, Usage examples, Props tables, Slots tables, CSS Parts table). Only update the Events table, CSS Custom Properties table, and add Behavior Notes.
  </action>
  <verify>
    <automated>grep -c "ui-checkbox-size-sm\|ui-checkbox-border-width\|ui-checkbox-bg-indeterminate\|Behavior Notes" /Users/sn0w/Documents/dev/lit-components/skill/skills/checkbox/SKILL.md</automated>
  </verify>
  <done>SKILL.md contains at least 4 matches for the grep (size-sm, border-width, bg-indeterminate, Behavior Notes). Event table shows `ui-change` not `change`. CSS token count is 21. check-color default is `white`. radius default is `0.25rem`.</done>
</task>

</tasks>

<verification>
1. Run: `grep -c "name:.*--ui-checkbox-\|| \`--ui-checkbox-" skill/skills/checkbox/SKILL.md` — should show ~21 token rows
2. Run: `grep "Behavior Notes" skill/skills/checkbox/SKILL.md` — should return a match
3. Run: `grep "ui-change" skill/skills/checkbox/SKILL.md` — should show event name corrected from 'change'
4. Run: `grep "check-color.*white" skill/skills/checkbox/SKILL.md` — should show default is white
5. Run: `grep "0.25rem" skill/skills/checkbox/SKILL.md` — should show radius default
</verification>

<success_criteria>
- CSS Custom Properties table has 21 entries matching tailwind.css :root checkbox block exactly
- Event table uses `ui-change` (not `change`), documents both lui-checkbox and lui-checkbox-group events
- Behavior Notes section added with 9 entries covering tri-state, form, keyboard, a11y, validation, select-all, disabled, focus ring, reduced-motion
- --ui-checkbox-check-color default is `white` (corrected from `var(--color-primary-foreground)`)
- --ui-checkbox-radius default is `0.25rem` (corrected from `var(--radius-sm)`)
- CHK-03 satisfied: skill/skills/checkbox SKILL.md is accurate and up-to-date
</success_criteria>

<output>
After completion, create `.planning/phases/75-checkbox/75-03-SUMMARY.md` with the before/after for token count, event name fix, and Behavior Notes addition.
</output>
