---
phase: 97-update-skills-to-include-recent-addition-of-chart-system-there-should-be-a-detailed-sub-skill-for-each-chart-type-and-main-router-skill-needs-to-be-updated-too
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/line-chart/SKILL.md
  - skill/skills/area-chart/SKILL.md
  - skill/skills/bar-chart/SKILL.md
autonomous: true
requirements:
  - SKILL-LINE-CHART
  - SKILL-AREA-CHART
  - SKILL-BAR-CHART

must_haves:
  truths:
    - "skill/skills/line-chart/SKILL.md documents smooth, zoom, markLines props and appendData streaming warning"
    - "skill/skills/area-chart/SKILL.md documents smooth, stacked, zoom, labelPosition props and data type"
    - "skill/skills/bar-chart/SKILL.md documents stacked, horizontal, showLabels, colorByData props and BarChartSeries type"
    - "All three skills include the React useRef+useEffect pattern for .data assignment"
    - "All three skills note that data is a JS property only (attribute: false)"
  artifacts:
    - path: "skill/skills/line-chart/SKILL.md"
      provides: "lui-line-chart skill"
      contains: "appendData"
    - path: "skill/skills/area-chart/SKILL.md"
      provides: "lui-area-chart skill"
      contains: "stacked"
    - path: "skill/skills/bar-chart/SKILL.md"
      provides: "lui-bar-chart skill"
      contains: "colorByData"
  key_links:
    - from: "skill/skills/line-chart/SKILL.md"
      to: "skill/skills/charts/SKILL.md"
      via: "shared props reference"
      pattern: "skills/charts"
    - from: "skill/skills/area-chart/SKILL.md"
      to: "skill/skills/charts/SKILL.md"
      via: "shared props reference"
      pattern: "skills/charts"
---

<objective>
Create the three skill files for line chart, area chart, and bar chart — covering chart-specific props, data types, critical behavior notes, and usage examples.

Purpose: These are the highest-traffic chart types (trend lines and bar comparisons cover the majority of charting use cases). Without these skills, AI assistants cannot answer basic questions like "how do I stream data to a line chart".
Output: skill/skills/line-chart/SKILL.md, skill/skills/area-chart/SKILL.md, skill/skills/bar-chart/SKILL.md
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/97-update-skills-to-include-recent-addition-of-chart-system-there-should-be-a-detailed-sub-skill-for-each-chart-type-and-main-router-skill-needs-to-be-updated-too/97-RESEARCH.md

<interfaces>
<!-- lui-line-chart chart-specific props (from RESEARCH.md) -->
smooth        — boolean, default false. Catmull-Rom spline interpolation.
zoom          — boolean, default false. DataZoom slider + mouse wheel pan.
markLines     — JS only. MarkLineSpec[], default undefined. Threshold/reference lines.

Data type: LineChartSeries[]
  type LineChartSeries = { name: string; data: (number | [number|string, number] | null)[] }

CRITICAL: Streaming mode uses appendData — do NOT call setOption after pushData() has started.

<!-- lui-area-chart chart-specific props -->
smooth        — boolean, default false.
stacked       — boolean, default false. Passes stack:'total' internally.
zoom          — boolean, default false.
labelPosition — 'top' | 'bottom' | '', default ''. '' means no labels.

Data type: same as line chart (LineChartSeries[]) — area is line with areaStyle.

<!-- lui-bar-chart chart-specific props -->
stacked       — boolean, default false. Passes stack:'total' internally.
horizontal    — boolean, default false. Flips orientation.
showLabels    — show-labels attribute. boolean, default false. Value labels on bars.
labelPosition — label-position attribute. 'top' | 'bottom', default 'top'.
colorByData   — color-by-data attribute. boolean, default false. Each bar gets distinct palette color.

Data type: BarChartSeries[]
  type BarChartSeries = { name: string; data: (number | null)[] }

Note: categories (x-axis labels) passed via option prop or option builder.
No _streamingMode override — inherits 'buffer' default from BaseChartElement.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skill/skills/line-chart/SKILL.md</name>
  <files>skill/skills/line-chart/SKILL.md</files>
  <action>
Create the directory skill/skills/line-chart/ and write skill/skills/line-chart/SKILL.md.

Match the exact frontmatter + section structure from skill/skills/data-table/SKILL.md as the format reference.

Content to write:

---
name: lit-ui-line-chart
description: >-
  How to use <lui-line-chart> — props, data types, streaming, React integration, CSS tokens.
---

# Line Chart

Multi-series time series and trend line chart built on ECharts. Supports smooth interpolation, zoom/pan controls, mark lines, and real-time streaming via pushData() using ECharts appendData path.

## Usage

**Important:** `data`, `option`, and `markLines` are JS properties — not HTML attributes.

```js
import '@lit-ui/charts/line-chart';

const chart = document.querySelector('lui-line-chart');
chart.data = [
  { name: 'Sales', data: [120, 200, 150, 80, 70, 110, 130] },
  { name: 'Revenue', data: [60, 100, 80, 40, 50, 75, 90] },
];
```

```html
<lui-line-chart smooth zoom></lui-line-chart>
```

```tsx
// React — useRef + useEffect required for all .data assignments
import { useRef, useEffect } from 'react';

function LineChartDemo({ data }) {
  const ref = useRef(null);
  useEffect(() => {
    if (ref.current) ref.current.data = data;
  }, [data]);
  return <lui-line-chart ref={ref} smooth zoom />;
}
```

```js
// Real-time streaming
chart.data = [{ name: 'Live', data: [] }];
setInterval(() => chart.pushData(Math.random() * 100), 100);
// Multiple pushData() calls in the same frame are batched via requestAnimationFrame
```

```js
// Mark lines (threshold/reference lines)
chart.markLines = [
  { value: 80, label: 'Target', color: '#ef4444' },
];
// markLines is JS property only — cannot be set as HTML attribute
```

## Data Type

```ts
type LineChartSeries = {
  name: string;
  data: (number | [number | string, number] | null)[];
};

// chart.data is LineChartSeries[]
chart.data = [
  { name: 'Series A', data: [10, 20, 15, 30] },
  { name: 'Series B', data: [5, 15, 25, 20] },
];
```

## Props

For shared props (data, option, loading, enableGl, maxPoints) see `skills/charts`.

| Prop | Attribute | Type | Default | Description |
|------|-----------|------|---------|-------------|
| `smooth` | `smooth` | `boolean` | `false` | Catmull-Rom spline interpolation between data points. |
| `zoom` | `zoom` | `boolean` | `false` | DataZoom slider at bottom + mouse wheel pan. |
| `markLines` | — (JS only) | `MarkLineSpec[]` | `undefined` | Threshold/reference horizontal lines. |

## Methods

See `skills/charts` for shared `pushData()` and `getChart()`.

## Events

See `skills/charts` for shared `ui-webgl-unavailable` event.

## CSS Custom Properties

See `skills/charts` for all 17 shared `--ui-chart-*` tokens.

## Behavior Notes

- **JS property required**: `data`, `option`, and `markLines` must be set as JS properties. Use `element.data = [...]` after element is connected. In React, use a ref + useEffect.
- **Streaming uses appendData**: Line chart uses ECharts native `appendData` path for streaming — do NOT call `chart.option = ...` or reassign `chart.data` after `pushData()` has started. Doing so wipes the streamed data.
- **markLines on index-0 series only**: Mark lines are rendered on the first series only to avoid N duplicate threshold lines for N series.
- **pushData() point type**: For a single-series line chart, pass a number. For a multi-series line chart with x values, pass `[xValue, yValue]`.

Then write this content to skill/skills/line-chart/SKILL.md.
  </action>
  <verify>
    <automated>grep -c "appendData\|markLines\|LineChartSeries" /Users/sn0w/Documents/dev/lit-components/skill/skills/line-chart/SKILL.md</automated>
  </verify>
  <done>skill/skills/line-chart/SKILL.md exists with frontmatter, Usage section with React example, Data Type block, Props table (smooth/zoom/markLines), and appendData streaming warning in Behavior Notes.</done>
</task>

<task type="auto">
  <name>Task 2: Create skill/skills/area-chart/SKILL.md and skill/skills/bar-chart/SKILL.md</name>
  <files>skill/skills/area-chart/SKILL.md, skill/skills/bar-chart/SKILL.md</files>
  <action>
Create both skill files. Match the same structure as skill/skills/line-chart/SKILL.md created in Task 1.

--- AREA CHART ---

Write skill/skills/area-chart/SKILL.md:

---
name: lit-ui-area-chart
description: >-
  How to use <lui-area-chart> — props, data types, stacked areas, streaming, React integration.
---

# Area Chart

Filled area chart built on ECharts. Extends the line chart with area fill (areaStyle). Supports stacking, smooth curves, zoom, and real-time streaming via appendData.

## Usage

**Important:** `data` and `option` are JS properties — not HTML attributes.

```js
import '@lit-ui/charts/area-chart';

const chart = document.querySelector('lui-area-chart');
chart.data = [
  { name: 'Downloads', data: [120, 200, 150, 80, 70, 110, 130] },
  { name: 'Installs', data: [60, 100, 80, 40, 50, 75, 90] },
];
```

```html
<lui-area-chart smooth stacked zoom></lui-area-chart>
```

```tsx
// React
import { useRef, useEffect } from 'react';
function AreaChartDemo({ data }) {
  const ref = useRef(null);
  useEffect(() => {
    if (ref.current) ref.current.data = data;
  }, [data]);
  return <lui-area-chart ref={ref} smooth stacked />;
}
```

## Data Type

Same as line chart:
```ts
type LineChartSeries = {
  name: string;
  data: (number | [number | string, number] | null)[];
};
```
Area chart reuses the same ECharts module as line — area is a line series with `areaStyle` applied.

## Props

For shared props (data, option, loading, enableGl, maxPoints) see `skills/charts`.

| Prop | Attribute | Type | Default | Description |
|------|-----------|------|---------|-------------|
| `smooth` | `smooth` | `boolean` | `false` | Catmull-Rom spline interpolation. |
| `stacked` | `stacked` | `boolean` | `false` | Stack all series (passes `stack: 'total'` to ECharts). |
| `zoom` | `zoom` | `boolean` | `false` | DataZoom slider + mouse wheel pan. |
| `labelPosition` | `label-position` | `'top' \| 'bottom' \| ''` | `''` | Data point labels. `''` = no labels. |

## Methods

See `skills/charts` for shared `pushData()` and `getChart()`.

## CSS Custom Properties

See `skills/charts` for all 17 shared `--ui-chart-*` tokens.

## Behavior Notes

- **JS property required**: `data` and `option` must be set as JS properties.
- **Streaming uses appendData**: Same as line chart — do NOT reassign `chart.data` after streaming has started.
- **stacked translates to string**: `stacked` boolean prop passes `stack: 'total'` string internally — ECharts requires a string group name to activate stacking, not a boolean.
- **labelPosition empty string**: `labelPosition: ''` means no labels. `'top'` renders labels above fill area.

--- BAR CHART ---

Write skill/skills/bar-chart/SKILL.md:

---
name: lit-ui-bar-chart
description: >-
  How to use <lui-bar-chart> — grouped/stacked/horizontal bars, value labels, colorByData, streaming.
---

# Bar Chart

Grouped, stacked, and horizontal bar chart built on ECharts. Supports value labels on bars, per-bar palette coloring, and streaming data updates.

## Usage

**Important:** `data` and `option` are JS properties — not HTML attributes.

```js
import '@lit-ui/charts/bar-chart';

const chart = document.querySelector('lui-bar-chart');
chart.data = [
  { name: 'Q1', data: [120, 80, 95] },
  { name: 'Q2', data: [150, 110, 130] },
];
```

```html
<lui-bar-chart stacked show-labels></lui-bar-chart>
<lui-bar-chart horizontal color-by-data></lui-bar-chart>
```

```tsx
// React
import { useRef, useEffect } from 'react';
function BarChartDemo({ data }) {
  const ref = useRef(null);
  useEffect(() => {
    if (ref.current) ref.current.data = data;
  }, [data]);
  return <lui-bar-chart ref={ref} stacked show-labels />;
}
```

```js
// With category axis labels — use option prop
import { buildBarOption } from '@lit-ui/charts/bar-chart';
chart.option = buildBarOption(data, { categories: ['Jan', 'Feb', 'Mar'] });
```

## Data Type

```ts
type BarChartSeries = {
  name: string;
  data: (number | null)[];
};

// chart.data is BarChartSeries[]
chart.data = [
  { name: 'Product A', data: [300, 450, 200, 380] },
  { name: 'Product B', data: [250, 300, 175, 420] },
];
```

## Props

For shared props (data, option, loading, enableGl, maxPoints) see `skills/charts`.

| Prop | Attribute | Type | Default | Description |
|------|-----------|------|---------|-------------|
| `stacked` | `stacked` | `boolean` | `false` | Stack all series on a shared axis (passes `stack: 'total'` internally). |
| `horizontal` | `horizontal` | `boolean` | `false` | Flip to horizontal orientation (x/y axes swapped). |
| `showLabels` | `show-labels` | `boolean` | `false` | Render value labels on each bar. |
| `labelPosition` | `label-position` | `'top' \| 'bottom'` | `'top'` | Label position. `'top'` = above bar for vertical; `'right'` = end of bar for horizontal. |
| `colorByData` | `color-by-data` | `boolean` | `false` | Each bar gets a distinct color from the palette (uses ECharts `colorBy: 'data'`). |

## Methods

See `skills/charts` for shared `pushData()` and `getChart()`.

## CSS Custom Properties

See `skills/charts` for all 17 shared `--ui-chart-*` tokens.

## Behavior Notes

- **JS property required**: `data` and `option` must be set as JS properties.
- **Category labels**: The `categories` field (x-axis labels) is not a reactive property. Pass categories via the `option` prop or use `buildBarOption(data, { categories: ['Jan', 'Feb', 'Mar'] })`.
- **stacked translates to string**: The `stacked` boolean passes `stack: 'total'` string to ECharts — ECharts requires a string group name, not a boolean.
- **labelPosition adapts to orientation**: When `horizontal` is true, `labelPosition: 'top'` maps to `'right'` automatically to avoid clipping at bar ends.
- **colorByData palette**: When `color-by-data` is set, uses ThemeBridge palette automatically — no manual color lookup needed.
- **Streaming**: Uses circular buffer + setOption (not appendData). Call `pushData(point)` to append. `maxPoints` controls buffer size (default 1000).

Write both files to their respective paths.
  </action>
  <verify>
    <automated>grep -l "stacked\|colorByData" /Users/sn0w/Documents/dev/lit-components/skill/skills/area-chart/SKILL.md /Users/sn0w/Documents/dev/lit-components/skill/skills/bar-chart/SKILL.md | wc -l</automated>
  </verify>
  <done>skill/skills/area-chart/SKILL.md exists with stacked prop documented. skill/skills/bar-chart/SKILL.md exists with stacked/horizontal/showLabels/colorByData/labelPosition props and categories note.</done>
</task>

</tasks>

<verification>
1. `ls skill/skills/line-chart/SKILL.md skill/skills/area-chart/SKILL.md skill/skills/bar-chart/SKILL.md` — all 3 files exist
2. `grep "appendData" skill/skills/line-chart/SKILL.md skill/skills/area-chart/SKILL.md` — streaming warning present in both
3. `grep "colorByData\|color-by-data" skill/skills/bar-chart/SKILL.md` — bar chart coloring documented
4. `grep "useRef\|useEffect" skill/skills/line-chart/SKILL.md` — React pattern documented
</verification>

<success_criteria>
- All 3 skill files created with correct frontmatter, Usage section, Data Type, Props table, and Behavior Notes
- appendData streaming warning present in line and area chart skills
- Bar chart documents categories workaround via option prop
- All files follow the established skill format from data-table/SKILL.md
</success_criteria>

<output>
After completion, create `.planning/phases/97-update-skills-to-include-recent-addition-of-chart-system-there-should-be-a-detailed-sub-skill-for-each-chart-type-and-main-router-skill-needs-to-be-updated-too/97-02-SUMMARY.md`
</output>
