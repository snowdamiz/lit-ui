---
phase: 30-cli-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/cli/src/templates/index.ts
  - packages/cli/src/registry/registry.json
  - packages/cli/src/utils/install-component.ts
  - packages/cli/src/commands/list.ts
autonomous: true

must_haves:
  truths:
    - "Developer runs npx lit-ui add input and input component is installed"
    - "Developer runs npx lit-ui add textarea and textarea component is installed"
    - "Developer runs npx lit-ui list and sees components grouped by category"
  artifacts:
    - path: "packages/cli/src/templates/index.ts"
      provides: "INPUT_TEMPLATE and TEXTAREA_TEMPLATE exports"
      contains: "INPUT_TEMPLATE"
    - path: "packages/cli/src/registry/registry.json"
      provides: "Input and textarea component registry entries"
      contains: "input"
    - path: "packages/cli/src/utils/install-component.ts"
      provides: "NPM package mapping for input and textarea"
      contains: "@lit-ui/input"
    - path: "packages/cli/src/commands/list.ts"
      provides: "Categorized component list output"
      contains: "Form"
  key_links:
    - from: "packages/cli/src/templates/index.ts"
      to: "COMPONENT_TEMPLATES"
      via: "export record"
      pattern: "input.*TEMPLATE"
---

<objective>
Add CLI support for Input and Textarea components with categorized list output.

Purpose: Enable developers to install the new form components via CLI in both copy-source and npm modes, with organized component listing by category.
Output: Updated CLI templates, registry, npm install mapping, and categorized list command.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-cli-documentation/30-CONTEXT.md
@.planning/phases/30-cli-documentation/30-RESEARCH.md

@packages/cli/src/templates/index.ts
@packages/cli/src/registry/registry.json
@packages/cli/src/utils/install-component.ts
@packages/cli/src/commands/list.ts
@packages/input/src/input.ts
@packages/textarea/src/textarea.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Input and Textarea templates</name>
  <files>packages/cli/src/templates/index.ts</files>
  <action>
Add INPUT_TEMPLATE and TEXTAREA_TEMPLATE to templates/index.ts following existing pattern:

1. Copy the FULL source code from packages/input/src/input.ts as INPUT_TEMPLATE string
2. Copy the FULL source code from packages/textarea/src/textarea.ts as TEXTAREA_TEMPLATE string
3. Transform imports in templates:
   - Change `import { TailwindElement, tailwindBaseStyles } from '@lit-ui/core';` to `import { TailwindElement, tailwindBaseStyles } from '../../lib/lit-ui/tailwind-element';`
4. Add both to COMPONENT_TEMPLATES record:
   ```typescript
   export const COMPONENT_TEMPLATES: Record<string, string> = {
     button: BUTTON_TEMPLATE,
     dialog: DIALOG_TEMPLATE,
     input: INPUT_TEMPLATE,
     textarea: TEXTAREA_TEMPLATE,
   };
   ```

Note: Keep the FULL component source including JSDoc, all imports, class definition, styles, and HTMLElementTagNameMap declaration. Use template literal syntax with escaped backticks (\`) for CSS template strings inside the template.
  </action>
  <verify>TypeScript compiles: `cd packages/cli && pnpm exec tsc --noEmit`</verify>
  <done>INPUT_TEMPLATE and TEXTAREA_TEMPLATE exported and included in COMPONENT_TEMPLATES record</done>
</task>

<task type="auto">
  <name>Task 2: Update registry and npm install mapping</name>
  <files>packages/cli/src/registry/registry.json, packages/cli/src/utils/install-component.ts</files>
  <action>
1. Add input and textarea to registry.json:
   ```json
   {
     "name": "input",
     "description": "Form input with validation, sizes, password toggle, and clearable",
     "files": [
       { "path": "components/input/input.ts", "type": "component" }
     ],
     "dependencies": [],
     "registryDependencies": []
   },
   {
     "name": "textarea",
     "description": "Multi-line text input with auto-resize, validation, and character count",
     "files": [
       { "path": "components/textarea/textarea.ts", "type": "component" }
     ],
     "dependencies": [],
     "registryDependencies": []
   }
   ```

2. Add to componentToPackage in install-component.ts:
   ```typescript
   export const componentToPackage: Record<string, string> = {
     button: '@lit-ui/button',
     dialog: '@lit-ui/dialog',
     input: '@lit-ui/input',
     textarea: '@lit-ui/textarea',
   };
   ```

3. Per CONTEXT.md: Remove usage hint output after successful install. Delete or comment out the lines after `consola.success()` that print "Import:" and "Usage:" instructions. Silent success per decision.
  </action>
  <verify>JSON is valid: `cd packages/cli && node -e "require('./src/registry/registry.json')"` and TypeScript compiles</verify>
  <done>Registry contains input and textarea entries; componentToPackage maps to @lit-ui/input and @lit-ui/textarea; install is silent on success</done>
</task>

<task type="auto">
  <name>Task 3: Add categorized list output</name>
  <files>packages/cli/src/commands/list.ts</files>
  <action>
Update list.ts to group components by category per CONTEXT.md decision:
- Form: input, textarea
- Feedback: dialog
- Actions: button

Replace the flat iteration with categorized output:

```typescript
// Define component categories
const categories: Record<string, string[]> = {
  'Form': ['input', 'textarea'],
  'Feedback': ['dialog'],
  'Actions': ['button'],
};

// Group output by category
for (const [category, componentNames] of Object.entries(categories)) {
  console.log(pc.bold(pc.cyan(category)));

  for (const name of componentNames) {
    const component = components.find(c => c.name === name);
    if (!component) continue;

    if (mode === 'npm') {
      const packageName = componentToPackage[component.name] ?? `@lit-ui/${component.name}`;
      console.log(`  ${pc.white(component.name)} - ${pc.dim(packageName)}`);
    } else {
      console.log(`  ${pc.white(component.name)}`);
    }
    console.log(`    ${pc.dim(component.description)}`);
  }
  console.log(''); // Empty line between categories
}
```

Keep the mode display and final "Run lit-ui add" hint at the end.
  </action>
  <verify>Run `cd packages/cli && pnpm exec tsx src/index.ts list` and verify output shows Form, Feedback, Actions categories</verify>
  <done>List command outputs components grouped under Form, Feedback, and Actions headings</done>
</task>

</tasks>

<verification>
1. `cd packages/cli && pnpm exec tsc --noEmit` - TypeScript compiles without errors
2. `cd packages/cli && pnpm exec tsx src/index.ts list` - Shows categorized output
3. Registry JSON is valid (parseable by Node)
</verification>

<success_criteria>
- INPUT_TEMPLATE and TEXTAREA_TEMPLATE exist in templates/index.ts
- Registry.json contains input and textarea component entries
- componentToPackage maps input->@lit-ui/input and textarea->@lit-ui/textarea
- List command shows components under Form, Feedback, Actions categories
- Install success message is silent (no usage hints)
</success_criteria>

<output>
After completion, create `.planning/phases/30-cli-documentation/30-01-SUMMARY.md`
</output>
