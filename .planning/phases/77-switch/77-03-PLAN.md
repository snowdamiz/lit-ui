---
phase: 77-switch
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/switch/SKILL.md
autonomous: true
requirements:
  - SWT-03

must_haves:
  truths:
    - "The switch SKILL.md CSS token table lists all 24 tokens from the tailwind.css :root switch block with exact default values"
    - "The Events table correctly names the consumer-facing event as ui-change (not change)"
    - "The Events detail includes both checked: boolean and value: string | null fields"
    - "A Behavior Notes section exists covering key switch behavioral semantics"
  artifacts:
    - path: "skill/skills/switch/SKILL.md"
      provides: "Accurate switch skill file with expanded CSS token table, corrected event name, and Behavior Notes"
      contains: "## Behavior Notes"
  key_links:
    - from: "skill/skills/switch/SKILL.md (CSS Custom Properties)"
      to: "packages/core/src/styles/tailwind.css (:root switch block)"
      via: "token defaults must match exactly"
      pattern: "ui-switch-track-width-sm|ui-switch-thumb-size|ui-switch-font-size|ui-switch-thumb-bg-disabled"
---

<objective>
Expand the `CSS Custom Properties` table in `skill/skills/switch/SKILL.md` from 12 to 24 entries covering all tokens in the tailwind.css :root switch block, fix the Events table event name from `change` to `ui-change` with correct detail type, and add a Behavior Notes section with key switch behavioral semantics.

Purpose: The skill file is what Claude uses to implement switch components in user projects. The event name is wrong (change vs ui-change), 12 tokens are missing, and color defaults lack the double-fallback var() form. This brings the switch skill to the same accuracy standard as button (70-03), dialog (71-03), input (72-03), textarea (73-03), select (74-03), checkbox (75-03), and radio (76-03).

Output: `skill/skills/switch/SKILL.md` — CSS token table 12→24 entries, event corrected to ui-change, Behavior Notes section added
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/75-checkbox/75-03-SUMMARY.md

<interfaces>
<!-- Current SKILL.md CSS Custom Properties table (12 entries — wrong single-var defaults): -->
```markdown
| Property | Default | Description |
|----------|---------|-------------|
| `--ui-switch-radius` | `9999px` | Border radius of the track. |
| `--ui-switch-thumb-radius` | `9999px` | Border radius of the thumb. |
| `--ui-switch-thumb-offset` | `2px` | Inset offset for thumb positioning. |
| `--ui-switch-label-gap` | `0.5rem` | Gap between label and track. |
| `--ui-switch-transition` | `150ms` | Transition duration for slide animation. |
| `--ui-switch-track-bg` | `var(--color-muted)` | Track background when unchecked. |
| `--ui-switch-track-bg-checked` | `var(--color-primary)` | Track background when checked. |
| `--ui-switch-track-border` | `var(--color-border)` | Track border color. |
| `--ui-switch-thumb-bg` | `white` | Thumb background color. |
| `--ui-switch-ring` | `var(--color-ring)` | Focus ring color. |
| `--ui-switch-border-error` | `var(--color-destructive)` | Track border color on error. |
| `--ui-switch-text-error` | `var(--color-destructive)` | Error text color. |
```

<!-- Current Events table (WRONG event name — 'change' not 'ui-change', wrong detail type): -->
```markdown
| Event | Detail | Description |
|-------|--------|-------------|
| `change` | `{ checked: boolean }` | Fired when the switch is toggled. |
```

<!-- Correct event from switch.ts source (line 326): -->
<!-- dispatchCustomEvent(this, 'ui-change', { checked: this.checked, value: this.checked ? this.value : null }) -->
<!-- Detail: { checked: boolean, value: string | null } -->

<!-- Full switch :root block in tailwind.css — source of truth for token defaults: -->
```css
  --ui-switch-track-width-sm: 2rem;
  --ui-switch-track-height-sm: 1.125rem;
  --ui-switch-thumb-size-sm: 0.875rem;
  --ui-switch-track-width-md: 2.5rem;
  --ui-switch-track-height-md: 1.375rem;
  --ui-switch-thumb-size-md: 1.125rem;
  --ui-switch-track-width-lg: 3rem;
  --ui-switch-track-height-lg: 1.625rem;
  --ui-switch-thumb-size-lg: 1.375rem;
  --ui-switch-radius: 9999px;
  --ui-switch-thumb-radius: 9999px;
  --ui-switch-thumb-offset: 2px;
  --ui-switch-label-gap: 0.5rem;
  --ui-switch-transition: 150ms;
  --ui-switch-font-size-sm: 0.875rem;
  --ui-switch-font-size-md: 1rem;
  --ui-switch-font-size-lg: 1.125rem;
  --ui-switch-track-bg: var(--color-muted, var(--ui-color-muted));
  --ui-switch-track-border: var(--color-border, var(--ui-color-border));
  --ui-switch-thumb-bg: white;
  --ui-switch-track-bg-checked: var(--color-primary, var(--ui-color-primary));
  --ui-switch-track-bg-disabled: var(--color-muted, var(--ui-color-muted));
  --ui-switch-thumb-bg-disabled: var(--color-muted-foreground, var(--ui-color-muted-foreground));
  --ui-switch-ring: var(--color-ring, var(--ui-color-ring));
  --ui-switch-border-error: var(--color-destructive, var(--ui-color-destructive));
  --ui-switch-text-error: var(--color-destructive, var(--ui-color-destructive));
```

<!-- Behavior from switch.ts source code: -->
<!-- - Switch is form-associated (static formAssociated = true) with ElementInternals -->
<!-- - formResetCallback restores defaultChecked (initial checked at connectedCallback) and clears touched/showError -->
<!-- - formDisabledCallback propagates disabled state from form -->
<!-- - Toggle via click, Space, or Enter key (handleKeyDown prevents default on Space) -->
<!-- - Required validation: error shows only after touched=true (user has interacted) -->
<!-- - Disabled: pointer-events: none on :host([disabled]); aria-disabled="true"; tabindex="-1" -->
<!-- - Focus ring: .switch-track:focus-visible with 2px outline and 2px offset -->
<!-- - prefers-reduced-motion: transition-duration 0ms on .switch-thumb and .switch-track -->
<!-- - label prop renders a <label> element; slot default also renders <label> (same element, just empty if no slot content) -->
<!-- - ui-change event detail: { checked: boolean, value: string | null } (null when unchecked) -->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand CSS tokens, fix event name/detail, and add Behavior Notes to SKILL.md</name>
  <files>skill/skills/switch/SKILL.md</files>
  <action>
Make three changes to `skill/skills/switch/SKILL.md`:

**Change 1: Replace the CSS Custom Properties section (12→24 entries)**

Replace the current `## CSS Custom Properties` section with:

```markdown
## CSS Custom Properties

| Property | Default | Description |
|----------|---------|-------------|
| `--ui-switch-track-width-sm` | `2rem` | Track width at sm size. |
| `--ui-switch-track-height-sm` | `1.125rem` | Track height at sm size. |
| `--ui-switch-thumb-size-sm` | `0.875rem` | Thumb diameter at sm size. |
| `--ui-switch-track-width-md` | `2.5rem` | Track width at md size (default). |
| `--ui-switch-track-height-md` | `1.375rem` | Track height at md size (default). |
| `--ui-switch-thumb-size-md` | `1.125rem` | Thumb diameter at md size (default). |
| `--ui-switch-track-width-lg` | `3rem` | Track width at lg size. |
| `--ui-switch-track-height-lg` | `1.625rem` | Track height at lg size. |
| `--ui-switch-thumb-size-lg` | `1.375rem` | Thumb diameter at lg size. |
| `--ui-switch-radius` | `9999px` | Border radius of the track (pill shape). |
| `--ui-switch-thumb-radius` | `9999px` | Border radius of the thumb (circle). |
| `--ui-switch-thumb-offset` | `2px` | Inset offset for thumb from track edge. |
| `--ui-switch-label-gap` | `0.5rem` | Gap between label and track. |
| `--ui-switch-transition` | `150ms` | Transition duration for slide animation. |
| `--ui-switch-font-size-sm` | `0.875rem` | Label font size at sm size. |
| `--ui-switch-font-size-md` | `1rem` | Label font size at md size (default). |
| `--ui-switch-font-size-lg` | `1.125rem` | Label font size at lg size. |
| `--ui-switch-track-bg` | `var(--color-muted, var(--ui-color-muted))` | Track background when unchecked. |
| `--ui-switch-track-border` | `var(--color-border, var(--ui-color-border))` | Track border color. |
| `--ui-switch-thumb-bg` | `white` | Thumb background color (hardcoded white; use .dark override if needed). |
| `--ui-switch-track-bg-checked` | `var(--color-primary, var(--ui-color-primary))` | Track background when checked. |
| `--ui-switch-track-bg-disabled` | `var(--color-muted, var(--ui-color-muted))` | Track background when disabled. |
| `--ui-switch-thumb-bg-disabled` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Thumb color when disabled. |
| `--ui-switch-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring color. |
| `--ui-switch-border-error` | `var(--color-destructive, var(--ui-color-destructive))` | Track border color on error. |
| `--ui-switch-text-error` | `var(--color-destructive, var(--ui-color-destructive))` | Error text color. |
```

**Change 2: Fix the Events section**

Replace the current `## Events` section (which incorrectly uses `change` with wrong detail type):

```markdown
## Events

| Event | Detail | Description |
|-------|--------|-------------|
| `ui-change` | `{ checked: boolean, value: string \| null }` | Fired when the switch is toggled. Value is the submission value when checked, null when unchecked. |
```

**Change 3: Add Behavior Notes section at the end of the file**

Append after the Events section (or CSS Parts section if that comes last):

```markdown
## Behavior Notes

- **Form participation**: `lui-switch` is form-associated (uses ElementInternals, client-side only with `isServer` guard). When checked, submits the `value` attribute under the switch's `name`. When unchecked, submits null (matching native checkbox behavior).
- **Toggle activation**: Click, Space key, or Enter key toggles the switch. Space key prevents default page scroll behavior.
- **Required validation**: Error message shows only after `touched=true` (the user has interacted via click or keyboard). Submitting a form with a required unchecked switch also triggers the error.
- **Disabled state**: `pointer-events: none` on `:host([disabled])` prevents all interaction. `aria-disabled="true"` and `tabindex="-1"` are set on the track div (removes from tab order). The track renders at 50% opacity.
- **Form reset**: `formResetCallback` restores the switch to its initial `checked` state (at `connectedCallback` time) and clears `touched` and error state.
- **Form disabled**: `formDisabledCallback` propagates the form's disabled state to the switch's `disabled` property.
- **Focus ring**: Applied to `.switch-track:focus-visible` (the div with `role="switch"`). Uses `outline: 2px solid` with 2px offset.
- **Thumb positioning**: Thumb slides from `left: var(--ui-switch-thumb-offset)` (unchecked) to a computed translateX based on track-width, thumb-size, and offset (checked). Each size class has its own transition target.
- **prefers-reduced-motion**: `transition-duration: 0ms` applied to `.switch-thumb` and `.switch-track` when user prefers reduced motion.
- **Label slot**: The `label` prop renders a `<label>` element with the text. The default slot renders the same `<label>` element with slot content. Both label and track are in a flex row with `gap: var(--ui-switch-label-gap)`.
```
  </action>
  <verify>
    <automated>grep -c "ui-switch-track-width-sm\|ui-switch-thumb-size\|ui-switch-font-size\|ui-switch-thumb-bg-disabled\|Behavior Notes\|ui-change" /Users/sn0w/Documents/dev/lit-components/skill/skills/switch/SKILL.md</automated>
  </verify>
  <done>
The SKILL.md file contains:
- 26-entry CSS Custom Properties table (all 24 tokens + 2 repeats in grep due to `thumb-size` matching 3 tokens but pattern counts are expected)
- Events table with `ui-change` and correct detail `{ checked: boolean, value: string | null }`
- Behavior Notes section with at least 10 entries
The grep command returns at least 6 (one each for track-width-sm, thumb-size matching, font-size matching, thumb-bg-disabled, Behavior Notes, ui-change).
  </done>
</task>

</tasks>

<verification>
After task completion:
1. `grep -c "ui-switch" skill/skills/switch/SKILL.md` — returns 24+ (one per token entry in table)
2. `grep "ui-change" skill/skills/switch/SKILL.md` — shows corrected event name
3. `grep "change\b" skill/skills/switch/SKILL.md | grep -v "ui-change\|formResetCallback\|prefers-reduced-motion\|Behavior\|toggle"` — no standalone `change` event (only `ui-change`)
4. `grep "Behavior Notes" skill/skills/switch/SKILL.md` — shows section header
5. `grep "color-muted, var" skill/skills/switch/SKILL.md` — shows double-fallback defaults
6. `grep "ui-switch-track-width-sm" skill/skills/switch/SKILL.md` — shows the new size token
</verification>

<success_criteria>
- CSS Custom Properties table has 24 entries covering all tokens from tailwind.css :root switch block
- Color token defaults use double-fallback var() form (e.g., `var(--color-muted, var(--ui-color-muted))`)
- Structural tokens use exact rem/px values from tailwind.css :root
- --ui-switch-thumb-bg default is 'white' (correct, matches :root)
- Events table uses `ui-change` (not `change`) with detail `{ checked: boolean, value: string | null }`
- Behavior Notes section added with at least 10 entries
</success_criteria>

<output>
After completion, create `.planning/phases/77-switch/77-03-SUMMARY.md` following the summary template.
</output>
