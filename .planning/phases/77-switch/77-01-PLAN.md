---
phase: 77-switch
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/styles/tailwind.css
autonomous: true
requirements:
  - SWT-01

must_haves:
  truths:
    - "Switch dark mode appearance is governed by semantic .dark token overrides; 6 of 7 redundant hardcoded oklch values removed"
    - "The .dark block keeps exactly one switch override: --ui-switch-thumb-bg with a light-gray dark value (because :root value is hardcoded 'white', not a var())"
    - "No other --ui-switch-* declarations remain in the .dark block"
  artifacts:
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Switch .dark block reduced from 7 oklch declarations to 1 exception"
      contains: "/* Switch dark mode */"
  key_links:
    - from: "packages/core/src/styles/tailwind.css (.dark block)"
      to: "packages/core/src/styles/tailwind.css (:root block)"
      via: "double-fallback var() cascade"
      pattern: "var\\(--color-muted,|var\\(--color-border,|var\\(--color-primary,|var\\(--color-ring,"
---

<objective>
Remove 6 of 7 hardcoded oklch values from the .dark block for switch tokens, retaining only the --ui-switch-thumb-bg override because the :root value is hardcoded 'white' (not a var()) and requires explicit dark mode inversion.

Purpose: Switch dark mode currently duplicates logic already handled by the semantic .dark cascade for 6 tokens. The 7th token (--ui-switch-thumb-bg) is an exception — identical to checkbox's check-color exception from Phase 75-01 — because white cannot cascade through a var() chain.

Output: `packages/core/src/styles/tailwind.css` — .dark switch block reduced from 7 declarations to 1 (--ui-switch-thumb-bg exception retained)
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/75-checkbox/75-01-SUMMARY.md

<interfaces>
<!-- Current .dark switch block in tailwind.css (lines 392-399): -->
```css
  /* Switch dark mode */
  --ui-switch-track-bg: oklch(0.37 0 0);
  --ui-switch-track-border: oklch(0.45 0 0);
  --ui-switch-thumb-bg: oklch(0.82 0 0);
  --ui-switch-track-bg-checked: oklch(0.985 0 0);
  --ui-switch-track-bg-disabled: oklch(0.27 0 0);
  --ui-switch-thumb-bg-disabled: oklch(0.45 0 0);
  --ui-switch-ring: oklch(0.55 0 0);
```

<!-- Switch :root color tokens (lines 729-745) — source of truth for cascade analysis: -->
```css
  --ui-switch-track-bg: var(--color-muted, var(--ui-color-muted));
  --ui-switch-track-border: var(--color-border, var(--ui-color-border));
  --ui-switch-thumb-bg: white;                                             /* EXCEPTION: hardcoded white */
  --ui-switch-track-bg-checked: var(--color-primary, var(--ui-color-primary));
  --ui-switch-track-bg-disabled: var(--color-muted, var(--ui-color-muted));
  --ui-switch-thumb-bg-disabled: var(--color-muted-foreground, var(--ui-color-muted-foreground));
  --ui-switch-ring: var(--color-ring, var(--ui-color-ring));
```

<!-- Cascade analysis:
  - track-bg: :root uses var(--color-muted,...) → .dark overrides --color-muted → CAN REMOVE
  - track-border: :root uses var(--color-border,...) → .dark overrides --color-border → CAN REMOVE
  - thumb-bg: :root = 'white' (hardcoded!) → .dark value MUST be kept for correct dark thumb color
  - track-bg-checked: :root uses var(--color-primary,...) → .dark overrides --color-primary → CAN REMOVE
  - track-bg-disabled: :root uses var(--color-muted,...) → .dark overrides --color-muted → CAN REMOVE
  - thumb-bg-disabled: :root uses var(--color-muted-foreground,...) → .dark overrides that token → CAN REMOVE
  - ring: :root uses var(--color-ring,...) → .dark overrides --color-ring → CAN REMOVE
-->
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Prune switch .dark block to only the thumb-bg exception</name>
  <files>packages/core/src/styles/tailwind.css</files>
  <action>
Find the `.dark` block in tailwind.css. Locate the `/* Switch dark mode */` comment followed by these 7 declarations (lines ~392-399):

```css
  /* Switch dark mode */
  --ui-switch-track-bg: oklch(0.37 0 0);
  --ui-switch-track-border: oklch(0.45 0 0);
  --ui-switch-thumb-bg: oklch(0.82 0 0);
  --ui-switch-track-bg-checked: oklch(0.985 0 0);
  --ui-switch-track-bg-disabled: oklch(0.27 0 0);
  --ui-switch-thumb-bg-disabled: oklch(0.45 0 0);
  --ui-switch-ring: oklch(0.55 0 0);
```

Replace the entire block (comment + 7 declarations) with a trimmed version that keeps ONLY the thumb-bg exception:

```css
  /* Switch dark mode */
  --ui-switch-thumb-bg: oklch(0.82 0 0); /* light-gray thumb on dark track; :root is hardcoded 'white' */
```

**Why 6 are removed and 1 kept:**
- `--ui-switch-track-bg`: :root = `var(--color-muted, ...)` → .dark overrides `--color-muted` → CASCADE WORKS
- `--ui-switch-track-border`: :root = `var(--color-border, ...)` → .dark overrides `--color-border` → CASCADE WORKS
- `--ui-switch-thumb-bg`: :root = `white` (hardcoded, NOT a var()) → cascade cannot override it → KEEP .dark override
- `--ui-switch-track-bg-checked`: :root = `var(--color-primary, ...)` → .dark overrides `--color-primary` → CASCADE WORKS
- `--ui-switch-track-bg-disabled`: :root = `var(--color-muted, ...)` → .dark overrides `--color-muted` → CASCADE WORKS
- `--ui-switch-thumb-bg-disabled`: :root = `var(--color-muted-foreground, ...)` → .dark overrides that token → CASCADE WORKS
- `--ui-switch-ring`: :root = `var(--color-ring, ...)` → .dark overrides `--color-ring` → CASCADE WORKS

This matches the checkbox `check-color: white` exception pattern from Phase 75-01. Keep the compact inline comment explaining why the exception exists.
  </action>
  <verify>
    <automated>grep -n "ui-switch" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css | grep -v "^[67][0-9][0-9]:\|^7[0-4][0-9]:"</automated>
  </verify>
  <done>
The `.dark` block contains exactly 1 `--ui-switch-*` declaration: `--ui-switch-thumb-bg`. The other 6 switch tokens (`track-bg`, `track-border`, `track-bg-checked`, `track-bg-disabled`, `thumb-bg-disabled`, `ring`) are NOT in the .dark block. The "Switch dark mode" comment remains with only the thumb-bg line beneath it. Running `grep -n "ui-switch" tailwind.css` shows only lines from the :root block (lines 700+) plus the single .dark exception.
  </done>
</task>

</tasks>

<verification>
After task completion, verify:
1. `grep -n "ui-switch" packages/core/src/styles/tailwind.css | grep -v "^[67][0-9][0-9]:\|^7[0-4][0-9]:"` — only the single thumb-bg exception line outside the :root block appears
2. `grep -n "Switch dark mode" packages/core/src/styles/tailwind.css` — shows the comment still present (not removed)
3. `grep -c "oklch" packages/core/src/styles/tailwind.css` — count decreases by 6 from baseline (7 removed, 1 kept)
4. `grep "ui-switch-track-bg\|ui-switch-track-border\|ui-switch-ring\|ui-switch-track-bg-checked\|ui-switch-track-bg-disabled\|ui-switch-thumb-bg-disabled" packages/core/src/styles/tailwind.css | grep -v ":root\|[67][0-9][0-9]"` — no results (removed from .dark)
</verification>

<success_criteria>
- The .dark block contains exactly 1 switch declaration: --ui-switch-thumb-bg with its oklch light-gray value and inline comment
- 6 switch tokens removed from .dark: track-bg, track-border, track-bg-checked, track-bg-disabled, thumb-bg-disabled, ring
- The :root switch token block (lines ~700-745) is unchanged
- Switch dark mode appearance governed by semantic .dark overrides except thumb-bg which requires the explicit override
</success_criteria>

<output>
After completion, create `.planning/phases/77-switch/77-01-SUMMARY.md` following the summary template.
</output>
