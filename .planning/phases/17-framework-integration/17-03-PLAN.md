---
phase: 17-framework-integration
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - examples/astro/package.json
  - examples/astro/tsconfig.json
  - examples/astro/astro.config.mjs
  - examples/astro/src/layouts/Layout.astro
  - examples/astro/src/pages/index.astro
  - examples/astro/README.md
autonomous: true

must_haves:
  truths:
    - "Developer runs `pnpm dev` and Astro dev server starts"
    - "Browser loads http://localhost:4321 and sees SSR'd Button and Dialog"
    - "Button click handler fires after hydration"
    - "Dialog opens and closes after hydration"
  artifacts:
    - path: "examples/astro/astro.config.mjs"
      provides: "Astro config with lit integration"
      contains: "@semantic-ui/astro-lit"
    - path: "examples/astro/src/pages/index.astro"
      provides: "SSR page with Lit components"
      contains: "client:visible"
    - path: "examples/astro/README.md"
      provides: "Quick start and explanation"
      contains: "client:visible"
  key_links:
    - from: "examples/astro/astro.config.mjs"
      to: "@semantic-ui/astro-lit"
      via: "lit() integration"
      pattern: "integrations.*lit"
    - from: "examples/astro/src/pages/index.astro"
      to: "@lit-ui/button"
      via: "component import"
      pattern: "import.*@lit-ui/button"
---

<objective>
Create an Astro SSR example demonstrating @lit-ui components.

Purpose: Show developers how to SSR Lit components in Astro 5+ with proper client hydration directives. This is the pattern for Astro-based SSR with Lit.

Output: Working Astro site that SSR's Button and Dialog components with proper client hydration via client:visible directives.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-framework-integration/17-CONTEXT.md
@.planning/phases/17-framework-integration/17-RESEARCH.md
@.planning/phases/16-ssr-package/16-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Astro project with Lit integration</name>
  <files>
    examples/astro/package.json
    examples/astro/tsconfig.json
    examples/astro/astro.config.mjs
  </files>
  <action>
    Create examples/astro directory with minimal Astro setup:

    1. package.json:
       - name: "@lit-ui/example-astro" (private: true)
       - type: module
       - scripts: dev, build, preview (standard Astro scripts via astro CLI)
       - dependencies: astro ^5.0.0, @semantic-ui/astro-lit latest
       - devDependencies: typescript ^5.9
       - Link to workspace packages: @lit-ui/ssr, @lit-ui/button, @lit-ui/dialog, @lit-ui/core all as "workspace:*"

    2. tsconfig.json:
       - extends "astro/tsconfigs/strict" (Astro's recommended config)
       - Include src directory

    3. astro.config.mjs:
       - Import { defineConfig } from 'astro/config'
       - Import lit from '@semantic-ui/astro-lit'
       - Export defineConfig with:
         - integrations: [lit()]
         - output: 'server' (SSR mode - note SSG works similarly)
       - Add comment explaining:
         - Why @semantic-ui/astro-lit instead of @astrojs/lit (deprecated in Astro 5)
         - output: 'server' enables SSR, 'static' for SSG
  </action>
  <verify>
    Files exist at examples/astro/package.json, tsconfig.json, astro.config.mjs.
    astro.config.mjs imports from @semantic-ui/astro-lit and uses lit() integration.
  </verify>
  <done>Astro project configured with Lit integration</done>
</task>

<task type="auto">
  <name>Task 2: Create Astro pages with Lit components</name>
  <files>
    examples/astro/src/layouts/Layout.astro
    examples/astro/src/pages/index.astro
  </files>
  <action>
    1. Create src/layouts/Layout.astro:
       - Props interface with title: string
       - HTML document structure (DOCTYPE, html, head, body)
       - Meta charset, viewport, title from props
       - Slot for page content
       - Minimal styling for demo

    2. Create src/pages/index.astro:
       - Import Layout from '../layouts/Layout.astro'
       - Import components: import '@lit-ui/button', import '@lit-ui/dialog'
       - Use Layout wrapper with title
       - Render components with client:visible directive:
         - <lui-button client:visible variant="primary">Click Me</lui-button>
         - <lui-dialog client:visible>...slots...</lui-dialog>
       - Add script tag for client-side interactivity:
         - Button click handler
         - Dialog open/close
       - Include one CSS custom property override to show theming
       - Add comments explaining:
         - client:visible hydrates when component enters viewport
         - client:load hydrates immediately (alternative)
         - Hydration is automatic via @semantic-ui/astro-lit
  </action>
  <verify>
    Layout.astro provides HTML document structure with slot.
    index.astro imports Lit components and uses client:visible directive.
    Script tag provides client-side interactivity.
  </verify>
  <done>Astro pages created with proper hydration directive pattern</done>
</task>

<task type="auto">
  <name>Task 3: Create README and verify example runs</name>
  <files>
    examples/astro/README.md
  </files>
  <action>
    1. Create README.md with:
       - Title: Astro SSR Example
       - Quick Start: cd examples/astro, pnpm install, pnpm dev
       - What This Shows: Lit SSR in Astro with client:* directives
       - Key Files: astro.config.mjs (integration), index.astro (page)
       - Important: Client Directives section explaining:
         - client:visible - hydrate when entering viewport (recommended)
         - client:load - hydrate immediately
         - client:idle - hydrate when browser is idle
         - Why each directive matters for performance
       - Important: @astrojs/lit Deprecation Note:
         - Official @astrojs/lit deprecated in Astro 5.0
         - Use @semantic-ui/astro-lit (community maintained)
       - Link to main lit-ui docs for deep dive

    2. Verify the example:
       - cd examples/astro && pnpm install
       - pnpm dev (start Astro dev server)
       - Open browser at localhost:4321, check:
         - Button and Dialog render correctly
         - Interactivity works after hydration
         - No console errors
  </action>
  <verify>
    README.md exists with Quick Start and client directive explanation.
    pnpm install succeeds in examples/astro directory.
    pnpm dev starts without errors.
  </verify>
  <done>Astro example documented and verified working</done>
</task>

</tasks>

<verification>
- [ ] examples/astro directory created with all config files
- [ ] astro.config.mjs uses @semantic-ui/astro-lit integration
- [ ] astro.config.mjs has output: 'server' for SSR mode
- [ ] index.astro uses client:visible directive on Lit components
- [ ] README explains client directives and @astrojs/lit deprecation
- [ ] pnpm install and pnpm dev succeed
- [ ] Browser shows working components with hydration
</verification>

<success_criteria>
1. Developer can cd examples/astro && pnpm install && pnpm dev
2. Browser shows Button and Dialog components
3. Components are interactive after hydration via client:visible
4. Pattern demonstrates proper Astro client directive usage with Lit
</success_criteria>

<output>
After completion, create `.planning/phases/17-framework-integration/17-03-SUMMARY.md`
</output>
