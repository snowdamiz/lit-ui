---
phase: 01-foundation
plan: 04
type: execute
wave: 3
depends_on: ["01-03"]
files_modified:
  - src/components/demo/demo.ts
  - index.html
  - src/index.ts
autonomous: false

must_haves:
  truths:
    - "Demo component extends TailwindElement and renders with Tailwind utility classes"
    - "Tailwind utility classes are visible and styled correctly in Shadow DOM"
    - "CSS custom properties (design tokens) cascade from :root into Shadow DOM"
    - "Dark mode works when .dark class is added to html element"
    - "Dev server shows live demo page with working component"
  artifacts:
    - path: "src/components/demo/demo.ts"
      provides: "Demo component validating TailwindElement"
      exports: ["DemoCard"]
      min_lines: 30
    - path: "index.html"
      provides: "Development demo page"
      contains: "<demo-card>"
  key_links:
    - from: "src/components/demo/demo.ts"
      to: "src/base/tailwind-element.ts"
      via: "extends TailwindElement"
      pattern: "extends TailwindElement"
    - from: "index.html"
      to: "src/components/demo/demo.ts"
      via: "script import"
      pattern: 'type="module"'
---

<objective>
Create a demo component and dev page that validates the entire foundation: TailwindElement works, Tailwind utilities render correctly in Shadow DOM, and design tokens cascade properly.

Purpose: This is the proof that the foundation works. A visible, interactive component proves all three requirements (FNDN-01, FNDN-02, FNDN-03) are met.
Output: A working demo page at localhost that shows a styled component using Tailwind utilities in Shadow DOM.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create demo component using TailwindElement</name>
  <files>src/components/demo/demo.ts, src/index.ts</files>
  <action>
Create src/components/demo/demo.ts with a demo component that validates:
1. TailwindElement base class works
2. Tailwind utility classes render correctly
3. Design tokens (CSS custom properties) work
4. Dark mode theming works

Component: DemoCard - a card component with various Tailwind utilities

```typescript
import { html, css } from 'lit';
import { customElement, property } from 'lit/decorators.js';
import { TailwindElement } from '../../base/tailwind-element';

@customElement('demo-card')
export class DemoCard extends TailwindElement {
  @property({ type: String }) title = 'Demo Card';
  @property({ type: Boolean }) elevated = false;

  // Component-specific styles (merged with Tailwind)
  static styles = [
    ...TailwindElement.styles,
    css`
      :host {
        display: block;
      }
    `
  ];

  render() {
    return html`
      <div class="
        p-6 rounded-lg border
        bg-card text-card-foreground
        ${this.elevated ? 'shadow-lg' : 'shadow-sm'}
        transition-shadow duration-200
      ">
        <h2 class="text-xl font-semibold text-foreground mb-2">
          ${this.title}
        </h2>
        <p class="text-muted-foreground mb-4">
          This card demonstrates Tailwind utilities working inside Shadow DOM.
        </p>
        <div class="flex gap-2">
          <button class="
            px-4 py-2 rounded-md font-medium
            bg-primary text-primary-foreground
            hover:opacity-90 transition-opacity
          ">
            Primary
          </button>
          <button class="
            px-4 py-2 rounded-md font-medium
            bg-secondary text-secondary-foreground
            border border-border
            hover:bg-accent transition-colors
          ">
            Secondary
          </button>
          <button class="
            px-4 py-2 rounded-md font-medium
            bg-destructive text-destructive-foreground
            hover:opacity-90 transition-opacity
          ">
            Destructive
          </button>
        </div>
        <div class="mt-4 p-3 rounded bg-muted">
          <code class="text-sm font-mono text-muted-foreground">
            Tokens: --color-primary, --color-background, etc.
          </code>
        </div>
      </div>
    `;
  }
}

declare global {
  interface HTMLElementTagNameMap {
    'demo-card': DemoCard;
  }
}
```

Update src/index.ts to export the demo component:
```typescript
export { TailwindElement } from './base/tailwind-element';
export { DemoCard } from './components/demo/demo';
```

This component uses:
- Layout: p-6, flex, gap-2, mb-2, mb-4, mt-4
- Colors: bg-card, text-card-foreground, bg-primary, bg-secondary, bg-destructive, bg-muted
- Borders: rounded-lg, rounded-md, border, border-border
- Typography: text-xl, font-semibold, font-medium, text-sm, font-mono
- Shadows: shadow-lg, shadow-sm (validates @property workaround)
- Transitions: transition-shadow, transition-opacity, transition-colors
- Interactivity: hover states
  </action>
  <verify>
Check file exists: `ls src/components/demo/demo.ts`
Verify extends TailwindElement: `grep "extends TailwindElement" src/components/demo/demo.ts`
Verify customElement: `grep "@customElement" src/components/demo/demo.ts`
Run TypeScript check: `npx tsc --noEmit`
  </verify>
  <done>Demo component exists, extends TailwindElement, and TypeScript compiles</done>
</task>

<task type="auto">
  <name>Task 2: Create dev server index.html with demo page</name>
  <files>index.html</files>
  <action>
Create index.html in project root as the dev server entry point.

Include:
- HTML5 doctype
- Meta viewport for responsive
- Load demo component via ES module
- Dark mode toggle button (adds/removes .dark class)
- Multiple demo-card instances to show variants
- Instructions text explaining what to verify

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>lit-ui Foundation Demo</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 2rem;
      background: var(--color-background, #fff);
      color: var(--color-foreground, #000);
      transition: background-color 0.2s, color 0.2s;
    }
    .demo-grid {
      display: grid;
      gap: 1.5rem;
      max-width: 800px;
      margin: 0 auto;
    }
    .controls {
      margin-bottom: 2rem;
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    .controls button {
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }
    .controls button:hover {
      background: #e5e5e5;
    }
    h1 {
      margin-bottom: 0.5rem;
    }
    .subtitle {
      color: #666;
      margin-bottom: 2rem;
    }
  </style>
</head>
<body>
  <h1>lit-ui Foundation Demo</h1>
  <p class="subtitle">Validating Tailwind + Shadow DOM integration</p>

  <div class="controls">
    <button onclick="document.documentElement.classList.toggle('dark')">
      Toggle Dark Mode
    </button>
    <span>Click to test theme switching</span>
  </div>

  <div class="demo-grid">
    <demo-card title="Standard Card"></demo-card>
    <demo-card title="Elevated Card" elevated></demo-card>
  </div>

  <script type="module" src="/src/index.ts"></script>

  <div style="margin-top: 3rem; padding: 1rem; background: #f0f0f0; border-radius: 0.5rem;">
    <h3 style="margin-top: 0;">Verification Checklist</h3>
    <ul>
      <li>✓ Cards render with visible styling (not unstyled HTML)</li>
      <li>✓ Buttons have colored backgrounds (primary=blue, destructive=red)</li>
      <li>✓ Elevated card has larger shadow than standard</li>
      <li>✓ Dark mode toggle changes colors (background becomes dark)</li>
      <li>✓ Hover states work on buttons</li>
    </ul>
  </div>
</body>
</html>
```
  </action>
  <verify>
Check file exists: `ls index.html`
Verify demo-card used: `grep "demo-card" index.html`
Verify module script: `grep 'type="module"' index.html`
Start dev server: `npm run dev` - should serve page at localhost
  </verify>
  <done>Dev page exists and loads demo component via ES module</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete foundation with TailwindElement base class, design tokens, and demo component.
This validates all Phase 1 success criteria:
1. TailwindElement injects Tailwind CSS into Shadow DOM
2. TypeScript compiles with Lit decorators
3. Design tokens cascade into Shadow DOM
4. Demo component renders with Tailwind utilities
  </what-built>
  <how-to-verify>
1. Run `npm run dev` to start the dev server
2. Open the URL shown in terminal (usually http://localhost:5173)
3. Verify these items:
   - [ ] Cards render with visible styling (backgrounds, borders, shadows)
   - [ ] Buttons have colored backgrounds:
     - Primary = blue/brand color
     - Secondary = gray/muted color
     - Destructive = red color
   - [ ] "Elevated Card" has a larger shadow than "Standard Card"
   - [ ] Click "Toggle Dark Mode" - background should turn dark, text should turn light
   - [ ] Hover over buttons - they should show subtle hover effects
   - [ ] No console errors related to styles or component registration

If any of these fail, the foundation needs debugging.
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe what's not working</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. src/components/demo/demo.ts exists with DemoCard component
2. Component extends TailwindElement
3. index.html exists with demo-card elements
4. `npm run dev` serves working demo page
5. Tailwind utilities render correctly in Shadow DOM (visible styles)
6. Design tokens work (semantic colors applied)
7. Dark mode toggle changes theme
8. No console errors
</verification>

<success_criteria>
- Demo component renders with visible Tailwind styling in Shadow DOM
- All button variants show correct colors (primary, secondary, destructive)
- Shadow utilities work (elevated card has larger shadow)
- Dark mode toggle changes theme colors throughout components
- Foundation is PROVEN WORKING through visual verification
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md`
</output>
