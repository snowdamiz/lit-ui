---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - vite.config.ts
  - src/vite-env.d.ts
  - src/index.ts
autonomous: true

must_haves:
  truths:
    - "TypeScript compiles with strict mode enabled"
    - "Lit 3 decorators work correctly with useDefineForClassFields: false"
    - "Vite dev server starts without errors"
    - "Tailwind v4 Vite plugin is configured and runs"
  artifacts:
    - path: "package.json"
      provides: "Project manifest with all dependencies"
      contains: "lit"
    - path: "tsconfig.json"
      provides: "TypeScript configuration for Lit"
      contains: "useDefineForClassFields"
    - path: "vite.config.ts"
      provides: "Vite build configuration"
      contains: "@tailwindcss/vite"
    - path: "src/index.ts"
      provides: "Library entry point"
      min_lines: 1
  key_links:
    - from: "vite.config.ts"
      to: "tailwindcss"
      via: "@tailwindcss/vite plugin"
      pattern: "tailwindcss\\(\\)"
    - from: "tsconfig.json"
      to: "vite.config.ts"
      via: "module resolution"
      pattern: "moduleResolution.*bundler"
---

<objective>
Initialize the project with TypeScript, Vite, and core dependencies for a Lit-based component library with Tailwind v4.

Purpose: Establishes the build toolchain and type system that all subsequent work depends on. Without this, nothing else can be built or tested.
Output: A working dev environment where `npm run dev` starts Vite and TypeScript compiles without errors.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize npm project and install dependencies</name>
  <files>package.json</files>
  <action>
Initialize npm project with name "lit-ui" and create package.json.

Install exact dependencies:
- lit (3.x) - Web component base
- tailwindcss (4.x) - CSS framework
- @tailwindcss/vite (4.x) - Vite plugin for Tailwind v4
- typescript (5.2+) - Type system
- vite (6.x) - Build tool
- vite-plugin-dts (4.x) - TypeScript declaration generation

Set type: "module" for ESM output.
Add scripts:
- "dev": "vite"
- "build": "vite build"
- "preview": "vite preview"

Use `npm init -y && npm install` to set up project.
  </action>
  <verify>
Run `npm ls` to confirm all packages installed.
Run `cat package.json` to verify scripts and type: "module" are present.
  </verify>
  <done>package.json exists with all dependencies and correct scripts</done>
</task>

<task type="auto">
  <name>Task 2: Configure TypeScript for Lit decorators</name>
  <files>tsconfig.json</files>
  <action>
Create tsconfig.json with configuration optimized for Lit 3 and decorators.

Critical settings (from research):
- target: "ES2022"
- module: "ESNext"
- moduleResolution: "bundler"
- experimentalDecorators: true
- useDefineForClassFields: false (CRITICAL - prevents Lit property shadowing)
- strict: true
- declaration: true
- declarationMap: true
- esModuleInterop: true
- skipLibCheck: true

Include src directory. Exclude node_modules.

Note: useDefineForClassFields: false is REQUIRED or Lit reactive properties won't trigger re-renders. This is a known pitfall documented in the research.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify TypeScript configuration is valid.
Check that useDefineForClassFields is set to false in tsconfig.json.
  </verify>
  <done>TypeScript compiles with strict mode and Lit-compatible settings</done>
</task>

<task type="auto">
  <name>Task 3: Configure Vite with Tailwind v4 plugin and library mode</name>
  <files>vite.config.ts, src/vite-env.d.ts, src/index.ts</files>
  <action>
Create vite.config.ts:
- Import @tailwindcss/vite as tailwindcss
- Import vite-plugin-dts as dts
- Configure plugins: [tailwindcss(), dts({ rollupTypes: true })]
- Configure build.lib for library output:
  - entry: 'src/index.ts'
  - formats: ['es'] (ESM-only per research recommendation)
- Configure rollupOptions.external: ['lit']
- Set resolve.alias for clean imports if needed

Create src/vite-env.d.ts for Vite types:
```typescript
/// <reference types="vite/client" />

declare module '*.css?inline' {
  const content: string;
  export default content;
}
```

Create src/index.ts as placeholder entry point:
```typescript
// Library entry point - exports added as components are built
export {};
```

This sets up the complete build pipeline for development.
  </action>
  <verify>
Run `npm run dev` to start Vite dev server - should start without errors.
Run `npm run build` to verify build pipeline works.
Check vite.config.ts contains tailwindcss() plugin call.
  </verify>
  <done>Vite dev server starts and build succeeds with Tailwind v4 plugin active</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `npm run dev` starts Vite without errors
2. `npx tsc --noEmit` compiles with zero errors
3. `npm run build` produces output in dist/
4. package.json has all required dependencies
5. tsconfig.json has useDefineForClassFields: false
</verification>

<success_criteria>
- TypeScript compiles with strict mode (tsconfig.json exists, tsc passes)
- Vite starts without errors (`npm run dev` works)
- Tailwind v4 plugin is loaded (vite.config.ts has tailwindcss())
- ESM library build works (`npm run build` produces dist/)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
