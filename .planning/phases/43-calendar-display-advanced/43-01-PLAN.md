---
phase: 43-calendar-display-advanced
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/calendar/src/keyboard-nav.ts
autonomous: true

must_haves:
  truths:
    - "KeyboardNavigationManager supports runtime column count changes via setColumns() method"
    - "Existing 7-column calendar grid keyboard navigation continues to work unchanged"
  artifacts:
    - path: "packages/calendar/src/keyboard-nav.ts"
      provides: "Keyboard navigation with dynamic column support"
      contains: "setColumns"
      exports: ["KeyboardNavigationManager", "NavigationDirection"]
  key_links:
    - from: "packages/calendar/src/calendar.ts"
      to: "packages/calendar/src/keyboard-nav.ts"
      via: "import KeyboardNavigationManager"
      pattern: "import.*KeyboardNavigationManager.*keyboard-nav"
---

<objective>
Add a `setColumns()` method to KeyboardNavigationManager for runtime column count switching between month view (7 columns) and decade/century views (4 columns).

Purpose: Decade and century views use 4x3 grids instead of 7-column grids. The existing constructor accepts columns but there's no way to change columns at runtime when switching views without creating a new instance.
Output: Updated keyboard-nav.ts with setColumns() method.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/43-calendar-display-advanced/43-RESEARCH.md

Reference patterns from:
@packages/calendar/src/keyboard-nav.ts (existing keyboard navigation)
@packages/calendar/src/calendar.ts (consumer of KeyboardNavigationManager)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add setColumns() method and getColumns() getter to KeyboardNavigationManager</name>
  <files>packages/calendar/src/keyboard-nav.ts</files>
  <action>
    Add two new public methods to the KeyboardNavigationManager class:

    1. `setColumns(columns: number): void` — Updates the internal `this.columns` value. This allows the calendar to switch between 7-column (month grid) and 4-column (decade/century grid) layouts at runtime without recreating the manager instance. No need to update tabindexes since cells will be re-set after a view switch.

    2. `getColumns(): number` — Returns the current column count. Useful for the calendar component to check current grid mode.

    Place both methods after the existing `getFocusedIndex()` method and before `moveFocus()`. Keep all existing behavior unchanged — the constructor still defaults to 7 columns, and all existing navigation logic uses `this.columns` which these methods update.

    Do NOT modify any other methods or change any existing behavior. This is a purely additive change.
  </action>
  <verify>
    - `grep "setColumns" packages/calendar/src/keyboard-nav.ts` shows the new method
    - `grep "getColumns" packages/calendar/src/keyboard-nav.ts` shows the getter
    - `pnpm --filter @lit-ui/calendar build` succeeds without errors
  </verify>
  <done>KeyboardNavigationManager has setColumns() and getColumns() methods, existing functionality preserved, package builds cleanly</done>
</task>

</tasks>

<verification>
- `pnpm --filter @lit-ui/calendar build` completes without errors
- KeyboardNavigationManager has constructor(columns=7), setColumns(), getColumns(), setCells(), setFocusedIndex(), getFocusedIndex(), moveFocus(), focusCurrent()
- No changes to existing method signatures or behavior
</verification>

<success_criteria>
1. setColumns() method exists and updates internal column count
2. getColumns() method exists and returns current column count
3. Package builds without errors
4. All existing keyboard navigation behavior is preserved
</success_criteria>

<output>
After completion, create `.planning/phases/43-calendar-display-advanced/43-01-SUMMARY.md`
</output>
