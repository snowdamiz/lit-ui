---
phase: 20-documentation
plan: 03
type: execute
wave: 2
depends_on: ["20-01"]
files_modified:
  - apps/docs/src/pages/MigrationGuide.tsx
  - apps/docs/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User finds migration command: npx lit-ui migrate"
    - "User understands import changes after migration"
    - "User knows modified files require confirmation"
    - "User can decide whether to migrate based on trade-offs"
  artifacts:
    - path: "apps/docs/src/pages/MigrationGuide.tsx"
      provides: "Migration guide from copy-source to npm"
      min_lines: 100
  key_links:
    - from: "apps/docs/src/App.tsx"
      to: "MigrationGuide component"
      via: "Route element"
      pattern: "path=\"guides/migration\".*MigrationGuide"
---

<objective>
Create migration guide documentation for converting copy-source projects to npm mode.

Purpose: Fulfill DOC-03 (Migration guide from copy-source to npm mode) by creating a focused guide that walks developers through the CLI migrate command, explaining what happens and how to update imports.

Output: MigrationGuide.tsx page, updated App.tsx routing to replace Placeholder.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/20-documentation/20-CONTEXT.md
@.planning/phases/20-documentation/20-RESEARCH.md
@.planning/phases/20-documentation/20-01-SUMMARY.md
@apps/docs/src/pages/GettingStarted.tsx
@apps/docs/src/components/CodeBlock.tsx
@apps/docs/src/components/PrevNextNav.tsx
@packages/cli/src/commands/migrate.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Migration Guide page</name>
  <files>apps/docs/src/pages/MigrationGuide.tsx</files>
  <action>
Create MigrationGuide.tsx following the pattern from GettingStarted.tsx (header with title/description, numbered sections with icons, PrevNextNav at bottom).

Page structure:
1. **Header**: "Migration Guide" title, description: "Convert your copy-source project to use npm packages"

2. **Section 1: When to Migrate**
   - Brief bullet list of reasons to migrate:
     - Want automatic updates via npm
     - Don't need to customize component internals
     - Prefer smaller bundle from tree-shaking
   - Brief note: "Keep copy-source if you've customized components or want full ownership"

3. **Section 2: Run the Migration**
   - Single command:
```typescript
const migrateCommand = `npx lit-ui migrate`;
```
   - What happens:
     - Finds copied components in your project
     - Checks for modifications (shows diff if changed)
     - Installs npm packages (@lit-ui/button, etc.)
     - Deletes source files
     - Updates config to npm mode

4. **Section 3: Update Your Imports**
   - Code example showing before/after:
```typescript
const importChange = `// Before (copy-source)
import './components/ui/button';

// After (npm)
import '@lit-ui/button';`;
```
   - Note: "The CLI shows you which imports to update after migration"

5. **Section 4: Modified Files**
   - Explanation: "If you've customized a component, the CLI shows the diff"
   - What to do:
     - Review the changes you made
     - Choose to migrate (loses changes) or skip (keeps source)
     - If skipped: you can keep that component as copy-source while others use npm

6. **PrevNextNav**: prev=SSR Setup, next=Button (first component)

Use existing CodeBlock component. Follow exact Tailwind classes from GettingStarted.tsx. Keep content focused on the CLI workflow.
  </action>
  <verify>File exists at apps/docs/src/pages/MigrationGuide.tsx and has no TypeScript errors</verify>
  <done>MigrationGuide.tsx page renders with migration workflow and import update examples</done>
</task>

<task type="auto">
  <name>Task 2: Update routing for Migration Guide</name>
  <files>apps/docs/src/App.tsx</files>
  <action>
Update App.tsx to use MigrationGuide component instead of Placeholder:

1. Import MigrationGuide: `import { MigrationGuide } from './pages/MigrationGuide'`
2. Replace the migration route from Placeholder to MigrationGuide:
   - Change: `<Route path="guides/migration" element={<Placeholder />} />`
   - To: `<Route path="guides/migration" element={<MigrationGuide />} />`

Note: Plan 20-01 already added the navigation entry in nav.ts and the placeholder route. This task just swaps in the real component.
  </action>
  <verify>Run `pnpm --filter docs build` - no errors, navigate to /guides/migration shows MigrationGuide content</verify>
  <done>Route /guides/migration renders MigrationGuide component with migration workflow</done>
</task>

</tasks>

<verification>
1. `pnpm --filter docs dev` - docs site runs without errors
2. Navigate to /guides/migration - page renders with all four sections
3. Code blocks render correctly with syntax highlighting
4. Import before/after example is clear
5. Modified files section explains the diff flow
6. Prev/Next navigation works (SSR <- Migration -> Button)
</verification>

<success_criteria>
- MigrationGuide page exists with when/how/imports/modified sections
- App.tsx routes /guides/migration to MigrationGuide component
- Content is CLI-focused (npx lit-ui migrate workflow)
- Import change example shows before (local) and after (npm)
- No TypeScript errors, docs build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/20-documentation/20-03-SUMMARY.md`
</output>
