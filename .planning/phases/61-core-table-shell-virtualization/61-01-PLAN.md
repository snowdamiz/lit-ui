---
phase: 61-core-table-shell-virtualization
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/data-table/package.json
  - packages/data-table/vite.config.ts
  - packages/data-table/tsconfig.json
  - packages/data-table/src/index.ts
  - packages/data-table/src/types.ts
  - packages/data-table/src/jsx.d.ts
  - packages/data-table/src/vite-env.d.ts
  - pnpm-workspace.yaml
autonomous: true

must_haves:
  truths:
    - "Developer can import column definition types from @lit-ui/data-table"
    - "Developer can import row data generic type from @lit-ui/data-table"
    - "Package builds without errors via pnpm build"
  artifacts:
    - path: "packages/data-table/package.json"
      provides: "Package configuration with TanStack dependencies"
      contains: "@tanstack/lit-table"
    - path: "packages/data-table/src/types.ts"
      provides: "Column definitions, row data types, table state types"
      exports: ["ColumnDef", "DataTableState"]
    - path: "packages/data-table/src/index.ts"
      provides: "Public exports"
      exports: ["DataTable"]
  key_links:
    - from: "packages/data-table/package.json"
      to: "@tanstack/lit-table"
      via: "peerDependencies"
      pattern: "@tanstack/lit-table"
---

<objective>
Create the @lit-ui/data-table package with foundational types and build configuration.

Purpose: Establish package structure with TypeScript types for column definitions and row data that will be used throughout the data table implementation. This follows the established pattern from other @lit-ui packages.

Output:
- New `packages/data-table/` directory with standard package structure
- Type definitions for ColumnDef, DataTableState, and related interfaces
- Build configuration matching existing packages
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/61-core-table-shell-virtualization/61-RESEARCH.md
@packages/tabs/package.json
@packages/tabs/vite.config.ts
@packages/tabs/src/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package structure and configuration</name>
  <files>
    packages/data-table/package.json
    packages/data-table/vite.config.ts
    packages/data-table/tsconfig.json
    packages/data-table/src/vite-env.d.ts
    pnpm-workspace.yaml
  </files>
  <action>
Create the data-table package following the established pattern from tabs/accordion packages:

1. **package.json**: Create with:
   - name: "@lit-ui/data-table"
   - peerDependencies: lit ^3.0.0, @lit-ui/core ^1.0.0
   - dependencies: @tanstack/lit-table, @tanstack/lit-virtual (these are runtime deps, not peer)
   - devDependencies: Same as tabs package (workspace refs for config packages)
   - exports: Standard ESM-only pattern

2. **vite.config.ts**: Copy from tabs package (standard library build config)

3. **tsconfig.json**: Copy from tabs package (extends workspace config)

4. **src/vite-env.d.ts**: Standard Vite env reference

5. **pnpm-workspace.yaml**: Verify packages/data-table is included (should already be covered by packages/* glob)

Run `pnpm install` after creating package.json to link dependencies.
  </action>
  <verify>
    pnpm install completes without errors
    pnpm --filter @lit-ui/data-table build runs (may fail due to missing source, that's OK)
  </verify>
  <done>
    Package structure exists with correct dependencies
    pnpm workspace recognizes @lit-ui/data-table
  </done>
</task>

<task type="auto">
  <name>Task 2: Create type definitions and exports</name>
  <files>
    packages/data-table/src/types.ts
    packages/data-table/src/index.ts
    packages/data-table/src/jsx.d.ts
  </files>
  <action>
Create type definitions following TanStack Table patterns from research:

1. **types.ts**: Define core types:
   ```typescript
   import type { ColumnDef as TanStackColumnDef, RowData } from '@tanstack/lit-table';

   // Re-export TanStack types for convenience
   export type { RowData };

   // Column definition with LitUI extensions
   export interface ColumnDef<TData extends RowData, TValue = unknown>
     extends TanStackColumnDef<TData, TValue> {
     // Future extensions: editable, filterable, sortable flags will go here
   }

   // Table state for controlled mode
   export interface DataTableState {
     // Future: sorting, filtering, pagination state
   }

   // Loading state types
   export type LoadingState = 'idle' | 'loading' | 'updating';

   // Empty state types
   export type EmptyStateType = 'no-data' | 'no-matches';
   ```

2. **index.ts**: Export types and placeholder DataTable class:
   ```typescript
   export * from './types.js';
   // DataTable component will be added in Plan 02
   ```

3. **jsx.d.ts**: JSX declarations for lui-data-table element (placeholder, component added later):
   ```typescript
   import type { DataTable } from './data-table.js';

   declare global {
     namespace JSX {
       interface IntrinsicElements {
         'lui-data-table': React.DetailedHTMLProps<
           React.HTMLAttributes<DataTable> & {
             // Properties will be added as component develops
           },
           DataTable
         >;
       }
     }
   }
   ```

Note: jsx.d.ts will reference data-table.js which doesn't exist yet - that's fine, TypeScript will resolve it when the file is created in Plan 02.
  </action>
  <verify>
    pnpm --filter @lit-ui/data-table build completes successfully
    Check dist/types.d.ts exports ColumnDef and DataTableState
  </verify>
  <done>
    Types are exported and available for import
    Package builds successfully
  </done>
</task>

</tasks>

<verification>
1. `pnpm --filter @lit-ui/data-table build` succeeds
2. `ls packages/data-table/dist/` shows compiled output
3. Types are importable: check dist/index.d.ts contains expected exports
</verification>

<success_criteria>
- Package @lit-ui/data-table exists in workspace
- TanStack dependencies installed (@tanstack/lit-table, @tanstack/lit-virtual)
- TypeScript types compile and export correctly
- Build produces dist/ with JS and .d.ts files
</success_criteria>

<output>
After completion, create `.planning/phases/61-core-table-shell-virtualization/61-01-SUMMARY.md`
</output>
