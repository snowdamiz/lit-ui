---
phase: 81-time-picker
plan: 03
type: execute
wave: 3
depends_on:
  - 81-01
  - 81-02
files_modified:
  - skill/skills/time-picker/SKILL.md
autonomous: true
requirements:
  - TMP-03

must_haves:
  truths:
    - "SKILL.md CSS Custom Properties table lists exactly the 67 --ui-time-picker-* tokens from tailwind.css :root with correct defaults"
    - "No stale token names (--ui-time-picker-border-focus, --ui-time-picker-radius, --ui-time-picker-primary, --ui-time-picker-bg-disabled, --ui-time-picker-border-width, --ui-time-picker-tab-bg-hover) remain in the skill file"
    - "Behavior Notes section exists covering popup/interface modes, keyboard nav, form integration, dark mode, and clock/scroll-wheel/dropdown variants"
    - "Events table is accurate (change event with correct detail shape from source)"
  artifacts:
    - path: "skill/skills/time-picker/SKILL.md"
      provides: "Time Picker skill with 67 CSS tokens, 1 verified event, and Behavior Notes"
      contains: "ui-time-picker-bg"
  key_links:
    - from: "skill/skills/time-picker/SKILL.md CSS Custom Properties"
      to: "packages/core/src/styles/tailwind.css :root"
      via: "token names and defaults matching tailwind.css :root exactly"
      pattern: "ui-time-picker-bg.*color-background"
---

<objective>
Rewrite skill/skills/time-picker/SKILL.md to replace the stale 20-entry CSS token table with the 67 actual --ui-time-picker-* tokens from tailwind.css :root, and add a Behavior Notes section.

Purpose: The current SKILL.md misleads Claude with nonexistent token names (--ui-time-picker-primary, --ui-time-picker-radius, --ui-time-picker-tab-bg-hover, etc.) and is missing 47 tokens that control clock face, scroll wheel, range slider, voice input, and timezone display. This is the agent-facing document — accuracy directly affects implementation quality.

Output: SKILL.md with 67 accurate CSS tokens, verified Events table, and a Behavior Notes section matching the pattern established in Phases 70-03 through 80-03.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/81-time-picker/81-02-SUMMARY.md

The established pattern (Phases 70-03 through 80-03): Expand SKILL.md CSS token table to match tailwind.css :root exactly; use double-fallback var() form for color tokens; use exact literal values for structural tokens (z-index, popup-shadow, oklch colors); add Behavior Notes section with 10-12 entries covering interface modes, popup behavior, keyboard nav, dark mode, form integration.

**Current SKILL.md state:** 20 stale entries with nonexistent/wrong token names — --ui-time-picker-border-focus, --ui-time-picker-radius, --ui-time-picker-primary, --ui-time-picker-tab-bg-hover, --ui-time-picker-bg-disabled, --ui-time-picker-border-disabled, --ui-time-picker-border-width. Missing 47 tokens for clock face, dropdown, spinbutton, period, voice, range slider, scroll wheel, timezone.

**Correct 67 tokens from tailwind.css :root (lines 947-1027):**

Core / Input Display:
1.  --ui-time-picker-bg: var(--color-background, white)
2.  --ui-time-picker-text: var(--color-foreground, var(--ui-color-foreground))
3.  --ui-time-picker-border: var(--color-border, var(--ui-color-border))
4.  --ui-time-picker-placeholder: var(--color-muted-foreground, var(--ui-color-muted-foreground))
5.  --ui-time-picker-label-text: var(--color-foreground, var(--ui-color-foreground))
6.  --ui-time-picker-error: var(--color-destructive, var(--ui-color-destructive))
7.  --ui-time-picker-ring: var(--color-ring, var(--ui-color-ring))
8.  --ui-time-picker-popup-bg: var(--color-card, var(--ui-color-card))
9.  --ui-time-picker-popup-border: var(--color-border, var(--ui-color-border))
10. --ui-time-picker-popup-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08)
11. --ui-time-picker-hover-bg: var(--color-muted, var(--ui-color-muted))
12. --ui-time-picker-disabled-bg: var(--color-muted, var(--ui-color-muted))
13. --ui-time-picker-disabled-border: var(--color-border, var(--ui-color-border))
14. --ui-time-picker-tab-bg: var(--color-background, white)
15. --ui-time-picker-tab-text: var(--color-foreground, var(--ui-color-foreground))
16. --ui-time-picker-tab-border: var(--color-border, var(--ui-color-border))
17. --ui-time-picker-tab-hover-bg: var(--color-muted, var(--ui-color-muted))
18. --ui-time-picker-tab-active-bg: var(--color-primary, var(--ui-color-primary))
19. --ui-time-picker-tab-active-text: var(--color-primary-foreground, var(--ui-color-primary-foreground))
20. --ui-time-picker-preset-bg: var(--color-background, white)
21. --ui-time-picker-preset-text: var(--color-foreground, var(--ui-color-foreground))
22. --ui-time-picker-preset-border: var(--color-border, var(--ui-color-border))
23. --ui-time-picker-preset-hover-bg: var(--color-muted, var(--ui-color-muted))
24. --ui-time-picker-preset-hover-border: var(--color-muted-foreground, var(--ui-color-muted-foreground))
25. --ui-time-picker-muted-text: var(--color-muted-foreground, var(--ui-color-muted-foreground))
26. --ui-time-picker-z-index: 40

Time Dropdown:
27. --ui-time-picker-dropdown-bg: var(--color-card, var(--ui-color-card))
28. --ui-time-picker-dropdown-border: var(--color-border, var(--ui-color-border))
29. --ui-time-picker-option-text: var(--color-foreground, var(--ui-color-foreground))
30. --ui-time-picker-option-hover-bg: var(--color-muted, var(--ui-color-muted))
31. --ui-time-picker-option-selected-bg: oklch(0.95 0.03 250)
32. --ui-time-picker-option-selected-text: oklch(0.45 0.15 250)
33. --ui-time-picker-business-accent: oklch(0.60 0.18 150)
34. --ui-time-picker-business-bg: oklch(0.97 0.02 150)
35. --ui-time-picker-business-hover-bg: oklch(0.93 0.04 150)

Time Input (spinbuttons):
36. --ui-time-picker-spinbutton-bg: var(--color-background, white)
37. --ui-time-picker-spinbutton-text: var(--color-foreground, var(--ui-color-foreground))
38. --ui-time-picker-spinbutton-border: var(--color-border, var(--ui-color-border))
39. --ui-time-picker-separator-color: var(--color-muted-foreground, var(--ui-color-muted-foreground))
40. --ui-time-picker-period-bg: var(--color-background, white)
41. --ui-time-picker-period-text: var(--color-foreground, var(--ui-color-foreground))
42. --ui-time-picker-period-border: var(--color-border, var(--ui-color-border))
43. --ui-time-picker-period-hover-bg: var(--color-muted, var(--ui-color-muted))

Clock Face:
44. --ui-time-picker-clock-bg: var(--color-muted, var(--ui-color-muted))
45. --ui-time-picker-clock-border: var(--color-border, var(--ui-color-border))
46. --ui-time-picker-clock-text: var(--color-foreground, var(--ui-color-foreground))
47. --ui-time-picker-clock-selected-bg: var(--color-primary, var(--ui-color-primary))
48. --ui-time-picker-clock-selected-text: var(--color-primary-foreground, var(--ui-color-primary-foreground))
49. --ui-time-picker-clock-hand: var(--color-primary, var(--ui-color-primary))

Voice Input:
50. --ui-time-picker-voice-bg: var(--color-background, white)
51. --ui-time-picker-voice-text: var(--color-foreground, var(--ui-color-foreground))
52. --ui-time-picker-voice-border: var(--color-border, var(--ui-color-border))
53. --ui-time-picker-voice-hover-border: var(--color-primary, var(--ui-color-primary))
54. --ui-time-picker-voice-hover-text: var(--color-primary, var(--ui-color-primary))

Range Slider:
55. --ui-time-picker-range-label: var(--color-foreground, var(--ui-color-foreground))
56. --ui-time-picker-range-muted: var(--color-muted-foreground, var(--ui-color-muted-foreground))
57. --ui-time-picker-range-track: var(--color-border, var(--ui-color-border))
58. --ui-time-picker-range-fill: var(--color-primary, var(--ui-color-primary))
59. --ui-time-picker-range-thumb-bg: var(--color-background, white)
60. --ui-time-picker-range-thumb-border: var(--color-primary, var(--ui-color-primary))

Scroll Wheel:
61. --ui-time-picker-wheel-text: var(--color-foreground, var(--ui-color-foreground))
62. --ui-time-picker-wheel-selected-text: var(--color-primary, var(--ui-color-primary))
63. --ui-time-picker-wheel-highlight-border: var(--color-border, var(--ui-color-border))
64. --ui-time-picker-wheel-highlight-bg: oklch(0.97 0.01 250)
65. --ui-time-picker-wheel-separator: var(--color-muted-foreground, var(--ui-color-muted-foreground))

Timezone Display:
66. --ui-time-picker-timezone-text: var(--color-muted-foreground, var(--ui-color-muted-foreground))
67. --ui-time-picker-timezone-separator: var(--color-border, var(--ui-color-border))

**Events (verify against packages/time-picker/src/time-picker.ts source):**
- The source @fires JSDoc says `change` with detail `{ value: string, timeValue: TimeValue | null }`. Confirm the actual CustomEvent name before writing.

**Note on Behavior Notes content:**
- interface-mode: "clock" | "dropdown" | "both" | "wheel" | "range" — controls which input interface appears in the popup
- Popup positioning via Floating UI (flip + shift + offset)
- Spinbutton inputs are ARIA-compliant spinbuttons for keyboard incrementing
- clock-* tokens control only the clock face (interface-mode="clock" or "both")
- wheel-* tokens control only the scroll wheel (interface-mode="wheel")
- range-* tokens control the time range slider (interface-mode="range")
- voice-* tokens control the voice input area (voice attribute)
- business-* tokens (oklch greens) control business hours highlighted slots in dropdown
- option-selected-* tokens (oklch blues) control the currently selected time slot highlight
- dark mode: all tokens except 6 oklch exceptions (option-selected-bg/text, business-bg/accent/hover-bg, wheel-highlight-bg) cascade automatically
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite SKILL.md with 67 accurate CSS tokens, correct Events, and Behavior Notes</name>
  <files>skill/skills/time-picker/SKILL.md</files>
  <action>
First, read packages/time-picker/src/time-picker.ts to confirm the actual event name dispatched (look for `dispatchCustomEvent(` calls or `new CustomEvent(` calls) and the exact detail shape.

Then rewrite skill/skills/time-picker/SKILL.md preserving the frontmatter, Usage block, and Props table (they are accurate), but replacing:

1. **CSS Custom Properties table**: Replace the 20 stale entries with all 67 --ui-time-picker-* tokens listed in the context above. Use the same markdown table format as the current file. Column order: Property | Default | Description. Group entries logically: Core/Input Display (1-26), Time Dropdown (27-35), Time Input (36-43), Clock Face (44-49), Voice Input (50-54), Range Slider (55-60), Scroll Wheel (61-65), Timezone Display (66-67).

2. **Events table**: Update to use the correct event name (verify from source). Detail column must match the actual dispatched detail shape.

3. **Behavior Notes section**: Add a new `## Behavior Notes` section at the end of the file (after Sub-Components) with 12 bullet entries covering:
   - interface-mode prop controls the active input UI: "clock" (circular clock face), "dropdown" (scrollable time list), "both" (tab between clock and dropdown), "wheel" (scroll wheel columns), "range" (dual-thumb time range slider)
   - Popup positioning via Floating UI (flip + shift + offset); anchored to the input display trigger
   - Spinbutton time input uses ARIA role="spinbutton" — keyboard up/down arrows increment/decrement each field; Tab moves between hour, minute, second, and AM/PM
   - clock-* tokens apply only when interface-mode includes "clock"; wheel-* tokens apply only for "wheel" mode; range-* tokens apply only for "range" mode; voice-* tokens apply when voice attribute is set
   - business-* tokens (oklch green palette) highlight business-hours slots in the dropdown list; use businessHours JS property to set `{start: "HH:mm", end: "HH:mm"}`
   - option-selected-bg and option-selected-text (oklch blue palette) highlight the currently selected time in the dropdown; override with different hue to brand the selection
   - wheel-highlight-bg (oklch near-white) marks the selected time in the scroll wheel; override for dark themes (defaults cascade via semantic .dark except this token)
   - Dark mode: 61 of 67 tokens cascade automatically through semantic .dark (--color-background, --color-foreground, etc.). Six oklch exceptions (option-selected-bg, option-selected-text, business-accent, business-bg, business-hover-bg, wheel-highlight-bg) require explicit .dark override if using custom oklch values
   - Presets: `presets` attribute (boolean) enables default time presets; pass custom TimePreset[] array via JS property for custom quick-select options
   - Voice input: `voice` attribute enables voice input via Web Speech API; progressive enhancement — falls back silently if browser does not support SpeechRecognition
   - Form integration: form-associated element; submits value as ISO 8601 `HH:mm:ss` string via ElementInternals; supports `required`, `min-time`, `max-time` validation
   - Timezone: `show-timezone` attribute shows timezone selector; `timezone` sets default timezone; `additionalTimezones` adds extra timezone options in selector

Commit: `feat(81-03): expand SKILL.md CSS tokens 20→67 with correct --ui-time-picker-* names; add Behavior Notes`
  </action>
  <verify>
    <automated>grep -c "ui-time-picker" /Users/sn0w/Documents/dev/lit-components/skill/skills/time-picker/SKILL.md</automated>
  </verify>
  <done>
grep shows 67+ matches for "ui-time-picker" in SKILL.md. No stale token names (--ui-time-picker-primary, --ui-time-picker-radius, --ui-time-picker-border-focus, --ui-time-picker-border-width, --ui-time-picker-tab-bg-hover) remain. A "## Behavior Notes" section exists at the end of the file with at least 12 bullet entries.
  </done>
</task>

</tasks>

<verification>
1. `grep -c "ui-time-picker" skill/skills/time-picker/SKILL.md` — returns 67+
2. `grep "ui-time-picker-primary\|ui-time-picker-radius\|ui-time-picker-border-focus\|ui-time-picker-border-width\|ui-time-picker-tab-bg-hover\|ui-time-picker-bg-disabled\|ui-time-picker-border-disabled" skill/skills/time-picker/SKILL.md` — returns empty (stale names gone)
3. `grep "Behavior Notes" skill/skills/time-picker/SKILL.md` — returns match
4. `grep "ui-time-picker-clock-selected-bg\|ui-time-picker-wheel-selected-text\|ui-time-picker-range-fill\|ui-time-picker-spinbutton-bg" skill/skills/time-picker/SKILL.md` — returns matches (new tokens present)
</verification>

<success_criteria>
- SKILL.md CSS Custom Properties table has exactly 67 --ui-time-picker-* entries
- All color token defaults use double-fallback var() form matching tailwind.css :root
- popup-shadow, z-index, and oklch literal tokens use exact literal values from :root
- Events table event name matches the actual event dispatched by time-picker.ts (check source)
- Behavior Notes section exists with 12+ entries covering interface modes, dark mode, form integration
- No stale token names remain
</success_criteria>

<output>
After completion, create `.planning/phases/81-time-picker/81-03-SUMMARY.md`
</output>
