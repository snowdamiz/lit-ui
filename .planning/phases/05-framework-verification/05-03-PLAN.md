---
phase: 05-framework-verification
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - examples/svelte/package.json
  - examples/svelte/src/App.svelte
  - examples/svelte/src/main.ts
  - examples/svelte/vite.config.ts
  - examples/svelte/index.html
  - examples/svelte/tsconfig.json
  - examples/svelte/svelte.config.js
autonomous: true

must_haves:
  truths:
    - "Button renders with all variants (primary, secondary, outline, ghost, destructive)"
    - "Button click events fire via onclick handler"
    - "Dialog opens via open prop and closes via Escape key"
    - "Dialog onclose event fires with reason in event.detail"
    - "Slots render content correctly using slot attribute"
    - "No console errors or Svelte warnings appear"
  artifacts:
    - path: "examples/svelte/src/App.svelte"
      provides: "Svelte 5 component usage demonstration"
      min_lines: 50
    - path: "examples/svelte/package.json"
      provides: "Svelte 5 dependencies"
      contains: "svelte"
  key_links:
    - from: "examples/svelte/src/App.svelte"
      to: "src/components/button/button.ts"
      via: "side-effect import"
      pattern: "import.*lit-ui"
---

<objective>
Create a Svelte 5 test application that imports and uses the lit-ui Button and Dialog components, verifying that property binding works, events dispatch correctly, and Svelte 5's runes-based reactivity works with custom elements.

Purpose: Validate Svelte 5 custom element support works with lit-ui components
Output: Fully functional Svelte test app demonstrating all component features
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-framework-verification/05-RESEARCH.md

# Component sources for understanding API
@src/components/button/button.ts
@src/components/dialog/dialog.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Svelte 5 Vite app with lit-ui dependency</name>
  <files>
    examples/svelte/package.json
    examples/svelte/vite.config.ts
    examples/svelte/tsconfig.json
    examples/svelte/index.html
    examples/svelte/src/main.ts
    examples/svelte/svelte.config.js
  </files>
  <action>
    Create Svelte 5 test app in examples/svelte:

    1. Run: `npm create vite@latest examples/svelte -- --template svelte-ts`
    2. In examples/svelte, run: `npm install`
    3. Add lit-ui dependency via file reference: `"lit-ui": "file:../.."`

    Create vite.config.ts with Svelte plugin (no special custom element config needed).

    Create svelte.config.js with standard Vite adapter settings.

    Create standard main.ts mounting App component to #app.

    Create index.html with div#app and script type="module" pointing to main.ts.

    tsconfig.json should use Svelte TS defaults.

    Note: Svelte 5 uses runes ($state, $derived, $effect) instead of let-based reactivity.
    The template should handle custom elements natively.
  </action>
  <verify>
    Run `npm run dev` in examples/svelte - dev server starts without errors.
  </verify>
  <done>Svelte 5 Vite app created and dev server runs</done>
</task>

<task type="auto">
  <name>Task 2: Create App.svelte with full component demo using Svelte 5 runes</name>
  <files>
    examples/svelte/src/App.svelte
  </files>
  <action>
    Create App.svelte demonstrating ALL component features using Svelte 5 syntax:

    ```svelte
    <script lang="ts">
      import 'lit-ui';

      let dialogOpen = $state(false);
      let loading = $state(false);

      function handleButtonClick() {
        console.log('Button clicked');
        dialogOpen = true;
      }

      function handleDialogClose(e: CustomEvent<{ reason: string }>) {
        console.log('Dialog closed with reason:', e.detail.reason);
        dialogOpen = false;
      }

      function handleSubmit() {
        loading = true;
        setTimeout(() => loading = false, 2000);
      }
    </script>
    ```

    Key Svelte 5 patterns:
    - Use $state() runes for reactive state (NOT let)
    - Use prop={value} for property binding (e.g., open={dialogOpen}, loading={loading})
    - Use oneventname for events (lowercase, e.g., onclick, onclose)
    - Use slot="name" attribute for named slots
    - CustomEvent.detail accessed in handler

    Template should include:
    - All 5 button variants (primary, secondary, outline, ghost, destructive)
    - All 3 button sizes (sm, md, lg)
    - Disabled button
    - Loading button with loading bound to $state
    - Button with icon slots (icon-start, icon-end)
    - Dialog with open bound to dialogOpen state
    - Dialog onclose handler
    - Dialog slots: title, default content, footer
    - Form with submit button for form participation test

    Include console.log calls to verify events fire.
  </action>
  <verify>
    - TypeScript compiles without errors: `npm run build`
    - App renders in browser with all variants visible
    - Clicking buttons logs to console
    - Opening/closing dialog works
    - Dialog close event contains reason
    - No console errors or Svelte warnings
  </verify>
  <done>Svelte 5 app demonstrates all Button and Dialog features with runes-based reactivity</done>
</task>

</tasks>

<verification>
Full verification checklist:
1. `cd examples/svelte && npm run dev` - starts without errors
2. Open http://localhost:5173 in browser
3. All 5 button variants render with correct styling
4. All 3 button sizes render correctly
5. Disabled button shows disabled state
6. Click loading button - shows spinner, reverts after 2s
7. Click "Open Dialog" - dialog appears with animation
8. Press Escape - dialog closes, console shows close reason
9. Click backdrop - dialog closes with backdrop reason
10. Form submit button triggers form submission
11. No console errors or Svelte warnings
</verification>

<success_criteria>
- Svelte 5 test app runs without errors
- Svelte 5 runes ($state) work with custom element property binding
- All button variants/sizes/states render correctly
- Button onclick events fire and log to console
- Dialog open property binding works with $state
- Dialog onclose event contains reason in detail
- Slots render content using slot attribute
- Form participation works
- Zero console errors or warnings
</success_criteria>

<output>
After completion, create `.planning/phases/05-framework-verification/05-03-SUMMARY.md`
</output>
