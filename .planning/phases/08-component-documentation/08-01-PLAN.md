---
phase: 08-component-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/src/contexts/FrameworkContext.tsx
  - docs/src/components/FrameworkTabs.tsx
  - docs/src/components/ExampleBlock.tsx
autonomous: true

must_haves:
  truths:
    - "Framework tab selection persists across all examples on a page"
    - "HTML tab available in addition to React, Vue, Svelte"
    - "ExampleBlock shows live preview next to framework-tabbed code"
  artifacts:
    - path: "docs/src/contexts/FrameworkContext.tsx"
      provides: "Framework state management context"
      exports: ["FrameworkProvider", "useFramework"]
    - path: "docs/src/components/FrameworkTabs.tsx"
      provides: "Updated framework tabs with HTML support and context"
      contains: "useFramework"
    - path: "docs/src/components/ExampleBlock.tsx"
      provides: "Combined preview and code tabs component"
      exports: ["ExampleBlock"]
  key_links:
    - from: "docs/src/components/ExampleBlock.tsx"
      to: "docs/src/components/FrameworkTabs.tsx"
      via: "import FrameworkTabs"
      pattern: "import.*FrameworkTabs"
    - from: "docs/src/components/FrameworkTabs.tsx"
      to: "docs/src/contexts/FrameworkContext.tsx"
      via: "useFramework hook"
      pattern: "useFramework"
---

<objective>
Create shared infrastructure for component documentation: FrameworkContext for tab persistence, updated FrameworkTabs with HTML support, and ExampleBlock that combines live preview with framework-tabbed code.

Purpose: Enable consistent documentation pattern where users select their framework once and see relevant code throughout all examples on a page.
Output: Three interconnected components that form the foundation for all component documentation pages.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-component-documentation/08-RESEARCH.md

# Existing components to extend
@docs/src/components/FrameworkTabs.tsx
@docs/src/components/CodeBlock.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FrameworkContext for tab persistence</name>
  <files>docs/src/contexts/FrameworkContext.tsx</files>
  <action>
Create a new React Context for managing framework tab selection across a page.

1. Create `docs/src/contexts/` directory
2. Create FrameworkContext.tsx with:
   - Type: `Framework = 'html' | 'react' | 'vue' | 'svelte'`
   - Interface: `FrameworkContextValue { framework: Framework; setFramework: (fw: Framework) => void }`
   - Create context with undefined default
   - FrameworkProvider component with useState, default to 'html'
   - useFramework hook that throws if used outside provider
   - Export FrameworkProvider and useFramework

Pattern from research:
```tsx
import { createContext, useContext, useState, ReactNode } from 'react';

type Framework = 'html' | 'react' | 'vue' | 'svelte';

interface FrameworkContextValue {
  framework: Framework;
  setFramework: (fw: Framework) => void;
}

const FrameworkContext = createContext<FrameworkContextValue | undefined>(undefined);

export function FrameworkProvider({ children }: { children: ReactNode }) {
  const [framework, setFramework] = useState<Framework>('html');
  return (
    <FrameworkContext.Provider value={{ framework, setFramework }}>
      {children}
    </FrameworkContext.Provider>
  );
}

export function useFramework() {
  const context = useContext(FrameworkContext);
  if (!context) {
    throw new Error('useFramework must be used within FrameworkProvider');
  }
  return context;
}
```
  </action>
  <verify>File exists at docs/src/contexts/FrameworkContext.tsx with exports for FrameworkProvider and useFramework</verify>
  <done>FrameworkContext provides state management for framework tab selection with proper TypeScript types</done>
</task>

<task type="auto">
  <name>Task 2: Update FrameworkTabs with HTML support and context integration</name>
  <files>docs/src/components/FrameworkTabs.tsx</files>
  <action>
Update the existing FrameworkTabs component to:
1. Add HTML as the first tab option (html | react | vue | svelte)
2. Use useFramework() hook from context instead of local useState
3. Maintain backward compatibility by catching context errors and falling back to local state
4. Add HTML to language map (html: 'html')
5. Add HTML to framework labels (html: 'HTML')
6. Update tabs array to include 'html' first

Key changes:
- Import useFramework from '../contexts/FrameworkContext'
- Try/catch around useFramework() - if error, use local useState (backward compat for Getting Started page)
- Add html prop to FrameworkTabsProps interface (optional for backward compatibility with empty string default)
- Tab order: HTML, React, Vue, Svelte

IMPORTANT: Make html prop optional with empty string default to avoid breaking Getting Started page that doesn't pass html prop.

```tsx
interface FrameworkTabsProps {
  html?: string;  // Optional for backward compatibility
  react: string;
  vue: string;
  svelte: string;
}

// Inside component, try to use context, fall back to local state
let framework: Framework;
let setFramework: (fw: Framework) => void;

try {
  const ctx = useFramework();
  framework = ctx.framework;
  setFramework = ctx.setFramework;
} catch {
  // Fallback for pages without FrameworkProvider (backward compat)
  const [local, setLocal] = useState<Framework>('react');
  framework = local;
  setFramework = setLocal;
}
```
  </action>
  <verify>TypeScript compiles without errors. Verify backward compatibility: npm run dev in docs folder, Getting Started page still works (tabs switch between react/vue/svelte)</verify>
  <done>FrameworkTabs now supports HTML tab and uses context for persistence when available, with backward compatibility for pages without FrameworkProvider</done>
</task>

<task type="auto">
  <name>Task 3: Create ExampleBlock component</name>
  <files>docs/src/components/ExampleBlock.tsx</files>
  <action>
Create a reusable ExampleBlock component that combines a live demo preview with framework-tabbed code.

Component structure:
- Props: title?, description?, preview (ReactNode), html, react, vue, svelte
- Layout: Side by side on desktop (lg:flex-row), stacked on mobile (flex-col)
- Left side: Live preview container (bg-gray-50, rounded, bordered, centered content, min-h-[120px])
- Right side: FrameworkTabs with code for each framework

```tsx
import { ReactNode } from 'react';
import { FrameworkTabs } from './FrameworkTabs';

interface ExampleBlockProps {
  title?: string;
  description?: string;
  preview: ReactNode;
  html: string;
  react: string;
  vue: string;
  svelte: string;
}

export function ExampleBlock({
  title,
  description,
  preview,
  html,
  react,
  vue,
  svelte,
}: ExampleBlockProps) {
  return (
    <div className="my-8">
      {title && <h3 className="text-lg font-semibold mb-2">{title}</h3>}
      {description && <p className="text-gray-600 mb-4">{description}</p>}

      <div className="flex flex-col lg:flex-row gap-4">
        {/* Live preview */}
        <div className="flex-1 p-6 bg-gray-50 rounded-lg border border-gray-200 flex items-center justify-center min-h-[120px]">
          {preview}
        </div>

        {/* Code tabs */}
        <div className="flex-1">
          <FrameworkTabs html={html} react={react} vue={vue} svelte={svelte} />
        </div>
      </div>
    </div>
  );
}
```
  </action>
  <verify>TypeScript compiles without errors. Component renders correctly with preview on left and tabs on right at desktop widths</verify>
  <done>ExampleBlock provides consistent layout for all documentation examples with live preview and framework-tabbed code</done>
</task>

</tasks>

<verification>
1. `cd docs && npm run build` - TypeScript compiles without errors
2. `cd docs && npm run dev` - Dev server starts
3. Visit Getting Started page - existing FrameworkTabs still work (backward compatibility)
4. All three files exist: FrameworkContext.tsx, updated FrameworkTabs.tsx, ExampleBlock.tsx
</verification>

<success_criteria>
- FrameworkContext exports FrameworkProvider and useFramework
- FrameworkTabs has HTML as first tab option and uses context when available
- ExampleBlock renders preview and code side-by-side on desktop
- Getting Started page still functions correctly (no regression)
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-component-documentation/08-01-SUMMARY.md`
</output>
