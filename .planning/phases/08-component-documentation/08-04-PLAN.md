---
phase: 08-component-documentation
plan: 04
type: execute
wave: 2
depends_on: [08-01, 08-02, 08-03]
files_modified:
  - docs/src/pages/components/DialogPage.tsx
  - docs/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "User can view Dialog documentation at /components/dialog"
    - "Dialog documentation shows live examples for basic and confirmation dialogs"
    - "Dialog API reference documents all props, slots, and events"
    - "User can navigate from Button to Dialog via next link"
  artifacts:
    - path: "docs/src/pages/components/DialogPage.tsx"
      provides: "Complete Dialog documentation page"
      exports: ["DialogPage"]
    - path: "docs/src/App.tsx"
      provides: "Route for /components/dialog"
      contains: "DialogPage"
  key_links:
    - from: "docs/src/pages/components/DialogPage.tsx"
      to: "docs/src/lib/ui-dialog/index.ts"
      via: "side-effect import"
      pattern: "import.*ui-dialog"
    - from: "docs/src/pages/components/DialogPage.tsx"
      to: "docs/src/contexts/FrameworkContext.tsx"
      via: "FrameworkProvider wrapper"
      pattern: "FrameworkProvider"
    - from: "docs/src/App.tsx"
      to: "docs/src/pages/components/DialogPage.tsx"
      via: "Route element"
      pattern: "DialogPage"
---

<objective>
Create the Dialog documentation page with live examples, API reference, and update routing. Complete Phase 8 component documentation.

Purpose: Users can learn Dialog component usage through interactive examples and comprehensive API reference.
Output: Complete Dialog documentation page at /components/dialog with basic and confirmation dialog examples, full API reference.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-component-documentation/08-RESEARCH.md
@.planning/phases/08-component-documentation/08-01-SUMMARY.md
@.planning/phases/08-component-documentation/08-02-SUMMARY.md
@.planning/phases/08-component-documentation/08-03-SUMMARY.md

# Source component for accurate API docs
@src/components/dialog/dialog.ts

# Reference for page structure
@docs/src/pages/components/ButtonPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DialogPage documentation</name>
  <files>docs/src/pages/components/DialogPage.tsx</files>
  <action>
Create the Dialog documentation page following ButtonPage structure.

1. Add JSX type declaration for ui-dialog (similar to ui-button in LivePreview.tsx):
```tsx
declare global {
  namespace JSX {
    interface IntrinsicElements {
      'ui-dialog': React.DetailedHTMLProps<
        React.HTMLAttributes<HTMLElement> & {
          open?: boolean;
          size?: 'sm' | 'md' | 'lg';
          dismissible?: boolean;
          'show-close-button'?: boolean;
        },
        HTMLElement
      >;
    }
  }
}
```

2. Side-effect import for dialog registration:
```tsx
import '../lib/ui-dialog';
```

3. Page structure:
   - Wrap in FrameworkProvider
   - Header: "Dialog" title, description about accessible modal
   - Examples section:
     a) Basic Dialog - with open/close button, title, content, close button
     b) Confirmation Dialog - Cancel and Confirm buttons in footer
   - API Reference:
     - Props table
     - Slots table
     - Events table (Dialog has close event)
   - PrevNextNav (prev: Button, next: React guide or leave next undefined)

4. Dialog props data (from source):
```tsx
const dialogProps: PropDef[] = [
  { name: 'open', type: 'boolean', default: 'false', description: 'Whether the dialog is visible. Uses showModal() for focus trapping.' },
  { name: 'size', type: '"sm" | "md" | "lg"', default: '"md"', description: 'The max-width of the dialog (24rem, 28rem, or 32rem).' },
  { name: 'dismissible', type: 'boolean', default: 'true', description: 'Whether the dialog can be closed via Escape or backdrop click.' },
  { name: 'show-close-button', type: 'boolean', default: 'false', description: 'Shows an X button in the top-right corner.' },
];

const dialogSlots: SlotDef[] = [
  { name: 'title', description: 'Dialog title/header content.' },
  { name: '(default)', description: 'Dialog body content.' },
  { name: 'footer', description: 'Dialog footer, typically action buttons.' },
];

const dialogEvents: EventDef[] = [
  { name: 'close', detail: '{ reason: "escape" | "backdrop" | "programmatic" }', description: 'Fired when the dialog closes. Detail includes the close reason.' },
];
```

5. For live demos, use React state to control dialog open/close:
```tsx
function BasicDialogDemo() {
  const [open, setOpen] = useState(false);

  // Use ref to add event listener for close
  const dialogRef = useRef<HTMLElement>(null);

  useEffect(() => {
    const el = dialogRef.current;
    if (el) {
      const handleClose = () => setOpen(false);
      el.addEventListener('close', handleClose);
      return () => el.removeEventListener('close', handleClose);
    }
  }, []);

  return (
    <div>
      <ui-button onClick={() => setOpen(true)}>Open Dialog</ui-button>
      <ui-dialog ref={dialogRef} open={open} show-close-button>
        <span slot="title">Dialog Title</span>
        <p>This is the dialog content.</p>
      </ui-dialog>
    </div>
  );
}
```

6. Code examples for frameworks:
```tsx
const basicDialogCode = {
  html: `<ui-dialog open show-close-button>
  <span slot="title">Dialog Title</span>
  <p>This is the dialog content.</p>
</ui-dialog>`,
  react: `<ui-dialog open show-close-button>
  <span slot="title">Dialog Title</span>
  <p>This is the dialog content.</p>
</ui-dialog>`,
  vue: `<ui-dialog :open="isOpen" show-close-button @close="isOpen = false">
  <span slot="title">Dialog Title</span>
  <p>This is the dialog content.</p>
</ui-dialog>`,
  svelte: `<ui-dialog open={isOpen} show-close-button on:close={() => isOpen = false}>
  <span slot="title">Dialog Title</span>
  <p>This is the dialog content.</p>
</ui-dialog>`,
};
```

Note: For Vue and Svelte, show proper reactive binding syntax even though the preview uses actual web component.
  </action>
  <verify>TypeScript compiles. Dialog examples open and close correctly</verify>
  <done>Dialog documentation page complete with interactive examples and full API reference</done>
</task>

<task type="auto">
  <name>Task 2: Update routing for Dialog page</name>
  <files>docs/src/App.tsx</files>
  <action>
Update App.tsx to use the new DialogPage instead of Placeholder.

1. Import DialogPage:
```tsx
import { DialogPage } from './pages/components/DialogPage'
```

2. Replace the Dialog route:
```tsx
{/* Before */}
<Route path="components/dialog" element={<Placeholder />} />

{/* After */}
<Route path="components/dialog" element={<DialogPage />} />
```

Final App.tsx should have:
- GettingStarted at / and /getting-started
- ButtonPage at /components/button
- DialogPage at /components/dialog
- Placeholder for all guide routes (react, vue, svelte, theming, accessibility)
  </action>
  <verify>`cd docs && npm run dev` - Navigate to /components/dialog shows the Dialog documentation page</verify>
  <done>Dialog documentation accessible at /components/dialog with proper routing</done>
</task>

<task type="auto">
  <name>Task 3: Final verification and cleanup</name>
  <files>docs/src/pages/components/ButtonPage.tsx, docs/src/pages/components/DialogPage.tsx</files>
  <action>
Verify all navigation flows work correctly and perform any needed cleanup.

1. Verify navigation flow:
   - Getting Started -> (next) -> Button
   - Button -> (prev) Getting Started, (next) Dialog
   - Dialog -> (prev) Button

2. Check that PrevNextNav in ButtonPage points to:
   - prev: { title: 'Getting Started', href: '/getting-started' }
   - next: { title: 'Dialog', href: '/components/dialog' }

3. Check that PrevNextNav in DialogPage points to:
   - prev: { title: 'Button', href: '/components/button' }
   - next: undefined (or first guide: { title: 'React', href: '/guides/react' })

4. Run full build to catch any TypeScript errors:
   - `cd docs && npm run build`

5. Test both documentation pages work correctly in browser.
  </action>
  <verify>Navigation works in all directions. Build succeeds. Both component pages render correctly</verify>
  <done>Phase 8 complete - Button and Dialog documentation fully functional</done>
</task>

</tasks>

<verification>
1. `cd docs && npm run build` - TypeScript compiles without errors
2. `cd docs && npm run dev` - Dev server starts
3. Navigate to /components/dialog - Dialog documentation page renders
4. Basic dialog example opens and closes
5. Confirmation dialog example shows Cancel/Confirm buttons
6. API reference tables show props, slots, and events
7. Navigation flows correctly:
   - /getting-started -> /components/button -> /components/dialog
   - Reverse navigation works
8. Framework tabs persist selection across all examples on each page
</verification>

<success_criteria>
- DialogPage renders at /components/dialog
- Basic dialog example is interactive (opens/closes)
- Confirmation dialog example shows proper button layout
- Props table shows 4 props with correct details
- Slots table shows 3 slots
- Events table shows close event with detail type
- PrevNextNav links work correctly between pages
- Framework tab selection persists within each page
- TypeScript compiles without errors
- No regressions to Getting Started or Button pages
</success_criteria>

<output>
After completion, create `.planning/phases/08-component-documentation/08-04-SUMMARY.md`
</output>
