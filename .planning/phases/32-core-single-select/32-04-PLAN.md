---
phase: 32-core-single-select
plan: 04
type: execute
wave: 3
depends_on: ["32-02", "32-03"]
files_modified:
  - packages/select/src/select.ts
  - packages/select/src/index.ts
autonomous: false

must_haves:
  truths:
    - "User can test all select interactions in dev server"
    - "User confirms component meets requirements"
  artifacts:
    - path: "packages/select/src/select.ts"
      provides: "Complete single select component"
    - path: "packages/select/src/index.ts"
      provides: "All exports for consumers"
---

<objective>
Final integration verification - ensure all requirements are met and component works correctly in a real browser environment.

Purpose: Validate the complete implementation before marking phase complete.
Output: Verified working select component ready for Phase 33 enhancements.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-core-single-select/32-RESEARCH.md
@.planning/phases/32-core-single-select/32-01-SUMMARY.md
@.planning/phases/32-core-single-select/32-02-SUMMARY.md
@.planning/phases/32-core-single-select/32-03-SUMMARY.md
@packages/select/src/select.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean up and finalize component</name>
  <files>packages/select/src/select.ts, packages/select/src/index.ts</files>
  <action>
Final code review and cleanup:

1. **Ensure all imports are used and necessary:**
Remove any unused imports from Phase 31 skeleton.

2. **Verify all exports in index.ts:**
```typescript
export { Select } from './select.js';
export type { SelectSize, SelectOption } from './select.js';
export { TailwindElement, isServer } from '@lit-ui/core';
```

3. **Add JSDoc documentation to public API:**
Ensure all public properties have JSDoc comments for IDE support.

4. **Verify no console.log or debug statements remain**

5. **Build and verify no warnings:**
```bash
pnpm --filter @lit-ui/select build
```
  </action>
  <verify>
Build passes with no warnings
All exports available from @lit-ui/select
No debug statements in production code
  </verify>
  <done>Component code is clean and production-ready</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete single select component with:
- Dropdown opens/closes on click
- Options display in listbox with selection state
- Click to select option
- Full keyboard navigation (Arrow, Enter, Space, Escape, Home, End)
- Type-ahead search
- Form participation via ElementInternals
- Required validation
- Error state display
- Focus ring
- Size variants (sm, md, lg)
- Disabled state
- ARIA 1.2 combobox pattern compliance
  </what-built>
  <how-to-verify>
1. Start dev server: `pnpm --filter @lit-ui/select dev` or add to existing demo
2. Create a test page with the select:
```html
<form id="test-form">
  <lui-select
    label="Country"
    placeholder="Select a country"
    required
    .options=${[
      { value: 'us', label: 'United States' },
      { value: 'uk', label: 'United Kingdom' },
      { value: 'ca', label: 'Canada' },
      { value: 'au', label: 'Australia' },
      { value: 'disabled', label: 'Disabled Option', disabled: true }
    ]}
  ></lui-select>
  <button type="submit">Submit</button>
</form>
```

3. Test interactions:
   - [ ] Click trigger opens dropdown
   - [ ] Click option selects and closes
   - [ ] Click outside closes dropdown
   - [ ] ArrowDown/Up navigates options
   - [ ] Enter/Space selects current option
   - [ ] Escape closes without selecting
   - [ ] Home/End jump to first/last
   - [ ] Type "u" focuses "United States"
   - [ ] Type "uni" focuses "United Kingdom"
   - [ ] Tab on trigger opens and allows navigation
   - [ ] Submit form with no selection shows error
   - [ ] Submit form with selection includes value

4. Test visual states:
   - [ ] Focus ring visible on Tab focus
   - [ ] Error border shown when required and empty
   - [ ] Disabled state prevents interaction
   - [ ] Size variants (sm, md, lg) render correctly

5. Test accessibility (Chrome DevTools):
   - [ ] role="combobox" on trigger
   - [ ] role="listbox" on dropdown
   - [ ] role="option" on each option
   - [ ] aria-expanded updates on open/close
   - [ ] aria-selected marks selected option
   - [ ] aria-controls references listbox
   - [ ] aria-activedescendant updates on navigation
  </how-to-verify>
  <resume-signal>Type "approved" when all checks pass, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
All success criteria from Phase 32 ROADMAP:
1. User clicks select trigger and dropdown opens with options; user clicks option and selection is displayed in trigger
2. User navigates options with arrow keys, selects with Enter, and closes with Escape without using mouse
3. User types characters and focus moves to first option starting with those characters (type-ahead)
4. Developer wraps lui-select in native form, submits form, and receives selected value in FormData
5. Screen reader user hears current selection, available options count, and navigation instructions via ARIA
</verification>

<success_criteria>
- Human verification confirms all interactions work
- All ARIA requirements met
- Form participation works correctly
- Component is ready for Phase 33 enhancements
</success_criteria>

<output>
After completion, create `.planning/phases/32-core-single-select/32-04-SUMMARY.md`
</output>
