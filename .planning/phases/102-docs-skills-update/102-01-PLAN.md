---
phase: 102-docs-skills-update
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/line-chart/SKILL.md
  - skill/skills/area-chart/SKILL.md
  - skill/skills/charts/SKILL.md
autonomous: true
requirements:
  - none
must_haves:
  truths:
    - "An AI agent reading skill/skills/line-chart/SKILL.md can correctly configure WebGPU streaming (enable-webgpu attr, renderer property, renderer-selected event, pushData(point, seriesIndex?) multi-series signature, maxPoints default 500000)"
    - "An AI agent reading skill/skills/area-chart/SKILL.md gets the same complete WebGPU + multi-series streaming information as line-chart"
    - "skill/skills/charts/SKILL.md documents renderer-selected as a shared event so agents loading only the router skill know to expect it"
  artifacts:
    - path: "skill/skills/line-chart/SKILL.md"
      provides: "Complete v10.0 line-chart skill file"
      contains: "enable-webgpu"
    - path: "skill/skills/area-chart/SKILL.md"
      provides: "Complete v10.0 area-chart skill file"
      contains: "enable-webgpu"
    - path: "skill/skills/charts/SKILL.md"
      provides: "Updated shared charts skill with renderer-selected event"
      contains: "renderer-selected"
  key_links:
    - from: "skill/skills/line-chart/SKILL.md Props table"
      to: "enable-webgpu attribute"
      via: "pipe-delimited markdown table row"
      pattern: "enable-webgpu"
    - from: "skill/skills/line-chart/SKILL.md Behavior Notes"
      to: "pushData(point, seriesIndex?) multi-series"
      via: "bullet point"
      pattern: "seriesIndex"
---

<objective>
Update the line-chart, area-chart, and shared charts skill files with all v10.0 API changes: WebGPU opt-in attribute, renderer property, renderer-selected event, multi-series pushData() signature, and corrected maxPoints default.

Purpose: AI agents reading these skill files need accurate references to configure streaming with WebGPU. The current skill files predate Phases 98-101 and contain stale information (single-arg pushData, maxPoints default of 1000, no WebGPU props).
Output: Three updated Markdown skill files with v10.0 deltas applied.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/102-docs-skills-update/102-RESEARCH.md
@skill/skills/line-chart/SKILL.md
@skill/skills/area-chart/SKILL.md
@skill/skills/charts/SKILL.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update line-chart and area-chart skill files with v10.0 WebGPU + streaming changes</name>
  <files>
    skill/skills/line-chart/SKILL.md
    skill/skills/area-chart/SKILL.md
  </files>
  <action>
Apply these exact changes to BOTH skill files (line-chart and area-chart — identical feature set for all v10.0 items):

**1. Update the description (front-matter) to mention WebGPU:**
- line-chart: change `streaming via pushData() using ECharts appendData path` → `streaming via pushData(point, seriesIndex?) with WebGPU GPU-accelerated rendering for 1M+ point datasets`
- area-chart: change description similarly (currently says "streaming via appendData")

**2. Add `enable-webgpu` opt-in example to the `## Usage` section.**
After the `setInterval(() => chart.pushData(Math.random() * 100), 100);` streaming block, add a new fenced code block:

```js
// WebGPU opt-in for 1M+ point streaming (Chrome/Edge, Firefox 141+, Safari 26+)
// Set enable-webgpu attribute BEFORE data assignment
const chart = document.querySelector('lui-line-chart');
chart.setAttribute('enable-webgpu', '');
chart.data = [{ name: 'Live', data: [] }];

// Always wait for renderer-selected before reading chart.renderer
chart.addEventListener('renderer-selected', (e) => {
  console.log('Renderer:', e.detail.renderer); // 'webgpu' | 'webgl' | 'canvas'
});

setInterval(() => chart.pushData(Math.random() * 100), 10);
```

**3. Add multi-series pushData example:**
After the existing streaming example, add:

```js
// Multi-series streaming (v10.0 — STRM-03)
chart.data = [
  { name: 'CPU', data: [] },
  { name: 'Memory', data: [] },
];
chart.pushData(cpuValue);          // seriesIndex defaults to 0
chart.pushData(memoryValue, 1);    // routes to second series
// Both are batched in the same RAF frame automatically
```

**4. Add new props to the `## Props` table:**
After the existing props table row for `zoom`, add:

```
| `enableWebGpu` | `enable-webgpu` | `boolean` | `false` | Opt-in WebGPU rendering via ChartGPU 0.3.2. When set and WebGPU is available (Chrome/Edge, Firefox 141+, Safari 26+), renders data pixels on a GPU-accelerated canvas beneath ECharts axes. Falls back to Canvas automatically. |
| `renderer` | — (read-only JS) | `'webgpu' \| 'webgl' \| 'canvas'` | `'canvas'` | Active renderer tier. Read ONLY after `renderer-selected` event fires. NOT a Lit `@property()` — does not trigger reactive updates. |
```

**5. Add `## Events` section** (currently missing from both line/area skill files).
Insert after the `## Methods` section:

```markdown
## Events

| Event | Detail | Description |
|-------|--------|-------------|
| `renderer-selected` | `{ renderer: 'webgpu' \| 'webgl' \| 'canvas' }` | Fires during `firstUpdated()` when the renderer tier has been determined. Always wait for this event before reading `chart.renderer`. |

See `skills/charts` for shared `ui-webgl-unavailable` event.
```

**6. Fix `maxPoints` default in Props note:**
The line-chart and area-chart override the base default. Add this note to the `## Props` section header:
- Change: `For shared props (data, option, loading, enableGl, maxPoints) see \`skills/charts\`.`
- To: `For shared props (data, option, loading, enableGl) see \`skills/charts\`. Note: \`maxPoints\` default is **500,000** for line/area charts (overrides base default of 1000) — at 1000 pts/sec this allows ~8 minutes before dispose+reinit reset.`

**7. Update `## Behavior Notes`:**
- Change the stale `pushData()` note: Remove `For a single-series line chart, pass a number.` Replace with: `**pushData() multi-series**: \`pushData(point, seriesIndex = 0)\` — \`seriesIndex\` defaults to \`0\`. Pass \`1\` to stream to the second series without affecting others. All calls in the same animation frame are batched automatically.`
- Add new note: `**enable-webgpu opt-in**: WebGPU is NOT auto-detected. Set \`enable-webgpu\` attribute to activate the GPU probe. Without it, charts use Canvas with zero async startup overhead.`
- Add new note: `**renderer is read-only**: Do not assign \`chart.renderer\`. Read it after the \`renderer-selected\` event. It is a plain class field — not a Lit \`@property()\`, so assigning it has no effect.`
- Add new note: `**maxPoints default is 500,000**: Line/area charts override the base 1000 default from BaseChartElement.`
- Keep existing streaming rule: `do NOT call chart.option = ... or reassign chart.data after pushData() has started` — this applies regardless of renderer.
  </action>
  <verify>
    <automated>grep -c "enable-webgpu" /Users/sn0w/Documents/dev/lit-components/skill/skills/line-chart/SKILL.md && grep -c "enable-webgpu" /Users/sn0w/Documents/dev/lit-components/skill/skills/area-chart/SKILL.md && grep -c "renderer-selected" /Users/sn0w/Documents/dev/lit-components/skill/skills/line-chart/SKILL.md && grep -c "seriesIndex" /Users/sn0w/Documents/dev/lit-components/skill/skills/line-chart/SKILL.md && grep -c "500" /Users/sn0w/Documents/dev/lit-components/skill/skills/line-chart/SKILL.md</automated>
  </verify>
  <done>Both skill files contain `enable-webgpu`, `renderer-selected`, `seriesIndex`, `500,000` (or 500000), and a new Events section. The `maxPoints` default is documented as 500,000 (not 1000) for these charts.</done>
</task>

<task type="auto">
  <name>Task 2: Add renderer-selected to shared charts/SKILL.md events table</name>
  <files>skill/skills/charts/SKILL.md</files>
  <action>
The research open question concluded: add `renderer-selected` to the shared `skills/charts/SKILL.md` because ALL 8 charts inherit `_detectRenderer()` from BaseChartElement and fire this event when `enable-webgpu` is set.

**1. Add `enable-webgpu` to the Shared Props table:**
After the `maxPoints` row in the `## Shared Props (All 8 Charts)` table, add:
```
| `enableWebGpu` | `enable-webgpu` | `boolean` | `false` | Opt-in WebGPU detection. All charts inherit this from BaseChartElement. Only line/area charts activate ChartGPU rendering; other chart types fire `renderer-selected` but remain on Canvas. |
```

**2. Add `renderer-selected` to the `## Shared Events` table:**
In the `## Shared Events (All 8 Charts)` table, add after `ui-webgl-unavailable`:
```
| `renderer-selected` | `{ renderer: 'webgpu' \| 'webgl' \| 'canvas' }` | Fires in `firstUpdated()` when the renderer tier is determined. All 8 charts fire this when `enable-webgpu` is set. Only line/area charts activate ChartGPU; others fall through to Canvas. |
```

**3. Update `pushData()` method note in Streaming section:**
Find the `## Streaming with pushData()` code block. After the existing example, add a note:
```
// For line-chart and area-chart only: multi-series seriesIndex support
// chart.pushData(value, 1) routes to the second series
// See skills/line-chart and skills/area-chart for full multi-series API
```

**4. Update the `## Shared Methods` table note for pushData:**
The table currently shows `(point: unknown) => void`. Add a note below the table:
`**Note:** \`lui-line-chart\` and \`lui-area-chart\` extend \`pushData\` with an optional \`seriesIndex\` parameter: \`pushData(point, seriesIndex = 0)\`. See individual chart skills for the full signature.`
  </action>
  <verify>
    <automated>grep -c "renderer-selected" /Users/sn0w/Documents/dev/lit-components/skill/skills/charts/SKILL.md && grep -c "enable-webgpu" /Users/sn0w/Documents/dev/lit-components/skill/skills/charts/SKILL.md</automated>
  </verify>
  <done>skill/skills/charts/SKILL.md contains `renderer-selected` in the Shared Events table and `enable-webgpu` in the Shared Props table. pushData() note clarifies the line/area seriesIndex extension.</done>
</task>

</tasks>

<verification>
Run the following to confirm all six key v10.0 items appear in each skill file:

```bash
for f in skill/skills/line-chart/SKILL.md skill/skills/area-chart/SKILL.md; do
  echo "=== $f ===";
  grep -c "enable-webgpu" "$f";
  grep -c "renderer-selected" "$f";
  grep -c "seriesIndex" "$f";
  grep -c "500" "$f";
done
grep -c "renderer-selected" skill/skills/charts/SKILL.md
```

All counts should be >= 1.
</verification>

<success_criteria>
- skill/skills/line-chart/SKILL.md: has enable-webgpu prop, renderer prop, renderer-selected event section, pushData(point, seriesIndex?) multi-series example, maxPoints documented as 500,000
- skill/skills/area-chart/SKILL.md: identical v10.0 coverage to line-chart
- skill/skills/charts/SKILL.md: has enable-webgpu in shared props, renderer-selected in shared events, pushData seriesIndex extension note
- No future requirements documented (STRM-05, MA-05, WEBGPU-04/05 must NOT appear)
</success_criteria>

<output>
After completion, create `.planning/phases/102-docs-skills-update/102-01-SUMMARY.md`
</output>
