---
phase: 24-presets-and-enhanced-features
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/cli/src/theme/index.ts
  - apps/docs/src/data/presets.ts
  - apps/docs/src/contexts/ConfiguratorContext.tsx
autonomous: true

must_haves:
  truths:
    - "generateScale function is importable from @lit-ui/cli/theme"
    - "Preset theme definitions exist as ThemeConfig objects"
    - "loadThemeConfig method resets configurator state to a given ThemeConfig"
  artifacts:
    - path: "packages/cli/src/theme/index.ts"
      provides: "generateScale export"
      contains: "export { generateScale }"
    - path: "apps/docs/src/data/presets.ts"
      provides: "Preset theme definitions"
      exports: ["presetThemes", "PresetTheme"]
    - path: "apps/docs/src/contexts/ConfiguratorContext.tsx"
      provides: "loadThemeConfig method"
      contains: "loadThemeConfig"
  key_links:
    - from: "apps/docs/src/data/presets.ts"
      to: "@lit-ui/cli/theme"
      via: "ThemeConfig type import"
      pattern: "import.*ThemeConfig.*@lit-ui/cli/theme"
    - from: "apps/docs/src/contexts/ConfiguratorContext.tsx"
      to: "loadThemeConfig"
      via: "context value export"
      pattern: "loadThemeConfig.*useCallback"
---

<objective>
Establish foundation for presets and URL sharing by exporting generateScale, creating preset theme definitions, and adding loadThemeConfig method to ConfiguratorContext.

Purpose: These three pieces are the foundation that all other Phase 24 features depend on - presets need ThemeConfig objects and a way to apply them; shade display needs generateScale; URL loading needs loadThemeConfig.

Output: Exported generateScale function, presets.ts data file with 4 themes, ConfiguratorContext with loadThemeConfig method
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-presets-and-enhanced-features/24-RESEARCH.md

# Existing files to modify
@packages/cli/src/theme/index.ts
@apps/docs/src/contexts/ConfiguratorContext.tsx

# Reference for ThemeConfig structure
@packages/cli/src/theme/schema.ts
@packages/cli/src/theme/defaults.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Export generateScale from @lit-ui/cli/theme</name>
  <files>packages/cli/src/theme/index.ts</files>
  <action>
Add export for generateScale function from color-scale.ts:

1. Add to the existing exports in index.ts:
```typescript
/**
 * Generate a 50-950 shade scale from a base OKLCH color.
 *
 * Produces 10 shades with lightness ranging from 0.97 (50) to 0.20 (950).
 * Chroma is modulated to prevent oversaturation at extreme lightness values.
 *
 * @example
 * ```ts
 * import { generateScale } from '@lit-ui/cli/theme';
 *
 * const shades = generateScale('oklch(0.6 0.2 250)');
 * // { '50': 'oklch(0.97 0.02 250)', '100': 'oklch(0.92 0.06 250)', ... }
 * ```
 */
export { generateScale } from "./color-scale.js";
```

2. Place it after the generateThemeCSS export (near the end of the file)

This enables the docs app to import generateScale for the shade display feature.
  </action>
  <verify>
```bash
cd packages/cli && npx tsc --noEmit
grep -q "export { generateScale }" packages/cli/src/theme/index.ts
```
  </verify>
  <done>generateScale is exported from @lit-ui/cli/theme and TypeScript compiles successfully</done>
</task>

<task type="auto">
  <name>Task 2: Create preset theme definitions</name>
  <files>apps/docs/src/data/presets.ts</files>
  <action>
Create apps/docs/src/data/presets.ts with 4 preset themes as ThemeConfig objects:

```typescript
/**
 * Preset theme definitions for the Visual Configurator.
 *
 * Each preset is a complete ThemeConfig that can be loaded into the configurator
 * with a single click. Colors are in OKLCH format for perceptual uniformity.
 */

import type { ThemeConfig } from "@lit-ui/cli/theme";

/**
 * Preset theme metadata including display information.
 */
export interface PresetTheme {
  id: string;
  name: string;
  description: string;
  config: ThemeConfig;
}

/**
 * Available preset themes.
 *
 * - default: Neutral gray palette, professional appearance
 * - dark: Optimized for dark backgrounds with higher lightness primaries
 * - blue: Professional blue accent for business/corporate apps
 * - green: Nature-inspired green for eco/health/growth themes
 */
export const presetThemes: PresetTheme[] = [
  {
    id: "default",
    name: "Default",
    description: "Neutral gray palette",
    config: {
      version: 1,
      colors: {
        primary: "oklch(0.45 0.03 250)",
        secondary: "oklch(0.92 0.02 250)",
        destructive: "oklch(0.55 0.22 25)",
        background: "oklch(0.98 0.01 250)",
        foreground: "oklch(0.15 0.02 250)",
        muted: "oklch(0.92 0.02 250)",
      },
      radius: "md",
    },
  },
  {
    id: "ocean",
    name: "Ocean",
    description: "Professional blue accent",
    config: {
      version: 1,
      colors: {
        primary: "oklch(0.55 0.22 250)",
        secondary: "oklch(0.92 0.05 250)",
        destructive: "oklch(0.55 0.22 25)",
        background: "oklch(0.98 0.01 250)",
        foreground: "oklch(0.15 0.02 250)",
        muted: "oklch(0.92 0.02 250)",
      },
      radius: "md",
    },
  },
  {
    id: "forest",
    name: "Forest",
    description: "Nature-inspired green",
    config: {
      version: 1,
      colors: {
        primary: "oklch(0.55 0.18 145)",
        secondary: "oklch(0.92 0.05 145)",
        destructive: "oklch(0.55 0.22 25)",
        background: "oklch(0.98 0.01 145)",
        foreground: "oklch(0.15 0.02 145)",
        muted: "oklch(0.92 0.02 145)",
      },
      radius: "md",
    },
  },
  {
    id: "sunset",
    name: "Sunset",
    description: "Warm orange and amber tones",
    config: {
      version: 1,
      colors: {
        primary: "oklch(0.65 0.2 50)",
        secondary: "oklch(0.92 0.05 50)",
        destructive: "oklch(0.55 0.22 25)",
        background: "oklch(0.98 0.02 50)",
        foreground: "oklch(0.2 0.02 50)",
        muted: "oklch(0.92 0.03 50)",
      },
      radius: "lg",
    },
  },
];
```

Create the data/ directory if needed: mkdir -p apps/docs/src/data
  </action>
  <verify>
```bash
ls apps/docs/src/data/presets.ts
cd apps/docs && npx tsc --noEmit
```
  </verify>
  <done>presets.ts exists with 4 preset themes (default, ocean, forest, sunset), TypeScript compiles</done>
</task>

<task type="auto">
  <name>Task 3: Add loadThemeConfig to ConfiguratorContext</name>
  <files>apps/docs/src/contexts/ConfiguratorContext.tsx</files>
  <action>
Add loadThemeConfig method to ConfiguratorContext that resets all state to a given ThemeConfig:

1. Add to the ConfiguratorContextValue interface (around line 74):
```typescript
/** Load a complete theme config (from preset or URL) */
loadThemeConfig: (config: ThemeConfig) => void;
```

2. Add the implementation inside ConfiguratorProvider (after resetLightColor, around line 280):
```typescript
// Load a complete theme config (from preset or URL)
const loadThemeConfig = useCallback((config: ThemeConfig) => {
  // Set light colors from config
  setLightColors({ ...config.colors });

  // Re-derive dark colors from the new light colors
  const derivedDark: Record<ColorKey, string> = {} as Record<ColorKey, string>;
  for (const key of Object.keys(config.colors) as ColorKey[]) {
    derivedDark[key] = deriveDarkMode(config.colors[key]);
  }
  setDarkColors(derivedDark);

  // Clear all overrides (fresh start from preset)
  setDarkOverrides(new Set());
  setLightOverrides(new Set());

  // Set radius
  setRadius(config.radius);
}, []);
```

3. Add loadThemeConfig to the context value object (around line 318):
```typescript
loadThemeConfig,
```

4. Add loadThemeConfig to the useMemo dependency array (around line 336):
```typescript
loadThemeConfig,
```

This method is critical for:
- Loading preset themes (PresetSelector will call this)
- Loading themes from URL parameters (URL sync will call this)
  </action>
  <verify>
```bash
cd apps/docs && npx tsc --noEmit
grep -q "loadThemeConfig" apps/docs/src/contexts/ConfiguratorContext.tsx
```
  </verify>
  <done>loadThemeConfig method exists in ConfiguratorContext, accepts ThemeConfig, clears overrides, TypeScript compiles</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. TypeScript compilation passes for both packages/cli and apps/docs
2. generateScale is importable: `import { generateScale } from "@lit-ui/cli/theme"`
3. presets.ts exports PresetTheme type and presetThemes array with 4 items
4. ConfiguratorContext exports loadThemeConfig method
5. No runtime errors when loading configurator page
</verification>

<success_criteria>
- generateScale exported from @lit-ui/cli/theme
- 4 preset themes defined as ThemeConfig objects
- loadThemeConfig method in ConfiguratorContext that resets all state
- TypeScript compilation passes for all affected packages
</success_criteria>

<output>
After completion, create `.planning/phases/24-presets-and-enhanced-features/24-01-SUMMARY.md`
</output>
