---
phase: 25-docs-site-dark-mode
plan: 05
type: execute
wave: 3
depends_on: ["25-01", "25-02"]
files_modified:
  - apps/docs/src/components/configurator/ModeToggle.tsx
  - apps/docs/src/pages/configurator/ConfiguratorPage.tsx
  - apps/docs/src/components/configurator/ThemePreview.tsx
  - apps/docs/src/components/configurator/CollapsibleColorPicker.tsx
  - apps/docs/src/components/configurator/PresetSelector.tsx
  - apps/docs/src/components/configurator/RadiusSelector.tsx
  - apps/docs/src/components/configurator/GetCommandModal.tsx
  - apps/docs/src/components/configurator/ShareButton.tsx
autonomous: true

must_haves:
  truths:
    - "Configurator ModeToggle and header toggle control same theme state"
    - "Clicking either toggle switches docs theme"
    - "Both toggles show consistent state"
    - "Configurator page components have dark mode styling"
  artifacts:
    - path: "apps/docs/src/components/configurator/ModeToggle.tsx"
      provides: "ModeToggle synced with ThemeContext"
      contains: "useTheme"
    - path: "apps/docs/src/pages/configurator/ConfiguratorPage.tsx"
      provides: "ConfiguratorPage with dark mode styling"
      contains: "dark:"
  key_links:
    - from: "apps/docs/src/components/configurator/ModeToggle.tsx"
      to: "ThemeContext"
      via: "useTheme hook"
      pattern: "useTheme"
    - from: "apps/docs/src/components/configurator/ModeToggle.tsx"
      to: "ConfiguratorContext"
      via: "useConfigurator hook"
      pattern: "setActiveMode"
---

<objective>
Sync the configurator's ModeToggle with the global ThemeContext and add dark mode styling to configurator components.

Purpose: Both toggles (header and configurator) control the same theme state. Configurator page fully styled for dark mode.
Output: ModeToggle synced with ThemeContext, all configurator components with dark mode classes.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/25-docs-site-dark-mode/25-RESEARCH.md
@.planning/phases/25-docs-site-dark-mode/25-CONTEXT.md
@.planning/phases/25-docs-site-dark-mode/25-01-SUMMARY.md
@.planning/phases/25-docs-site-dark-mode/25-02-SUMMARY.md
@apps/docs/src/components/configurator/ModeToggle.tsx
@apps/docs/src/contexts/ThemeContext.tsx
@apps/docs/src/contexts/ConfiguratorContext.tsx
@apps/docs/src/pages/configurator/ConfiguratorPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Sync ModeToggle with ThemeContext</name>
  <files>apps/docs/src/components/configurator/ModeToggle.tsx</files>
  <action>
Modify ModeToggle to sync with the global ThemeContext while maintaining its role in ConfiguratorContext.

Per CONTEXT.md:
- Relationship: unified - one theme state, both toggles control same thing
- Keep both toggles visible (header and configurator)
- Preview behavior: follows docs theme

Implementation:
1. Import useTheme from '../../contexts/ThemeContext'
2. Get { theme, setTheme } from useTheme()
3. Use useEffect to sync ConfiguratorContext activeMode with global theme:
   - When theme changes, call setActiveMode(theme)
4. When button is clicked, call setTheme(mode) instead of just setActiveMode
   - The useEffect will then sync activeMode

Updated logic:
```typescript
import { useTheme } from '../../contexts/ThemeContext';
import { useConfigurator } from '../../contexts/ConfiguratorContext';
import { useEffect } from 'react';

export function ModeToggle() {
  const { theme, setTheme } = useTheme();
  const { activeMode, setActiveMode } = useConfigurator();

  // Sync configurator activeMode with docs theme
  useEffect(() => {
    if (activeMode !== theme) {
      setActiveMode(theme);
    }
  }, [theme, activeMode, setActiveMode]);

  const handleModeChange = (mode: 'light' | 'dark') => {
    setTheme(mode);  // This updates docs theme, useEffect syncs activeMode
  };

  // Rest of component uses theme for display state and handleModeChange for clicks
  // Button onClick: handleModeChange('light') / handleModeChange('dark')
  // Active state check: theme === 'light' / theme === 'dark'
}
```

Also add dark mode classes to the ModeToggle buttons themselves since they're in a card.
  </action>
  <verify>Clicking ModeToggle changes docs theme, header toggle reflects change</verify>
  <done>ModeToggle syncs with global theme state, both toggles control same theme</done>
</task>

<task type="auto">
  <name>Task 2: Add dark mode styling to ConfiguratorPage and SectionHeader</name>
  <files>apps/docs/src/pages/configurator/ConfiguratorPage.tsx</files>
  <action>
Update ConfiguratorPage with dark mode classes for headers, cards, and text.

1. SectionHeader component:
   - Icon background: `bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400`
   - Title: `text-gray-900 dark:text-gray-100`
   - Description: `text-gray-500 dark:text-gray-400`
   - Divider gradient: `bg-gradient-to-r from-gray-200 dark:from-gray-700 to-transparent`

2. Page header:
   - Background blur circle: `bg-gray-100 dark:bg-gray-800`
   - Main title: `text-gray-900 dark:text-gray-100`
   - Subtitle: `text-gray-500 dark:text-gray-400`

3. Section cards (Mode & Style, Export):
   - `border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900`

4. Export section:
   - Text: `text-gray-600 dark:text-gray-400`
   - Primary button: `bg-gray-900 dark:bg-gray-100 text-white dark:text-gray-900 hover:bg-gray-800 dark:hover:bg-gray-200`

5. Colors section hint text:
   - `text-gray-500 dark:text-gray-400`
  </action>
  <verify>ConfiguratorPage renders correctly in dark mode</verify>
  <done>ConfiguratorPage header, sections, and cards have dark mode styling</done>
</task>

<task type="auto">
  <name>Task 3: Add dark mode styling to remaining configurator components</name>
  <files>
    apps/docs/src/components/configurator/ThemePreview.tsx
    apps/docs/src/components/configurator/CollapsibleColorPicker.tsx
    apps/docs/src/components/configurator/PresetSelector.tsx
    apps/docs/src/components/configurator/RadiusSelector.tsx
    apps/docs/src/components/configurator/GetCommandModal.tsx
    apps/docs/src/components/configurator/ShareButton.tsx
  </files>
  <action>
Update all remaining configurator components with dark mode classes.

**ThemePreview.tsx:**
- Preview container backgrounds and borders
- Text colors for labels and descriptions
- Note: The actual preview shows themed components, which use their own theme CSS

**CollapsibleColorPicker.tsx:**
- Collapsed row: borders, backgrounds, text
- Expanded picker section: backgrounds, borders
- Color swatch and labels
- Reset button styling

**PresetSelector.tsx:**
- Preset card borders and backgrounds
- Selected state styling
- Preset name and description text

**RadiusSelector.tsx:**
- Label text: `text-gray-500 dark:text-gray-400`
- Button borders and backgrounds
- Active/inactive states

**GetCommandModal.tsx:**
- Modal overlay and content
- Header text
- Code block container (likely already dark)
- Close button and copy button

**ShareButton.tsx:**
- Button variants (primary and outline)
- Ensure both work in dark mode

Pattern to follow:
- Borders: gray-200 -> dark:gray-800
- Card backgrounds: white/gray-50 -> dark:gray-900/gray-950
- Primary text: gray-900 -> dark:gray-100
- Secondary text: gray-500/600 -> dark:gray-400
- Active states: appropriate contrast
  </action>
  <verify>All configurator components render correctly in dark mode</verify>
  <done>All configurator components have dark mode styling</done>
</task>

</tasks>

<verification>
1. Run `cd apps/docs && npm run build` - should succeed
2. Run `cd apps/docs && npm run dev` and verify:
   - Navigate to /configurator
   - Click ModeToggle Light/Dark buttons - docs theme changes
   - Header toggle reflects same state as ModeToggle
   - Click header toggle - ModeToggle reflects change
   - All configurator sections render correctly in dark mode
   - Color pickers, presets, radius selector all styled
   - Modal renders correctly in dark mode
3. Test the full flow:
   - Visit site in light mode
   - Go to configurator
   - Switch to dark mode via configurator toggle
   - Navigate away and back - theme persists
   - Toggle via header - configurator stays in sync
</verification>

<success_criteria>
- ModeToggle uses useTheme and syncs with global theme
- Both header toggle and ModeToggle control same theme state
- ConfiguratorPage fully styled for dark mode
- All configurator components (preview, pickers, presets, modal) dark mode ready
- Theme state consistent across entire app
</success_criteria>

<output>
After completion, create `.planning/phases/25-docs-site-dark-mode/25-05-SUMMARY.md`
</output>
