---
phase: 25-docs-site-dark-mode
plan: 02
type: execute
wave: 2
depends_on: ["25-01"]
files_modified:
  - apps/docs/src/components/ThemeToggle.tsx
  - apps/docs/src/components/Header.tsx
  - apps/docs/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Theme toggle button visible in header on every docs page"
    - "Clicking toggle switches between light and dark mode"
    - "Toggle shows sun icon in dark mode, moon icon in light mode"
    - "Header styling updates when theme changes"
  artifacts:
    - path: "apps/docs/src/components/ThemeToggle.tsx"
      provides: "Theme toggle button component"
      exports: ["ThemeToggle"]
    - path: "apps/docs/src/components/Header.tsx"
      provides: "Header with theme toggle and dark mode styling"
      contains: "ThemeToggle"
    - path: "apps/docs/src/App.tsx"
      provides: "App wrapped with ThemeProvider"
      contains: "ThemeProvider"
  key_links:
    - from: "apps/docs/src/components/ThemeToggle.tsx"
      to: "ThemeContext"
      via: "useTheme hook"
      pattern: "useTheme"
    - from: "apps/docs/src/components/Header.tsx"
      to: "ThemeToggle"
      via: "component import"
      pattern: "ThemeToggle"
    - from: "apps/docs/src/App.tsx"
      to: "ThemeProvider"
      via: "context wrapper"
      pattern: "ThemeProvider"
---

<objective>
Create the theme toggle component and integrate it into the header.

Purpose: Users can toggle between light and dark mode via a button in the header that appears on every page.
Output: ThemeToggle component, updated Header with toggle and dark styling, App wrapped with ThemeProvider.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/25-docs-site-dark-mode/25-RESEARCH.md
@.planning/phases/25-docs-site-dark-mode/25-CONTEXT.md
@.planning/phases/25-docs-site-dark-mode/25-01-SUMMARY.md
@apps/docs/src/components/Header.tsx
@apps/docs/src/App.tsx
@apps/docs/src/contexts/ThemeContext.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ThemeToggle component</name>
  <files>apps/docs/src/components/ThemeToggle.tsx</files>
  <action>
Create a new ThemeToggle component that displays a button with sun/moon icons.

Requirements from CONTEXT.md:
- Position: far right of header, after all nav items (handled by Header.tsx)
- Icon: sun/moon swap - shows opposite of current mode (sun in dark, moon in light)
- Tooltip: shows current state ("Dark mode" / "Light mode")
- Hover/focus states: match docs style

Implementation:
1. Import Sun and Moon from lucide-react (already in dependencies)
2. Import and use `useTheme` hook from ThemeContext
3. Create a button that:
   - Calls `setTheme(theme === 'dark' ? 'light' : 'dark')` on click
   - Shows Sun icon when in dark mode (clicking will switch to light)
   - Shows Moon icon when in light mode (clicking will switch to dark)
   - Has title attribute showing current state for tooltip
   - Has aria-label for accessibility

Styling (match Header's GitHub link button style):
```typescript
className="p-2 rounded-lg text-gray-500 hover:bg-gray-100 hover:text-gray-900
           dark:text-gray-400 dark:hover:bg-gray-800 dark:hover:text-gray-100
           transition-colors"
```

Use size={20} for the icons to match the GitHub icon size.
  </action>
  <verify>Component exports ThemeToggle, no TypeScript errors</verify>
  <done>ThemeToggle component renders sun/moon toggle with proper styling and accessibility</done>
</task>

<task type="auto">
  <name>Task 2: Update Header with theme toggle and dark mode styling</name>
  <files>apps/docs/src/components/Header.tsx</files>
  <action>
Modify Header.tsx to include the ThemeToggle and add dark mode classes.

1. Import ThemeToggle from './ThemeToggle'

2. Add ThemeToggle to the header, positioned after the GitHub link and before MobileNav:
```tsx
<ThemeToggle />
<MobileNav />
```

3. Add dark mode classes to existing elements:

Header container (currently bg-white border-gray-200):
```
bg-white dark:bg-gray-950 border-b border-gray-200 dark:border-gray-800
```

Logo text (currently text-gray-900):
```
text-gray-900 dark:text-gray-100
```

"/ DOCS" text (currently text-gray-400):
```
text-gray-400 dark:text-gray-500
```

GitHub link (currently text-gray-500 hover:bg-gray-100 hover:text-gray-900):
```
text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-gray-100
```

Keep transition-colors on elements that have it.
  </action>
  <verify>Header imports ThemeToggle, dark classes applied, no TypeScript errors</verify>
  <done>Header shows theme toggle and updates styling based on theme</done>
</task>

<task type="auto">
  <name>Task 3: Wrap App with ThemeProvider</name>
  <files>apps/docs/src/App.tsx</files>
  <action>
Modify App.tsx to wrap the entire app with ThemeProvider from ThemeContext.

1. Import ThemeProvider from './contexts/ThemeContext'

2. Wrap the BrowserRouter (and everything inside) with ThemeProvider:
```tsx
export default function App() {
  return (
    <ThemeProvider>
      <BrowserRouter>
        <Routes>
          {/* existing routes */}
        </Routes>
      </BrowserRouter>
    </ThemeProvider>
  )
}
```

This ensures ThemeContext is available to all components including the Header.
  </action>
  <verify>App.tsx imports and uses ThemeProvider wrapper, no TypeScript errors</verify>
  <done>App is wrapped with ThemeProvider, theme context available throughout</done>
</task>

</tasks>

<verification>
1. Run `cd apps/docs && npm run build` - should succeed
2. Run `cd apps/docs && npm run dev` and verify:
   - Theme toggle button visible in header (after GitHub link)
   - Clicking toggle switches between light/dark mode
   - Header background, text colors update when theme changes
   - Sun icon shows in dark mode, Moon icon in light mode
   - Tooltip shows current state on hover
3. Refresh page - theme persists from localStorage
</verification>

<success_criteria>
- ThemeToggle.tsx exists and exports component
- Header.tsx includes ThemeToggle and has dark mode classes
- App.tsx wraps content with ThemeProvider
- Toggle button visible and functional
- Header styling changes when theme toggles
</success_criteria>

<output>
After completion, create `.planning/phases/25-docs-site-dark-mode/25-02-SUMMARY.md`
</output>
