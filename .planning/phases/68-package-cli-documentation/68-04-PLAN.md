---
phase: 68-package-cli-documentation
plan: 04
type: execute
wave: 3
depends_on: ["68-03"]
files_modified:
  - apps/docs/src/pages/components/DataTablePage.tsx
autonomous: true

must_haves:
  truths:
    - "Page includes demos for column customization, inline editing, row actions, expandable rows, server-side data, and CSV export"
    - "API reference section lists all 35+ properties with types and defaults"
    - "Events section lists all 13 custom events with payload descriptions"
    - "CSS custom properties section lists all ~18 theming variables with defaults"
    - "Accessibility section documents keyboard navigation and ARIA behavior"
  artifacts:
    - path: "apps/docs/src/pages/components/DataTablePage.tsx"
      provides: "Complete documentation page with all demos, API reference, accessibility guide"
      min_lines: 800
  key_links:
    - from: "apps/docs/src/pages/components/DataTablePage.tsx"
      to: "@lit-ui/data-table"
      via: "side-effect import and DataTableDemo wrapper"
      pattern: "import '@lit-ui/data-table'"
---

<objective>
Complete the data table documentation page with advanced feature demos, full API reference (properties, events, CSS custom properties, slots), and accessibility documentation.

Purpose: Provides the comprehensive API reference and advanced demos so developers have a complete guide to all data table capabilities, including keyboard navigation and screen reader behavior.
Output: Completed DataTablePage.tsx with 6+ additional demos, full API reference tables, and accessibility section
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/68-package-cli-documentation/68-03-SUMMARY.md
@apps/docs/src/pages/components/DataTablePage.tsx
@apps/docs/src/pages/components/SelectPage.tsx
@packages/data-table/src/data-table.ts
@packages/data-table/src/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add advanced feature demos</name>
  <files>apps/docs/src/pages/components/DataTablePage.tsx</files>
  <action>
Read the DataTablePage.tsx created in Plan 03. Add the following demo sections AFTER the existing pagination demo and BEFORE the PrevNextNav. Remove any placeholder comments from Plan 03.

**6. Column Customization Demo:**
- Title: "Column Customization"
- Description: "Resize columns by dragging header borders. Toggle column visibility with the column picker. Drag headers to reorder columns."
- Live demo with `enable-column-resizing`, `show-column-picker`, `enable-column-reorder` attributes
- Code tab showing column customization setup

**7. Inline Editing Demo:**
- Title: "Inline Editing"
- Description: "Click editable cells to edit values inline. Enable row editing mode for multi-cell edits with save/cancel."
- Live demo with columns having `meta: { editable: true, editType: 'text' }` and `enable-row-editing`
- Code tab showing editing setup and `ui-cell-edit` / `ui-row-edit` event handling
- Note: For the live demo, the DataTableDemo wrapper should set `enableRowEditing` and column defs with editable meta

**8. Row Actions Demo:**
- Title: "Row Actions"
- Description: "Add action buttons or a kebab menu to each row. Use hover-reveal to show actions only on hover."
- Live demo with `rowActions` property (view, edit, delete actions using factory functions)
- Code tab showing rowActions setup and `ui-row-action` event handler
- Note: Import `createViewAction`, `createEditAction`, `createDeleteAction` from @lit-ui/data-table for the demo

**9. Expandable Rows Demo:**
- Title: "Expandable Rows"
- Description: "Expand rows to reveal detail content below. Use single-expand mode for accordion behavior."
- Live demo with `renderDetailContent` function and `single-expand` attribute
- Code tab showing expandable row setup

**10. Server-Side Data Demo:**
- Title: "Server-Side Data"
- Description: "Connect to a server-side data source with async callbacks. Supports server-side sorting, filtering, and pagination."
- Live demo with `dataCallback` that simulates async fetch (setTimeout with mock data)
- Attributes: `manual-sorting`, `manual-filtering`, `manual-pagination`
- Code tab showing dataCallback pattern with AbortSignal

**11. CSV Export Demo:**
- Title: "CSV Export"
- Description: "Export visible or selected data to CSV. Use the onExport callback for server-side export."
- Live demo with an export button that calls the component's `exportCsv()` method via ref
- Code tab showing export setup

Each demo uses the `DataTableDemo` wrapper pattern from Plan 03. Complex properties (rowActions, renderDetailContent, dataCallback) must be set via the wrapper's props mechanism.
  </action>
  <verify>
Count demo sections: `grep -c "ExampleBlock" apps/docs/src/pages/components/DataTablePage.tsx` -- should be 11+

Verify advanced demos exist: `grep -E "(Column Customization|Inline Editing|Row Actions|Expandable|Server-Side|CSV Export)" apps/docs/src/pages/components/DataTablePage.tsx`
  </verify>
  <done>
6 additional advanced feature demos added covering column customization, inline editing, row actions, expandable rows, server-side data, and CSV export.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add API reference, events, CSS properties, and accessibility docs</name>
  <files>apps/docs/src/pages/components/DataTablePage.tsx</files>
  <action>
Continue editing DataTablePage.tsx. Add the following sections AFTER all demos and BEFORE PrevNextNav.

**1. API Reference Section:**

Create a `dataTableProps: PropDef[]` array covering ALL public properties. Group by feature area with comment headers. Properties to include (derived from all @property decorators in data-table.ts):

Core (10): columns, data, loading, aria-label, max-height, row-height, skeleton-rows, empty-state-type, no-data-message, no-matches-message

Sorting (2): sorting, manual-sorting

Selection (5): enable-selection, row-selection, row-id-key, total-row-count, preserve-selection-on-filter

Filtering (3): column-filters, global-filter, manual-filtering

Pagination (4): pagination, manual-pagination, page-count, page-size-options

Column Customization (10): enable-column-resizing, column-sizing, column-resize-mode, column-visibility, show-column-picker, column-order, enable-column-reorder, sticky-first-column, persistence-key, onColumnPreferencesChange

Editing (1): enable-row-editing

Actions (4): rowActions, hover-reveal-actions, bulkActions, onExport

Expandable (3): renderDetailContent, expanded, single-expand

Async (2): dataCallback, debounce-delay

Total: ~35 properties. Each needs: name, type, default, description.

Render with `<PropsTable props={dataTableProps} />`.

**2. Events Section:**

Create a styled section titled "Events" with a custom table (or use CodeBlock) listing all 13 custom events:

| Event | Detail Type | Description |
|-------|-------------|-------------|
| ui-sort-change | SortingState | Fired when sort state changes |
| ui-selection-change | { selectedRows, selectedIds } | Fired when row selection changes |
| ui-filter-change | { columnFilters, globalFilter } | Fired when filters change |
| ui-pagination-change | PaginationState | Fired when page or page size changes |
| ui-column-visibility-change | VisibilityState | Fired when column visibility changes |
| ui-column-order-change | ColumnOrderState | Fired when column order changes |
| ui-column-preferences-change | ColumnPreferences | Fired when any column preference changes |
| ui-column-preferences-reset | void | Fired when preferences are reset |
| ui-cell-edit | { columnId, rowIndex, oldValue, newValue, row } | Fired when cell edit is committed |
| ui-row-edit | { rowIndex, values, row } | Fired when row edit is saved |
| ui-row-action | { actionId, row, rowId } | Fired when a row action is clicked |
| ui-bulk-action | { actionId, selectedRows } | Fired when a bulk action is executed |
| ui-expanded-change | ExpandedState | Fired when row expanded state changes |

Build this as a styled HTML table within the JSX, using the same styling pattern as other doc pages.

**3. Slots Section:**

Create a `dataTableSlots: SlotDef[]` array for the two toolbar slots:
- `toolbar-start`: Content rendered at the start of the toolbar (left side)
- `toolbar-end`: Content rendered at the end of the toolbar (right side)

Render with `<SlotsTable slots={dataTableSlots} />`.

**4. CSS Custom Properties Section:**

Create a styled section titled "CSS Custom Properties" with a table listing all ~18 CSS custom properties:

| Property | Default (Light) | Dark Mode |
|----------|----------------|-----------|
| --ui-data-table-header-bg | var(--color-muted) | var(--color-muted) |
| --ui-data-table-row-bg | var(--color-bg) | var(--color-bg) |
| --ui-data-table-row-hover-bg | var(--color-muted) | var(--color-muted/50%) |
| --ui-data-table-border-color | var(--color-border) | var(--color-border) |
| --ui-data-table-text-color | var(--color-foreground) | var(--color-foreground) |
| --ui-data-table-header-text | var(--color-muted-foreground) | var(--color-muted-foreground) |
| --ui-data-table-row-height | 48px | 48px |
| --ui-data-table-header-height | 48px | 48px |
| --ui-data-table-cell-padding | 0 1rem | 0 1rem |
| --ui-data-table-font-size | 0.875rem | 0.875rem |
| --ui-data-table-header-font-weight | 500 | 500 |
| --ui-data-table-header-hover-bg | var(--color-muted/80%) | var(--color-muted/80%) |
| --ui-data-table-selected-bg | var(--color-primary/10%) | var(--color-primary/15%) |
| --ui-data-table-selected-hover-bg | var(--color-primary/15%) | var(--color-primary/20%) |
| --ui-data-table-banner-bg | var(--color-primary/5%) | var(--color-primary/10%) |
| --ui-data-table-skeleton-base | var(--color-muted) | var(--color-muted) |
| --ui-data-table-skeleton-highlight | var(--color-muted/60%) | var(--color-muted/60%) |
| --ui-data-table-overlay-bg | rgba(255,255,255,0.7) | rgba(0,0,0,0.5) |

Build as a styled HTML table matching the project docs pattern.

**5. Accessibility Section (CLI-05):**

Create a section titled "Accessibility" covering:

a) **ARIA Roles:**
   - The table uses `role="grid"` on the container
   - Each row has `role="row"` with `aria-rowindex`
   - Each cell has `role="gridcell"` or `role="columnheader"` with `aria-colindex`
   - Sortable headers have `aria-sort` attribute

b) **Keyboard Navigation:**
   - Arrow keys: Move between cells in the grid
   - Home/End: Move to first/last cell in row
   - Ctrl+Home/End: Move to first/last cell in grid
   - Page Up/Down: Move up/down by viewport height
   - Enter/F2: Activate cell editing (if editable)
   - Escape: Cancel editing and return to cell navigation
   - Space: Toggle selection on focused row
   - Tab: Move focus to next interactive element within a cell

c) **Screen Reader Support:**
   - Live region announces current cell position on navigation
   - Sorted columns announced via aria-sort
   - Selection state announced via aria-selected
   - Loading states announced via aria-busy

Write this as structured HTML within JSX using headings, paragraphs, and the same code block pattern used elsewhere. Use a `<div className="...">` with keyboard shortcuts displayed in styled `<kbd>` elements or a table.

Ensure the PrevNextNav at the bottom has correct prev/next links:
- prev: { title: "Date Range Picker", href: "/components/date-range-picker" }
- next: { title: "Dialog", href: "/components/dialog" }
  </action>
  <verify>
Verify API reference: `grep "PropsTable" apps/docs/src/pages/components/DataTablePage.tsx`

Verify events section: `grep "ui-sort-change" apps/docs/src/pages/components/DataTablePage.tsx`

Verify CSS properties section: `grep "ui-data-table-header-bg" apps/docs/src/pages/components/DataTablePage.tsx`

Verify accessibility section: `grep -i "keyboard" apps/docs/src/pages/components/DataTablePage.tsx`

Verify page size: `wc -l apps/docs/src/pages/components/DataTablePage.tsx` -- should be 800+

Verify file compiles: `cd /Users/sn0w/Documents/dev/lit-components && npx tsc -b apps/docs/tsconfig.json --noEmit 2>&1 | head -20`
  </verify>
  <done>
Complete DataTablePage with all advanced demos, full API reference (35+ properties), 13 events, 18 CSS custom properties, 2 slots, and comprehensive accessibility documentation covering keyboard navigation and screen reader behavior.
  </done>
</task>

</tasks>

<verification>
1. DataTablePage.tsx has 11+ ExampleBlock demos covering all major features
2. PropsTable renders 35+ properties with types and defaults
3. Events table lists all 13 custom events
4. CSS custom properties table lists ~18 theming variables
5. Slots table lists toolbar-start and toolbar-end
6. Accessibility section covers ARIA roles, keyboard navigation, and screen reader support
7. PrevNextNav has correct prev/next links
8. Page total is 800+ lines
</verification>

<success_criteria>
- Developer finds complete API reference for all properties, events, and CSS custom properties
- Developer finds accessibility guide explaining keyboard navigation and ARIA behavior
- Developer sees interactive demos for all major features: column customization, editing, actions, expandable rows, server-side, export
- Documentation page is comprehensive and matches the quality of existing component pages
</success_criteria>

<output>
After completion, create `.planning/phases/68-package-cli-documentation/68-04-SUMMARY.md`
</output>
