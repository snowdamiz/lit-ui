---
phase: 68-package-cli-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/cli/src/registry/registry.json
  - packages/cli/src/templates/data-table.ts
  - packages/cli/src/templates/index.ts
  - packages/cli/src/utils/install-component.ts
autonomous: true

must_haves:
  truths:
    - "CLI registry includes data-table component with correct dependencies"
    - "Copy-source template is a starter (~200-400 lines) with CSS variable fallbacks"
    - "npm install mode maps data-table to @lit-ui/data-table"
    - "Template is registered in COMPONENT_TEMPLATES map"
  artifacts:
    - path: "packages/cli/src/registry/registry.json"
      provides: "data-table entry with files, dependencies, registryDependencies"
      contains: "data-table"
    - path: "packages/cli/src/templates/data-table.ts"
      provides: "Starter template for basic data table with sorting and CSS fallbacks"
      min_lines: 100
    - path: "packages/cli/src/templates/index.ts"
      provides: "DATA_TABLE_TEMPLATE export and COMPONENT_TEMPLATES entry"
      contains: "DATA_TABLE_TEMPLATE"
    - path: "packages/cli/src/utils/install-component.ts"
      provides: "data-table to @lit-ui/data-table mapping"
      contains: "'data-table': '@lit-ui/data-table'"
  key_links:
    - from: "packages/cli/src/templates/index.ts"
      to: "packages/cli/src/templates/data-table.ts"
      via: "import and re-export"
      pattern: "DATA_TABLE_TEMPLATE"
    - from: "packages/cli/src/registry/registry.json"
      to: "packages/cli/src/templates/data-table.ts"
      via: "component name maps to template"
      pattern: "data-table"
---

<objective>
Add the data-table component to the CLI registry and create a starter copy-source template, enabling users to `npx lit-ui add data-table` for either npm install or copy-source mode.

Purpose: Provides the CLI integration path so users can quickly scaffold a data table into their project, following the established pattern from Select (starter template for complex components).
Output: CLI registry entry, starter template file, template index mapping, npm package mapping
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@packages/cli/src/registry/registry.json
@packages/cli/src/templates/index.ts
@packages/cli/src/templates/select.ts
@packages/cli/src/utils/install-component.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CLI registry entry and npm mapping</name>
  <files>
    packages/cli/src/registry/registry.json
    packages/cli/src/utils/install-component.ts
  </files>
  <action>
**1. Add data-table entry to registry.json:**

Add to the `components` array in registry.json (alphabetical order -- after `calendar`, before `checkbox`):

```json
{
  "name": "data-table",
  "description": "High-performance data table with virtual scrolling, sorting, filtering, inline editing, and selection",
  "files": [
    { "path": "components/data-table/data-table.ts", "type": "component" }
  ],
  "dependencies": ["@tanstack/lit-table", "@tanstack/lit-virtual"],
  "registryDependencies": ["checkbox", "popover"]
}
```

Key details:
- `dependencies`: TanStack packages must be npm-installed for copy-source mode since the starter template uses them
- `registryDependencies`: checkbox and popover are used by the full version (not the starter, but declared for completeness of the dependency chain)
- Single file entry since the starter is a self-contained template

**2. Add npm mapping in install-component.ts:**

Add to the `componentToPackage` Record, maintaining alphabetical order:

```typescript
'data-table': '@lit-ui/data-table',
```

This goes after the `calendar` entry and before `date-picker`.
  </action>
  <verify>
Verify registry.json is valid JSON: `cd /Users/sn0w/Documents/dev/lit-components && node -e "JSON.parse(require('fs').readFileSync('packages/cli/src/registry/registry.json', 'utf8'))"`

Verify install-component.ts contains the mapping: `grep "data-table.*@lit-ui/data-table" packages/cli/src/utils/install-component.ts`
  </verify>
  <done>
CLI registry includes data-table with TanStack dependencies and checkbox/popover registryDependencies. npm install mode maps data-table to @lit-ui/data-table.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create starter template and register in template index</name>
  <files>
    packages/cli/src/templates/data-table.ts
    packages/cli/src/templates/index.ts
  </files>
  <action>
**1. Create packages/cli/src/templates/data-table.ts:**

Follow the Select template pattern: a simplified starter that provides basic functionality with a prominent note directing users to npm for the full version. The starter should be ~200-350 lines.

The starter template must include:
- Header comment explaining it's a starter template with note about npm for full features
- Import from lit (html, css, nothing) and decorators
- Import from TailwindElement base class
- A basic `lui-data-table` custom element that:
  - Accepts `columns` and `data` properties
  - Renders a table with header row and data rows
  - Supports single-column sorting (click header to toggle asc/desc/none)
  - Shows sort direction indicators (arrow SVGs)
  - Has striped row styling with hover
  - Uses CSS custom properties with fallbacks for theming
  - Has `aria-label` property for accessibility
  - Has `max-height` property with overflow scroll
  - Has `loading` property with basic skeleton state
  - Role="grid" with proper ARIA on rows/cells

CSS custom properties with DOUBLE fallbacks (component token -> theme token -> literal):
```css
--ui-data-table-header-bg: var(--color-muted, #f4f4f5)
--ui-data-table-row-bg: var(--color-bg, #ffffff)
--ui-data-table-row-hover-bg: var(--color-muted, #f4f4f5)
--ui-data-table-border-color: var(--color-border, #e4e4e7)
--ui-data-table-text-color: var(--color-foreground, #09090b)
--ui-data-table-header-text: var(--color-muted-foreground, #71717a)
```

Column definition type for the starter:
```typescript
export interface StarterColumnDef {
  id: string;
  header: string;
  accessorKey: string;
  sortable?: boolean;
  width?: string;
}
```

Do NOT include: virtual scrolling, filtering, pagination, inline editing, selection, column reorder, expandable rows, bulk actions. These are npm-only features.

**2. Update packages/cli/src/templates/index.ts:**

Add export and import for DATA_TABLE_TEMPLATE:

In the export section (alphabetical, after `DIALOG_TEMPLATE`):
```typescript
export { DATA_TABLE_TEMPLATE } from './data-table.js';
```

In the import section (after DIALOG_TEMPLATE import):
```typescript
import { DATA_TABLE_TEMPLATE } from './data-table.js';
```

In COMPONENT_TEMPLATES Record (after `dialog:`):
```typescript
'data-table': DATA_TABLE_TEMPLATE,
```
  </action>
  <verify>
Verify template file exists and is reasonable size (200-400 lines): `wc -l packages/cli/src/templates/data-table.ts`

Verify template compiles: `cd /Users/sn0w/Documents/dev/lit-components && npx tsc --noEmit -p packages/cli/tsconfig.json`

Verify template has CSS variable fallbacks: `grep "var(--ui-data-table" packages/cli/src/templates/data-table.ts | head -5`

Verify index.ts exports DATA_TABLE_TEMPLATE: `grep "DATA_TABLE_TEMPLATE" packages/cli/src/templates/index.ts`
  </verify>
  <done>
Starter template created with basic table rendering, single-column sorting, CSS variable fallbacks, and ARIA grid pattern. Template registered in COMPONENT_TEMPLATES map for CLI consumption.
  </done>
</task>

</tasks>

<verification>
1. registry.json is valid JSON and contains data-table entry
2. install-component.ts maps data-table to @lit-ui/data-table
3. data-table.ts template is 200-400 lines
4. Template contains CSS custom properties with fallback values
5. Template contains "starter template" header comment with npm recommendation
6. index.ts exports DATA_TABLE_TEMPLATE and maps it in COMPONENT_TEMPLATES
7. CLI package compiles: `npx tsc --noEmit -p packages/cli/tsconfig.json`
</verification>

<success_criteria>
- User can conceptually `npx lit-ui add data-table` in npm mode (maps to @lit-ui/data-table)
- User can conceptually `npx lit-ui add data-table --copy` for a starter template
- Starter template provides basic table with sorting and proper theming
- CLI TypeScript compilation passes
</success_criteria>

<output>
After completion, create `.planning/phases/68-package-cli-documentation/68-02-SUMMARY.md`
</output>
