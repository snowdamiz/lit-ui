---
phase: 68-package-cli-documentation
plan: 03
type: execute
wave: 2
depends_on: ["68-01"]
files_modified:
  - apps/docs/package.json
  - apps/docs/src/nav.ts
  - apps/docs/src/App.tsx
  - apps/docs/src/pages/components/DataTablePage.tsx
autonomous: true

must_haves:
  truths:
    - "Data Table appears in docs navigation under Components"
    - "Docs route /components/data-table renders DataTablePage"
    - "Page includes interactive demos for basic table, sorting, selection, filtering, pagination"
    - "Sample data arrays render live lui-data-table elements in demos"
  artifacts:
    - path: "apps/docs/package.json"
      provides: "Dependencies on @lit-ui/data-table (and implicitly checkbox, popover)"
      contains: "@lit-ui/data-table"
    - path: "apps/docs/src/nav.ts"
      provides: "Data Table nav item in Components section"
      contains: "Data Table"
    - path: "apps/docs/src/App.tsx"
      provides: "Route for /components/data-table"
      contains: "DataTablePage"
    - path: "apps/docs/src/pages/components/DataTablePage.tsx"
      provides: "Documentation page with header, sample data, and 5+ interactive demos"
      min_lines: 400
  key_links:
    - from: "apps/docs/src/App.tsx"
      to: "apps/docs/src/pages/components/DataTablePage.tsx"
      via: "import and Route"
      pattern: "DataTablePage"
    - from: "apps/docs/src/pages/components/DataTablePage.tsx"
      to: "@lit-ui/data-table"
      via: "side-effect import for element registration"
      pattern: "import '@lit-ui/data-table'"
---

<objective>
Create the data table documentation page with routing, navigation, and interactive demos covering the core features (basic table, sorting, selection, filtering, pagination).

Purpose: Provides the first half of the comprehensive documentation page so users can see live interactive demos of the most common data table features and learn by example.
Output: Docs routing setup, DataTablePage.tsx with header, sample data, and 5 core feature demos
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@apps/docs/package.json
@apps/docs/src/nav.ts
@apps/docs/src/App.tsx
@apps/docs/src/pages/components/AccordionPage.tsx
@apps/docs/src/pages/components/SelectPage.tsx
@packages/data-table/src/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add docs dependencies and routing</name>
  <files>
    apps/docs/package.json
    apps/docs/src/nav.ts
    apps/docs/src/App.tsx
  </files>
  <action>
**1. Update apps/docs/package.json:**

Add `@lit-ui/data-table` to dependencies (alphabetical, after `@lit-ui/core`):
```json
"@lit-ui/data-table": "workspace:*",
```

Note: @lit-ui/checkbox and @lit-ui/popover are already in the docs dependencies, so no additional packages needed for the peer dependency chain.

**2. Update apps/docs/src/nav.ts:**

Add "Data Table" to the Components section in alphabetical order (after "Calendar", before "Checkbox"):
```typescript
{ title: "Data Table", href: "/components/data-table" },
```

**3. Update apps/docs/src/App.tsx:**

Add import for DataTablePage (alphabetical, after DateRangePickerPage):
```typescript
import { DataTablePage } from './pages/components/DataTablePage'
```

Add route inside the Components routes section (after date-range-picker, before dialog):
```tsx
<Route path="components/data-table" element={<DataTablePage />} />
```
  </action>
  <verify>
Verify nav.ts has Data Table entry: `grep "Data Table" apps/docs/src/nav.ts`

Verify App.tsx has route: `grep "data-table" apps/docs/src/App.tsx`

Verify package.json has dependency: `grep "data-table" apps/docs/package.json`
  </verify>
  <done>
Data Table appears in docs navigation, has a route, and the @lit-ui/data-table dependency is declared.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create DataTablePage with core feature demos</name>
  <files>apps/docs/src/pages/components/DataTablePage.tsx</files>
  <action>
Create `apps/docs/src/pages/components/DataTablePage.tsx` following the AccordionPage/SelectPage pattern.

**Structure:**

```tsx
import { FrameworkProvider } from '../../contexts/FrameworkContext';
import { ExampleBlock } from '../../components/ExampleBlock';
import { PropsTable, type PropDef } from '../../components/PropsTable';
import { SlotsTable, type SlotDef } from '../../components/SlotsTable';
import { PrevNextNav } from '../../components/PrevNextNav';
import { CodeBlock } from '../../components/CodeBlock';
import { useEffect, useRef } from 'react';

// Side-effect import to register custom elements
import '@lit-ui/data-table';
```

**Sample Data (define at module level):**

Create a `sampleUsers` array with ~10 rows:
```typescript
const sampleUsers = [
  { id: 1, name: 'Alice Johnson', email: 'alice@example.com', role: 'Admin', status: 'Active', age: 32, joined: '2024-01-15' },
  { id: 2, name: 'Bob Smith', email: 'bob@example.com', role: 'Editor', status: 'Active', age: 28, joined: '2024-02-20' },
  { id: 3, name: 'Carol Williams', email: 'carol@example.com', role: 'Viewer', status: 'Inactive', age: 45, joined: '2023-11-05' },
  { id: 4, name: 'David Brown', email: 'david@example.com', role: 'Editor', status: 'Active', age: 35, joined: '2024-03-10' },
  { id: 5, name: 'Eve Davis', email: 'eve@example.com', role: 'Admin', status: 'Active', age: 29, joined: '2024-04-01' },
  { id: 6, name: 'Frank Miller', email: 'frank@example.com', role: 'Viewer', status: 'Pending', age: 41, joined: '2024-05-12' },
  { id: 7, name: 'Grace Wilson', email: 'grace@example.com', role: 'Editor', status: 'Active', age: 33, joined: '2024-06-18' },
  { id: 8, name: 'Henry Taylor', email: 'henry@example.com', role: 'Viewer', status: 'Inactive', age: 52, joined: '2023-09-22' },
];
```

**Column Definitions (also module level):**

```typescript
const basicColumns = [
  { accessorKey: 'name', header: 'Name' },
  { accessorKey: 'email', header: 'Email' },
  { accessorKey: 'role', header: 'Role' },
  { accessorKey: 'status', header: 'Status' },
];
```

**Helper Component Pattern:**

Since `lui-data-table` needs JavaScript properties (`.columns`, `.data`) that can't be set via JSX attributes directly, create a small React wrapper component for demos:

```tsx
function DataTableDemo({ columns, data, ...props }: { columns: any[]; data: any[]; [key: string]: any }) {
  const ref = useRef<HTMLElement>(null);

  useEffect(() => {
    if (ref.current) {
      (ref.current as any).columns = columns;
      (ref.current as any).data = data;
      // Set any additional complex properties
      Object.entries(props).forEach(([key, value]) => {
        if (typeof value === 'object' || typeof value === 'function') {
          (ref.current as any)[key] = value;
        }
      });
    }
  }, [columns, data, props]);

  // Build simple attribute props (strings, booleans, numbers)
  const attrs: Record<string, any> = {};
  Object.entries(props).forEach(([key, value]) => {
    if (typeof value !== 'object' && typeof value !== 'function') {
      attrs[key] = value;
    }
  });

  return <lui-data-table ref={ref} {...attrs} />;
}
```

**Page Content - Include these sections in order:**

1. **Header** (matches AccordionPage pattern):
   - Title: "Data Table"
   - Description: "A high-performance data table for admin dashboards with virtual scrolling for 100K+ rows, sorting, filtering, pagination, inline editing, selection with bulk actions, column customization, and CSV export."
   - Installation badges: npm and CLI install commands

2. **Basic Table Demo:**
   - Title: "Basic Table"
   - Description: "Render a table by providing column definitions and data array."
   - Live demo using DataTableDemo with basicColumns and sampleUsers
   - Code tab showing the Lit HTML usage:
     ```html
     <lui-data-table
       .columns=${columns}
       .data=${data}
       aria-label="Users table"
     ></lui-data-table>
     ```

3. **Sorting Demo:**
   - Title: "Sorting"
   - Description: "Click column headers to sort. Shift+click for multi-column sort."
   - Live demo with sortable columns (use `enableSorting: true` in column defs)
   - Code tab showing sorting setup

4. **Selection Demo:**
   - Title: "Row Selection"
   - Description: "Enable row selection with checkboxes. Use Shift+click for range selection."
   - Live demo with `enable-selection` attribute
   - Code tab showing selection setup and listening to `ui-selection-change`

5. **Filtering Demo:**
   - Title: "Filtering"
   - Description: "Filter data per-column or globally. Supports text, number, date, and select filter types."
   - Live demo with filterable columns (meta.filterType in column defs)
   - Code tab showing filter configuration

6. **Pagination Demo:**
   - Title: "Pagination"
   - Description: "Paginate through large datasets with configurable page sizes."
   - Live demo with pagination property set
   - Code tab showing pagination setup

Each demo section uses `ExampleBlock` with preview and code tabs matching the existing pattern. The preview shows a live `<lui-data-table>` rendered via the DataTableDemo wrapper. The code tab shows the Lit HTML usage (not the React wrapper).

**Important implementation notes:**
- Each demo uses the `DataTableDemo` wrapper to set complex properties via refs
- Sort columns are set via TanStack column defs with `enableSorting: true` (default)
- Selection uses `enable-selection` attribute
- Filtering needs column defs with `meta: { filterType: 'text' }` etc.
- Pagination needs `pagination` object property
- The page should end with a placeholder comment `{/* API Reference, Accessibility, and Advanced Demos - continued in Plan 04 */}` for the continuation
- Use `PrevNextNav` at the bottom with prev="Date Range Picker" and next="Dialog"
  </action>
  <verify>
Verify the file exists and has reasonable size: `wc -l apps/docs/src/pages/components/DataTablePage.tsx`

Verify it imports @lit-ui/data-table: `grep "import '@lit-ui/data-table'" apps/docs/src/pages/components/DataTablePage.tsx`

Verify it exports DataTablePage: `grep "export function DataTablePage" apps/docs/src/pages/components/DataTablePage.tsx`

Verify it has at least 5 demo sections: `grep -c "ExampleBlock" apps/docs/src/pages/components/DataTablePage.tsx`

Verify docs app compiles: `cd /Users/sn0w/Documents/dev/lit-components && npx tsc -b apps/docs/tsconfig.json --noEmit` (if this errors due to missing build artifacts, skip -- the build verification is best done with `pnpm build`)
  </verify>
  <done>
DataTablePage.tsx created with header, sample data, DataTableDemo wrapper, and 5 interactive demos (basic, sorting, selection, filtering, pagination). Page follows established AccordionPage/SelectPage patterns.
  </done>
</task>

</tasks>

<verification>
1. apps/docs/package.json includes @lit-ui/data-table dependency
2. nav.ts has "Data Table" in Components section
3. App.tsx has import and route for DataTablePage
4. DataTablePage.tsx exists with 5+ ExampleBlock demos
5. Page imports @lit-ui/data-table for element registration
6. DataTableDemo wrapper uses refs to set complex properties
7. Each demo has both preview and code tab content
</verification>

<success_criteria>
- User navigating to /components/data-table sees the documentation page
- Page shows live interactive demos for basic table, sorting, selection, filtering, pagination
- Each demo has code examples showing Lit HTML usage patterns
- Page follows established documentation page conventions (header, ExampleBlock, PrevNextNav)
</success_criteria>

<output>
After completion, create `.planning/phases/68-package-cli-documentation/68-03-SUMMARY.md`
</output>
