---
phase: 88-package-foundation-basechartelement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/charts/package.json
  - packages/charts/tsconfig.json
  - packages/charts/vite.config.ts
  - packages/charts/src/vite-env.d.ts
autonomous: true
requirements:
  - INFRA-01

must_haves:
  truths:
    - "packages/charts/ exists with valid package.json exporting @lit-ui/charts"
    - "pnpm install runs without errors in the monorepo root"
    - "vite build runs in packages/charts/ without TypeScript errors"
  artifacts:
    - path: "packages/charts/package.json"
      provides: "@lit-ui/charts package manifest"
      contains: "\"name\": \"@lit-ui/charts\""
    - path: "packages/charts/tsconfig.json"
      provides: "TypeScript config extending @lit-ui/typescript-config/library.json"
      contains: "\"extends\": \"@lit-ui/typescript-config/library.json\""
    - path: "packages/charts/vite.config.ts"
      provides: "Vite build config"
      contains: "createLibraryConfig"
  key_links:
    - from: "packages/charts/tsconfig.json"
      to: "@lit-ui/typescript-config/library.json"
      via: "extends"
      pattern: "extends.*typescript-config"
    - from: "packages/charts/vite.config.ts"
      to: "@lit-ui/vite-config/library"
      via: "createLibraryConfig import"
      pattern: "createLibraryConfig"
---

<objective>
Scaffold the @lit-ui/charts package — create the directory structure, package.json manifest, TypeScript config, and Vite build config, then install dependencies.

Purpose: Every subsequent plan in Phase 88 needs a compilable package to write files into. This is the foundation.
Output: packages/charts/ directory with build tooling ready to run.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/88-package-foundation-basechartelement/88-RESEARCH.md

<interfaces>
<!-- Key patterns extracted from existing packages. Executor uses these directly. -->

From packages/data-table/package.json (canonical pattern):
```json
{
  "name": "@lit-ui/data-table",
  "type": "module",
  "main": "dist/index.js",
  "module": "dist/index.js",
  "types": "dist/index.d.ts",
  "exports": { ".": { "import": "./dist/index.js", "types": "./dist/index.d.ts" } },
  "files": ["dist"],
  "sideEffects": true,
  "scripts": { "dev": "vite build --watch", "build": "vite build" },
  "devDependencies": {
    "@lit-ui/core": "workspace:*",
    "@lit-ui/typescript-config": "workspace:*",
    "@lit-ui/vite-config": "workspace:*",
    "@tailwindcss/vite": "^4.1.18",
    "lit": "^3.3.2",
    "tailwindcss": "^4.1.18",
    "typescript": "^5.9.3",
    "vite": "^7.3.1",
    "vite-plugin-dts": "^4.5.4"
  }
}
```

From packages/data-table/tsconfig.json (canonical pattern):
```json
{
  "extends": "@lit-ui/typescript-config/library.json",
  "compilerOptions": { "outDir": "./dist", "rootDir": "./src", "baseUrl": "." },
  "include": ["src"]
}
```

From packages/vite-config/library.js:
```js
export function createLibraryConfig(options = {}) { /* entry: 'src/index.ts' */ }
// Externals: ['lit', /^lit\//, /^@lit\//, /^@lit-ui\//]
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package scaffold files</name>
  <files>
    packages/charts/package.json
    packages/charts/tsconfig.json
    packages/charts/vite.config.ts
    packages/charts/src/vite-env.d.ts
  </files>
  <action>
    Create the packages/charts/ directory structure mirroring @lit-ui/data-table exactly.

    **packages/charts/package.json:**
    ```json
    {
      "name": "@lit-ui/charts",
      "version": "1.0.0",
      "description": "High-performance chart components with WebGL rendering, real-time streaming, and CSS token theming built with Lit and ECharts",
      "author": "",
      "license": "MIT",
      "type": "module",
      "main": "dist/index.js",
      "module": "dist/index.js",
      "types": "dist/index.d.ts",
      "exports": {
        ".": {
          "import": "./dist/index.js",
          "types": "./dist/index.d.ts"
        }
      },
      "files": ["dist"],
      "sideEffects": true,
      "scripts": {
        "dev": "vite build --watch",
        "build": "vite build"
      },
      "dependencies": {
        "echarts": "^5.6.0",
        "echarts-gl": "^2.0.9"
      },
      "peerDependencies": {
        "lit": "^3.0.0",
        "@lit-ui/core": "^1.0.0"
      },
      "devDependencies": {
        "@lit-ui/core": "workspace:*",
        "@lit-ui/typescript-config": "workspace:*",
        "@lit-ui/vite-config": "workspace:*",
        "@tailwindcss/vite": "^4.1.18",
        "lit": "^3.3.2",
        "tailwindcss": "^4.1.18",
        "typescript": "^5.9.3",
        "vite": "^7.3.1",
        "vite-plugin-dts": "^4.5.4"
      }
    }
    ```

    NOTE on echarts version: Pin echarts to ^5.6.0 (NOT 6.x). echarts-gl 2.0.9 peerDep is "echarts": "^5.1.2" with no 6.x release. Pin echarts-gl to ^2.0.9.

    NOTE on echarts bundling: echarts and echarts-gl are in `dependencies` (not peerDependencies) — same pattern as @tanstack packages in data-table. They are implementation details bundled with the package.

    **packages/charts/tsconfig.json:**
    ```json
    {
      "extends": "@lit-ui/typescript-config/library.json",
      "compilerOptions": {
        "outDir": "./dist",
        "rootDir": "./src",
        "baseUrl": "."
      },
      "include": ["src"]
    }
    ```

    **packages/charts/vite.config.ts:**
    ```typescript
    import { createLibraryConfig } from '@lit-ui/vite-config/library';

    export default createLibraryConfig({
      entry: 'src/index.ts'
    });
    ```

    **packages/charts/src/vite-env.d.ts:**
    ```typescript
    /// <reference types="vite/client" />
    ```

    Also create an empty placeholder `packages/charts/src/index.ts` with just a comment so TypeScript doesn't complain about an empty entry:
    ```typescript
    // @lit-ui/charts — exports populated in Phase 88 Plan 03
    ```
  </action>
  <verify>
    <automated>ls /Users/sn0w/Documents/dev/lit-components/packages/charts/package.json /Users/sn0w/Documents/dev/lit-components/packages/charts/tsconfig.json /Users/sn0w/Documents/dev/lit-components/packages/charts/vite.config.ts /Users/sn0w/Documents/dev/lit-components/packages/charts/src/vite-env.d.ts</automated>
  </verify>
  <done>All 4 files exist with correct content. package.json has echarts ^5.6.0 and echarts-gl ^2.0.9 in dependencies. tsconfig.json extends @lit-ui/typescript-config/library.json.</done>
</task>

<task type="auto">
  <name>Task 2: Install dependencies and verify build</name>
  <files>
    pnpm-lock.yaml
  </files>
  <action>
    From the monorepo root, run pnpm install to install the new package's dependencies and link workspace packages.

    ```bash
    cd /Users/sn0w/Documents/dev/lit-components && pnpm install
    ```

    After install succeeds, verify the build compiles (it will succeed even with the placeholder index.ts):

    ```bash
    cd /Users/sn0w/Documents/dev/lit-components/packages/charts && pnpm build
    ```

    Expected: Build succeeds, dist/index.js and dist/index.d.ts are created.

    If build fails with "Cannot find module '@lit-ui/vite-config/library'" — check that vite.config.ts import matches the actual export name. Look at packages/vite-config/package.json exports field to confirm the exact import path.

    If echarts-gl install fails version resolution — check if pnpm requires `overrides` in root package.json to force echarts@5.6.0 when echarts-gl resolution sees a conflict. Add to root pnpm-workspace.yaml or root package.json `overrides` field only if needed.
  </action>
  <verify>
    <automated>ls /Users/sn0w/Documents/dev/lit-components/packages/charts/dist/index.js 2>/dev/null && echo "BUILD_OK" || echo "BUILD_MISSING"</automated>
  </verify>
  <done>pnpm install completes without errors. pnpm build in packages/charts/ produces dist/index.js. @lit-ui/charts can be imported as a workspace package.</done>
</task>

</tasks>

<verification>
1. `packages/charts/package.json` has name `@lit-ui/charts`, echarts `^5.6.0`, echarts-gl `^2.0.9` in dependencies
2. `packages/charts/tsconfig.json` extends `@lit-ui/typescript-config/library.json`
3. `packages/charts/vite.config.ts` uses `createLibraryConfig({ entry: 'src/index.ts' })`
4. `pnpm install` from monorepo root succeeds
5. `pnpm build` from `packages/charts/` produces `dist/index.js`
</verification>

<success_criteria>
Developer can add `"@lit-ui/charts": "workspace:*"` to any other package's devDependencies and import from it. The package builds cleanly with the placeholder entry. All subsequent Phase 88 plans have a valid package directory to write source files into.
</success_criteria>

<output>
After completion, create `.planning/phases/88-package-foundation-basechartelement/88-01-SUMMARY.md`
</output>
