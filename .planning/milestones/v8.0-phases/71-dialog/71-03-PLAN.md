---
phase: 71-dialog
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/dialog/SKILL.md
autonomous: true
requirements: [DLG-03]

must_haves:
  truths:
    - "Skill CSS Properties table uses --ui-dialog-* prefix (not --lui-dialog-*)"
    - "Skill file includes a Behavior Notes section documenting focus trapping, close reasons, and accessibility semantics"
    - "All token names in the skill file match exactly what is in tailwind.css :root"
  artifacts:
    - path: "skill/skills/dialog/SKILL.md"
      provides: "Accurate dialog skill reference for AI agents"
      contains: "--ui-dialog-radius"
  key_links:
    - from: "skill/skills/dialog/SKILL.md (CSS Custom Properties table)"
      to: "packages/core/src/styles/tailwind.css (:root --ui-dialog-* tokens)"
      via: "CSS property names must match tailwind.css token names exactly"
      pattern: "ui-dialog-radius"
---

<objective>
Rewrite skill/skills/dialog/SKILL.md with accurate v8.0 content: correct --ui-dialog-* CSS token names and a Behavior Notes section documenting accessibility semantics.

Purpose: The skill file documents --lui-dialog-radius, --lui-dialog-shadow, --lui-dialog-padding (old --lui- prefix, only 3 tokens). The actual token prefix is --ui-dialog-*. The file also lacks a Behavior Notes section documenting the focus-trapping behavior, close event reasons, and accessibility semantics — the same pattern established for the button skill in Phase 70-03.

Output: SKILL.md updated with correct --ui-dialog-* token names, expanded CSS properties table (~10-12 entries), and a Behavior Notes section covering native dialog focus trapping, close reasons, and dismissible behavior.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/69-theme-foundation/THEME-SPEC.md
@.planning/phases/70-button/70-03-SUMMARY.md

<interfaces>
<!-- Current state of skill/skills/dialog/SKILL.md — these sections need updating -->

Current CSS Custom Properties table (WRONG — old --lui- prefix, only 3 tokens):
```markdown
## CSS Custom Properties

| Property | Default | Description |
|----------|---------|-------------|
| `--lui-dialog-radius` | `var(--radius-lg)` | Border radius of the dialog content. |
| `--lui-dialog-shadow` | `var(--shadow-lg)` | Box shadow of the dialog content. |
| `--lui-dialog-padding` | `var(--spacing-6)` | Inner padding of the dialog content. |
```

Actual tokens in tailwind.css :root (from THEME-SPEC.md — use these exact names and values):
Layout: --ui-dialog-radius (0.5rem), --ui-dialog-shadow (0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)), --ui-dialog-padding (1.5rem), --ui-dialog-max-width-sm (24rem), --ui-dialog-max-width-md (28rem), --ui-dialog-max-width-lg (32rem)
Colors: --ui-dialog-bg (var(--color-card, var(--ui-color-card))), --ui-dialog-text (var(--color-card-foreground, var(--ui-color-card-foreground))), --ui-dialog-backdrop (rgba(0,0,0,0.5))
Typography: --ui-dialog-title-size (1.125rem), --ui-dialog-title-weight (600), --ui-dialog-body-color (var(--color-muted-foreground, var(--ui-color-muted-foreground)))
Spacing: --ui-dialog-header-margin (1rem), --ui-dialog-footer-margin (1.5rem), --ui-dialog-footer-gap (0.75rem)

Dialog behavioral facts (from dialog.ts):
- Uses native <dialog> element with showModal() — provides automatic focus trapping and top-layer rendering
- Close event fires with { reason: 'escape' | 'backdrop' | 'programmatic' }
- dismissible=false prevents Escape key and backdrop click from closing (only programmatic close works)
- showCloseButton adds an X button in top-right corner
- show() method stores the triggering element and restores focus on close
- dialog-class attribute passes Tailwind classes to the content container (not the outer dialog element)
- Nested dialogs supported via browser's top-layer stack
- @starting-style + transition-behavior: allow-discrete provides enter/exit animations
- SSR compatible (isServer guards in place)
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite skill/skills/dialog/SKILL.md with accurate v8.0 content</name>
  <files>skill/skills/dialog/SKILL.md</files>
  <action>
Rewrite skill/skills/dialog/SKILL.md completely. Keep the same overall section structure (Usage, Props, Slots, Events, CSS Custom Properties, CSS Parts) but make these specific changes:

**1. CSS Custom Properties table:** Replace the 3-entry --lui-* table with a comprehensive --ui-dialog-* table covering layout, color, typography, and spacing. Use exact token names from tailwind.css :root. Aim for ~10-12 high-value entries:

```markdown
## CSS Custom Properties

| Property | Default | Description |
|----------|---------|-------------|
| `--ui-dialog-radius` | `0.5rem` | Border radius of the dialog content panel. |
| `--ui-dialog-shadow` | `0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)` | Box shadow of the dialog content panel. |
| `--ui-dialog-padding` | `1.5rem` | Inner padding of the dialog content panel. |
| `--ui-dialog-max-width-sm` | `24rem` | Max-width for size="sm". |
| `--ui-dialog-max-width-md` | `28rem` | Max-width for size="md". |
| `--ui-dialog-max-width-lg` | `32rem` | Max-width for size="lg". |
| `--ui-dialog-bg` | `var(--color-card, var(--ui-color-card))` | Background color of the dialog content panel. |
| `--ui-dialog-backdrop` | `rgba(0, 0, 0, 0.5)` | Color of the backdrop overlay. |
| `--ui-dialog-title-size` | `1.125rem` | Font size of the dialog title. |
| `--ui-dialog-title-weight` | `600` | Font weight of the dialog title. |
| `--ui-dialog-body-color` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Text color of the dialog body. |
| `--ui-dialog-footer-gap` | `0.75rem` | Gap between buttons in the footer. |
```

**2. Behavior Notes section:** Add a new section after CSS Parts documenting the dialog's behavioral semantics. Place it at the end of the file:

```markdown
## Behavior Notes

- **Focus trapping**: Uses native `showModal()` — the browser automatically traps focus inside the dialog and places it in the top layer. No custom focus trap needed.
- **Close reasons**: The `close` event fires with `{ reason: 'escape' | 'backdrop' | 'programmatic' }` so consumers can distinguish how the dialog was dismissed.
- **dismissible=false**: When set, Escape key and backdrop clicks are blocked. Only `dialog.close()` or setting `open=false` will close the dialog.
- **Focus restoration**: `show()` captures the active element and restores focus to it after the dialog closes. Call `show()` instead of setting `open=true` directly when focus restoration matters.
- **dialog-class**: Passes Tailwind classes to the inner `.dialog-content` div (the visible panel), not the outer `<dialog>` element. Use this for per-instance width overrides like `dialog-class="max-w-2xl"`.
- **Nested dialogs**: Supported natively via the browser's top-layer stack. Use `@close=${(e) => e.stopPropagation()}` on the inner dialog to prevent its close event from bubbling to the parent.
- **Animations**: Enter/exit uses `@starting-style` + `transition-behavior: allow-discrete` — modern CSS with no JavaScript required. Reduced motion is respected (`prefers-reduced-motion: reduce` sets `transition: none`).
```

**3. Existing props/slots/events/CSS parts tables:** These are accurate. Preserve them exactly as-is. Do NOT change usage examples, the frontmatter, or the section headings.
  </action>
  <verify>
    <automated>grep -c "lui-dialog" /Users/sn0w/Documents/dev/lit-components/skill/skills/dialog/SKILL.md</automated>
  </verify>
  <done>Running the grep command returns 0. The SKILL.md CSS Custom Properties table uses --ui-dialog-* names. A "Behavior Notes" section exists at the end of the file. All props/slots/events/CSS parts tables remain intact.</done>
</task>

</tasks>

<verification>
1. Run: `grep "lui-dialog" skill/skills/dialog/SKILL.md` — should return no matches
2. Run: `grep "ui-dialog-radius" skill/skills/dialog/SKILL.md` — should show the token in the CSS table
3. Run: `grep "Behavior Notes" skill/skills/dialog/SKILL.md` — should confirm the section exists
4. Run: `grep -c "ui-dialog" skill/skills/dialog/SKILL.md` — should be > 5 (multiple token entries)
</verification>

<success_criteria>
- No --lui-dialog-* references remain in SKILL.md
- CSS Custom Properties table documents ~12 layout, color, typography, and spacing tokens using --ui-dialog-* names with accurate default values from tailwind.css :root
- A Behavior Notes section exists documenting focus trapping, close reasons, dismissible behavior, focus restoration, dialog-class passthrough, nested dialogs, and animation approach
- DLG-03 satisfied: skill/skills/dialog skill file is accurate and up-to-date for AI agent use
</success_criteria>

<output>
After completion, create `.planning/phases/71-dialog/71-03-SUMMARY.md` with what changed and why (old --lui- prefix → correct --ui- prefix, expanded token table, added Behavior Notes section).
</output>
