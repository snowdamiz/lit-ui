---
phase: 73-textarea
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/textarea/SKILL.md
autonomous: true
requirements: [TXT-03]

must_haves:
  truths:
    - "Textarea SKILL.md has a Behavior Notes section with 8 entries covering key textarea-specific behaviors"
    - "CSS Custom Properties table has 16 entries with accurate default values from tailwind.css :root"
    - "CSS token prefix is --ui-input-* (matching what textarea.ts actually uses)"
  artifacts:
    - path: "skill/skills/textarea/SKILL.md"
      provides: "Accurate Textarea skill file for agent use"
      contains: "Behavior Notes"
  key_links:
    - from: "skill/skills/textarea/SKILL.md (CSS Custom Properties)"
      to: "packages/core/src/styles/tailwind.css (:root --ui-input-* block)"
      via: "CSS token names and default values in the skill reference table"
      pattern: "--ui-input-radius.*0\\.375rem"
---

<objective>
Rewrite skill/skills/textarea/SKILL.md to add a Behavior Notes section and expand the CSS Custom Properties table from 7 to 16 entries with accurate default values.

Purpose: The textarea SKILL.md currently lacks a Behavior Notes section and documents only 7 CSS tokens with stale default values. The pattern established in Phase 70-03 (Button), Phase 71-03 (Dialog), and Phase 72-03 (Input) adds Behavior Notes and expands the token table. This update follows the same pattern for Textarea.

Output: Updated SKILL.md with 8 Behavior Notes entries and 16 CSS custom property tokens. Token prefix remains --ui-input-* (correct — textarea.ts uses the same token namespace as Input).
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/72-input/72-03-SUMMARY.md

<interfaces>
<!-- Full replacement content for skill/skills/textarea/SKILL.md -->

Target SKILL.md structure:

```markdown
---
name: lit-ui-textarea
description: >-
  How to use <lui-textarea> — props, slots, events, CSS tokens, examples.
---

# Textarea

## Usage

[existing usage examples — keep as-is]

## Props

[existing props table — keep as-is, all 18 props are accurate]

## Slots

No slots. All content is via properties.

## Events

No custom events. Use standard DOM events (`input`, `change`, `focus`, `blur`).

## Behavior Notes

- **Auto-resize**: When `autoresize` is set, the textarea grows to fit content on each `input` event. Resize handle is hidden (`resize: none`). Height is calculated from `scrollHeight` and clamped to the initial `rows` minimum and `max-rows` / `max-height` maximum.
- **Max height constraints**: `max-height` (CSS value, e.g. "200px") takes precedence over `max-rows`. When the constraint is reached, `overflow-y: auto` is set so the user can scroll.
- **Validation timing**: Error state shows only after the user has blurred the textarea (touched state). Subsequent input re-validates on each keystroke. Error message sourced from native `validationMessage` (required, minlength, maxlength).
- **Form participation**: ElementInternals (client-side only, SSR-guarded). `required`, `minlength`, `maxlength` participate in native form validation. `formResetCallback` clears value, resets touched state, and adjusts height if autoresize is active.
- **Character counter**: `show-count` with `maxlength` displays a live "current/max" count inside the textarea bottom-right corner (e.g., "45/200"). Extra bottom padding (`padding-bottom: 1.75rem`) is added automatically via the `has-counter` CSS class to prevent text overlap.
- **Disabled vs readonly**: `disabled` prevents all interaction and sets `pointer-events: none` on the host. `readonly` allows text selection/copy but not editing. Both states visually indicated via background and cursor styles.
- **Focus ring**: `outline: 2px solid var(--ui-focus-ring-color, var(--ui-textarea-ring))` with `outline-offset: 2px` on the native `textarea:focus` — applied directly to the textarea element (not a wrapper container).
- **Required indicator**: When `required` is set, the label shows either an asterisk (`*`) or the text `(required)` depending on `required-indicator`. The required state participates in native form validation via ElementInternals.

## CSS Custom Properties

[16-entry table — see below]

## CSS Parts

[existing parts table — keep as-is]
```

Behavior Notes section — 8 entries covering:
1. Auto-resize behavior (grow on input, height calculation)
2. Max height constraint precedence (max-height > max-rows)
3. Validation timing (touched → blur → on each keystroke)
4. Form participation (ElementInternals, SSR guard, formResetCallback)
5. Character counter (show-count + maxlength, positioning, has-counter class)
6. Disabled vs readonly distinction
7. Focus ring implementation (outline on textarea:focus, --ui-textarea-ring)
8. Required indicator variants (asterisk vs text)

CSS Custom Properties table — 16 entries:
| Property | Default | Description |
|----------|---------|-------------|
| `--ui-input-radius` | `0.375rem` | Border radius of the textarea. |
| `--ui-input-border-width` | `1px` | Border width of the textarea. |
| `--ui-input-transition` | `150ms` | Transition duration for border-color and box-shadow. |
| `--ui-input-font-size-sm` | `0.875rem` | Font size for size="sm". |
| `--ui-input-font-size-md` | `1rem` | Font size for size="md". |
| `--ui-input-font-size-lg` | `1.125rem` | Font size for size="lg". |
| `--ui-input-padding-x-md` | `1rem` | Horizontal padding for size="md". |
| `--ui-input-padding-y-md` | `0.5rem` | Vertical padding for size="md". |
| `--ui-input-bg` | `var(--color-background, white)` | Background color of the textarea. |
| `--ui-input-text` | `var(--color-foreground, ...)` | Text color of the textarea. |
| `--ui-input-border` | `var(--color-border, ...)` | Border color (default state). |
| `--ui-input-placeholder` | `var(--color-muted-foreground, ...)` | Placeholder text color. |
| `--ui-input-border-focus` | `var(--color-ring, ...)` | Border color on focus. |
| `--ui-input-border-error` | `var(--color-destructive, ...)` | Border color on validation error. |
| `--ui-input-bg-disabled` | `var(--color-muted, ...)` | Background color when disabled. |
| `--ui-input-text-disabled` | `var(--color-muted-foreground, ...)` | Text color when disabled. |

Key notes for the executor:
- Token prefix is --ui-input-* (NOT --ui-textarea-*) — textarea.ts reuses the input token namespace
- Default values for layout tokens use exact values (0.375rem not var(--radius-md)) for accuracy
- The existing props table (18 rows) is correct and should NOT be changed
- The existing CSS Parts table (6 parts: wrapper, label, helper, textarea, counter, error) is correct and should NOT be changed
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite skill/skills/textarea/SKILL.md with Behavior Notes and expanded CSS tokens</name>
  <files>skill/skills/textarea/SKILL.md</files>
  <action>
Rewrite skill/skills/textarea/SKILL.md with the following changes:

1. **Add Behavior Notes section** (insert between Events and CSS Custom Properties sections) with 8 entries as specified in the interfaces section:
   - Auto-resize (grow on input, height calculation from scrollHeight, clamped to rows min / max-rows or max-height max)
   - Max height constraints (max-height CSS value takes precedence over max-rows; scroll after limit)
   - Validation timing (blur → touched → error shows; re-validates on each keystroke)
   - Form participation (ElementInternals client-side only, SSR-guarded; formResetCallback clears value and resets height)
   - Character counter (show-count + maxlength; live count bottom-right; has-counter class adds bottom padding)
   - Disabled vs readonly (pointer-events: none on host for disabled; readonly allows selection)
   - Focus ring (outline: 2px on textarea:focus directly, using --ui-textarea-ring token)
   - Required indicator (asterisk or text via required-indicator prop; participates in form validation)

2. **Replace CSS Custom Properties table** (currently 7 entries) with the 16-entry table from the interfaces section above.
   - Use --ui-input-* prefix (correct — textarea.ts uses input token namespace)
   - Layout tokens use exact values (0.375rem, 1px, 150ms) not var() aliases
   - Color tokens use var() references with fallback notation

3. **Keep unchanged**: frontmatter, Usage section, Props table (18 rows), Slots section, Events section, CSS Parts table.

The result should follow the same structure as the updated input SKILL.md from Phase 72-03.
  </action>
  <verify>
    <automated>grep -c "Behavior Notes\|--ui-input-radius\|--ui-input-bg-disabled" /Users/sn0w/Documents/dev/lit-components/skill/skills/textarea/SKILL.md</automated>
  </verify>
  <done>SKILL.md contains "Behavior Notes" section header, "--ui-input-radius" entry with "0.375rem" default, and "--ui-input-bg-disabled" entry. Running `grep -c "| \`--ui-input-" skill/skills/textarea/SKILL.md` outputs `16`.</done>
</task>

</tasks>

<verification>
1. Run: `grep -c "| \`--ui-input-" skill/skills/textarea/SKILL.md` — should output `16`
2. Run: `grep "Behavior Notes" skill/skills/textarea/SKILL.md` — should find the section header
3. Run: `grep "ui-input-radius" skill/skills/textarea/SKILL.md` — should show `0.375rem` as default (not `var(--radius-md)`)
4. Run: `grep "ui-input-bg-disabled\|ui-input-text-disabled" skill/skills/textarea/SKILL.md` — should find both entries
</verification>

<success_criteria>
- SKILL.md has Behavior Notes section with 8 entries covering textarea-specific behaviors
- CSS Custom Properties table has 16 entries with accurate default values
- Token prefix is --ui-input-* (matching textarea.ts implementation)
- TXT-03 satisfied: skill/skills/textarea skill file is accurate and up-to-date
</success_criteria>

<output>
After completion, create `.planning/phases/73-textarea/73-03-SUMMARY.md` with what was changed, the Behavior Notes entries added, and the CSS token count before/after.
</output>
