---
phase: 83-popover
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/styles/tailwind.css
autonomous: true
requirements:
  - POP-01

must_haves:
  truths:
    - "Popover renders with correct card/border colors in dark mode via semantic cascade (no hardcoded gray values)"
    - "The .dark block in tailwind.css no longer contains --ui-popover-bg, --ui-popover-text, or --ui-popover-border"
  artifacts:
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Popover token defaults in :root; popover .dark declarations removed"
      contains: "--ui-popover-bg: var(--color-card, var(--ui-color-card))"
  key_links:
    - from: "packages/core/src/styles/tailwind.css (.dark block)"
      to: "popover component dark mode appearance"
      via: "semantic cascade: .dark --color-card cascades into --ui-popover-bg"
      pattern: "Remove 3 hardcoded --ui-popover-* declarations from .dark block"
---

<objective>
Remove the 3 hardcoded popover dark mode overrides from the `.dark` block in `tailwind.css`. The `:root` block already uses double-fallback semantic card tokens which cascade correctly in dark mode — the explicit `.dark` overrides are redundant and lock in gray literal values.

Purpose: Popover dark mode should cascade automatically via `.dark --color-card` and `.dark --color-border` semantic tokens, exactly as established in Phases 70-82.
Output: `tailwind.css` with 3 fewer lines under the `.dark` block (the popover gray overrides and their comment).
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key context the executor needs. -->

From packages/core/src/styles/tailwind.css :root block (lines ~775-788):
```css
/* Popover Component */
--ui-popover-bg: var(--color-card, var(--ui-color-card));
--ui-popover-text: var(--color-card-foreground, var(--ui-color-card-foreground));
--ui-popover-border: var(--color-border, var(--ui-color-border));
--ui-popover-radius: 0.5rem;
--ui-popover-padding: 1rem;
--ui-popover-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08);
--ui-popover-arrow-size: 8px;
--ui-popover-max-width: 20rem;
--ui-popover-z-index: 45;
```

From packages/core/src/styles/tailwind.css .dark block (lines ~207-209) — THESE ARE TO BE REMOVED:
```css
  /* Popover dark mode */
  --ui-popover-bg: var(--color-gray-900);
  --ui-popover-text: var(--color-gray-50);
  --ui-popover-border: var(--color-gray-800);
```

The .dark block also sets --color-card: var(--color-gray-900) and --color-card-foreground: var(--color-gray-50)
and --color-border: var(--color-gray-800) — so the :root double-fallback cascade is sufficient.

Established pattern: Same removal was done for button (Phase 70-01), dialog (71-01), input (72-01),
textarea (73-01), select (74-01), checkbox (75-01), radio (76-01), switch (77-01), calendar (78-01),
date-picker (79-01), date-range-picker (80-01), time-picker (81-01), tooltip (82-01).
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove hardcoded popover dark mode declarations from .dark block</name>
  <files>packages/core/src/styles/tailwind.css</files>
  <action>
    In `packages/core/src/styles/tailwind.css`, locate the `.dark` block. Find and remove exactly these 4 lines (comment + 3 declarations):

    ```
      /* Popover dark mode */
      --ui-popover-bg: var(--color-gray-900);
      --ui-popover-text: var(--color-gray-50);
      --ui-popover-border: var(--color-gray-800);
    ```

    Do NOT touch the `:root` block popover tokens — they are correct and must stay as-is.
    Do NOT touch any other component's dark mode declarations.

    The removal is correct because:
    - `:root` already defines `--ui-popover-bg: var(--color-card, var(--ui-color-card))`
    - `.dark` overrides `--color-card: var(--color-gray-900)` (semantic cascade)
    - Therefore `--ui-popover-bg` cascades to `var(--color-gray-900)` in dark mode automatically
    - Same logic applies for text (card-foreground) and border tokens

    After removal, verify the .dark block no longer contains any `--ui-popover-*` declarations.
  </action>
  <verify>
    <automated>grep -n "ui-popover" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css | grep -v "^[0-9]*:.*:root" | grep -v "^\(775\|776\|777\|778\|779\|780\|781\|782\|783\|784\|785\|786\|787\|788\):"</automated>
    Run: grep -c "ui-popover" packages/core/src/styles/tailwind.css
    Expect: 9 occurrences (only the :root block tokens remain, .dark lines removed).
    Also: grep "dark" packages/core/src/styles/tailwind.css | grep "popover" should return nothing.
  </verify>
  <done>The .dark block has no --ui-popover-* declarations. The :root block still has all 9 --ui-popover-* tokens with double-fallback var() form. `grep "ui-popover" packages/core/src/styles/tailwind.css` returns exactly 9 lines (all in :root).</done>
</task>

</tasks>

<verification>
grep -n "ui-popover" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css
Expected: 9 matches, all within the :root block (lines ~780-788). Zero matches in the .dark block.
</verification>

<success_criteria>
- `.dark` block contains no `--ui-popover-*` declarations
- `:root` block retains all 9 `--ui-popover-*` tokens unchanged
- Popover dark mode now cascades via `.dark --color-card` semantic token
</success_criteria>

<output>
After completion, create `.planning/phases/83-popover/83-01-SUMMARY.md`
</output>
