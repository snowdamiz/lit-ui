---
phase: 82-tooltip
plan: 03
type: execute
wave: 3
depends_on:
  - 82-01
  - 82-02
files_modified:
  - skill/skills/tooltip/SKILL.md
autonomous: true
requirements:
  - TTP-03

must_haves:
  truths:
    - "SKILL.md CSS Custom Properties table lists exactly the 10 --ui-tooltip-* tokens from tailwind.css :root with correct defaults (including corrected shadow value)"
    - "Behavior Notes section exists covering hover/focus trigger, delay groups, dark mode cascade, rich variant, touch exclusion, and reduced motion"
    - "Events entry accurately reflects that no custom events are dispatched (tooltip opens automatically, no event fired)"
  artifacts:
    - path: "skill/skills/tooltip/SKILL.md"
      provides: "Tooltip skill with 10 correct CSS tokens, accurate Events note, and Behavior Notes section"
      contains: "ui-tooltip-bg"
  key_links:
    - from: "skill/skills/tooltip/SKILL.md CSS Custom Properties"
      to: "packages/core/src/styles/tailwind.css :root"
      via: "token defaults matching tailwind.css :root exactly"
      pattern: "ui-tooltip-shadow.*0 1px 3px"
---

<objective>
Update skill/skills/tooltip/SKILL.md to correct the shadow default value and add a Behavior Notes section — following the pattern established in Phases 70-03 through 81-03.

Purpose: The current SKILL.md CSS token table has two wrong defaults (same issues as TooltipPage.tsx: stale shadow value and single-fallback bg/text). The file is also missing the Behavior Notes section that every component skill file now has. This is the agent-facing document — accuracy directly affects implementation quality.

Output: SKILL.md with 10 accurate CSS tokens (matching tailwind.css :root exactly) and a Behavior Notes section with 10+ entries covering tooltip-specific behaviors.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/82-tooltip/82-02-SUMMARY.md

The established pattern (Phases 70-03 through 81-03): Correct CSS token table to match tailwind.css :root exactly; use double-fallback var() form for color tokens; add Behavior Notes section at the end of the file with 10-12 bullet entries covering trigger behavior, interaction model, dark mode, and notable implementation details.

**Current SKILL.md state (skill/skills/tooltip/SKILL.md):**
- CSS Custom Properties table has 10 entries but wrong defaults:
  - --ui-tooltip-bg: shows `var(--color-foreground)` — should be `var(--color-foreground, var(--ui-color-foreground))`
  - --ui-tooltip-text: shows `var(--color-background)` — should be `var(--color-background, white)`
  - --ui-tooltip-shadow: shows `0 4px 6px -1px rgb(0 0 0 / 0.1)` — should be `0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)`
- Missing: Behavior Notes section
- Events section correctly states "No custom events" — leave this unchanged

**Correct 10 tokens from tailwind.css :root (lines 765-778):**
1.  --ui-tooltip-bg: var(--color-foreground, var(--ui-color-foreground))
2.  --ui-tooltip-text: var(--color-background, white)
3.  --ui-tooltip-radius: 0.375rem
4.  --ui-tooltip-padding-x: 0.75rem
5.  --ui-tooltip-padding-y: 0.375rem
6.  --ui-tooltip-font-size: 0.875rem
7.  --ui-tooltip-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)
8.  --ui-tooltip-arrow-size: 8px
9.  --ui-tooltip-max-width: 20rem
10. --ui-tooltip-z-index: 50

**Behavior Notes content to add (from tooltip.ts source):**
- Tooltip opens on hover (pointerenter) and keyboard focus (focusin) with a configurable show-delay (default 300ms)
- Touch devices are excluded: pointerType === 'touch' events are ignored — tooltips are pointer/keyboard only
- Escape key dismisses an open tooltip immediately (keydown handler on trigger slot)
- Hide delay (default 100ms) keeps tooltip open briefly after pointer leaves, allowing cursor to move into the tooltip panel without it closing
- Delay groups (lui-tooltip-delay-group context): when moving between adjacent tooltips, the show-delay is skipped for instant switching
- Rich variant (rich attribute): tooltip-content area shows a title (tooltip-title prop or title slot) above a description (content prop or content slot); rich content padding is 0.75rem 1rem
- Dark mode: all 10 --ui-tooltip-* tokens cascade automatically through the semantic .dark token system — no explicit .dark overrides needed; --ui-tooltip-bg resolves to --color-foreground (gray-50 in dark) and --ui-tooltip-text resolves to --color-background (gray-950 in dark), maintaining the inverted-color appearance in both modes
- Positioning via Floating UI: computePosition with flip + shift + offset middleware; arrow positioned dynamically per resolved placement side; autoUpdate repositions on scroll and resize
- Arrow element (--ui-tooltip-arrow-size, default 8px) is a rotated square (rotate: 45deg) styled with the same --ui-tooltip-bg; disable with arrow={false}
- Animations: fade only (opacity 0→1 via CSS transition); @starting-style provides entry animation; prefers-reduced-motion disables transition entirely
- SSR safe: isServer guard prevents tooltip from rendering on server; tooltip panel only exists in DOM when open=true
- Cleanup: AbortController and autoUpdatePosition cleanup fire in disconnectedCallback — no memory leaks
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix CSS token defaults and add Behavior Notes to SKILL.md</name>
  <files>skill/skills/tooltip/SKILL.md</files>
  <action>
In skill/skills/tooltip/SKILL.md, make the following changes:

1. **Fix CSS Custom Properties table**: Update the 3 wrong default values — leave all other entries unchanged:

   Change `--ui-tooltip-bg` default from `var(--color-foreground)` to:
   `var(--color-foreground, var(--ui-color-foreground))`

   Change `--ui-tooltip-text` default from `var(--color-background)` to:
   `var(--color-background, white)`

   Change `--ui-tooltip-shadow` default from `0 4px 6px -1px rgb(0 0 0 / 0.1)` to:
   `0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)`

2. **Add Behavior Notes section**: Append a new `## Behavior Notes` section at the end of the file with these 12 bullet entries:

   - Tooltip opens on pointer hover (pointerenter) and keyboard focus (focusin) after `show-delay` ms (default 300ms). Both trigger types use the same show/hide state machine.
   - Touch events are excluded: `pointerType === 'touch'` events are ignored. Tooltips are pointer and keyboard only — no touch activation.
   - `Escape` key dismisses the tooltip immediately when it is open (keydown handler on the trigger slot wrapper).
   - `hide-delay` (default 100ms) keeps the tooltip visible briefly after the pointer leaves, allowing cursor movement into the tooltip panel without the tooltip closing. The tooltip panel also extends this bridge via its own pointerenter/pointerleave handlers.
   - Delay groups: when `<lui-tooltip>` elements share a delay group context, moving between adjacent tooltips skips `show-delay` for instant switching. The group tracks the last closed tooltip timestamp.
   - Rich variant (`rich` attribute): the tooltip content area renders a title (from `tooltip-title` prop or `title` slot) above a description (from `content` prop or `content` slot). Padding increases to `0.75rem 1rem` in rich mode.
   - Dark mode: all 10 `--ui-tooltip-*` tokens cascade automatically through the semantic `.dark` system. No explicit `.dark` overrides are needed. `--ui-tooltip-bg` (foreground) remains light in dark mode and `--ui-tooltip-text` (background) remains dark — preserving the inverted monochrome appearance in both themes.
   - Floating UI positioning: `computePosition` with `flip`, `shift` (8px edge padding), and `offset` (default 8px) middleware. The `arrow` middleware positions the arrow element relative to the resolved placement side. `autoUpdate` repositions on scroll and resize while the tooltip is open.
   - Arrow element is a `--ui-tooltip-arrow-size` square (default 8px) rotated 45° with `background: var(--ui-tooltip-bg)`. Disable with `arrow={false}`. Override arrow size via `--ui-tooltip-arrow-size`.
   - Animation: fade-only via CSS opacity transition (150ms ease-out). `@starting-style` provides the entry animation. `prefers-reduced-motion: reduce` disables all transitions. No scale or slide animations.
   - SSR safe: `isServer` guard prevents tooltip panel from rendering on the server. Tooltip DOM only exists while `open=true`; it is removed from DOM when hidden.
   - Cleanup: `AbortController` and `autoUpdatePosition` cleanup run in `disconnectedCallback` — no event listener or animation frame leaks.

Commit: `feat(82-03): fix SKILL.md CSS token defaults (shadow, bg/text double-fallback); add Behavior Notes`
  </action>
  <verify>
    <automated>grep "ui-tooltip-shadow" /Users/sn0w/Documents/dev/lit-components/skill/skills/tooltip/SKILL.md</automated>
  </verify>
  <done>
grep for "ui-tooltip-shadow" shows the corrected two-layer shadow `0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)`. A "## Behavior Notes" section exists at the end of the file with 12 bullet entries.
  </done>
</task>

</tasks>

<verification>
1. `grep "ui-tooltip-shadow" skill/skills/tooltip/SKILL.md` — shows corrected two-layer shadow (no `4px 6px` in output)
2. `grep "ui-tooltip-bg" skill/skills/tooltip/SKILL.md` — shows `var(--color-foreground, var(--ui-color-foreground))` (double-fallback)
3. `grep "ui-tooltip-text" skill/skills/tooltip/SKILL.md` — shows `var(--color-background, white)` (double-fallback)
4. `grep "Behavior Notes" skill/skills/tooltip/SKILL.md` — returns match
5. `grep -c "ui-tooltip" skill/skills/tooltip/SKILL.md` — returns 10+ matches
</verification>

<success_criteria>
- SKILL.md CSS Custom Properties table has 10 --ui-tooltip-* entries
- --ui-tooltip-bg default is `var(--color-foreground, var(--ui-color-foreground))`
- --ui-tooltip-text default is `var(--color-background, white)`
- --ui-tooltip-shadow default is `0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)` (two-layer)
- Behavior Notes section exists with 12 entries covering trigger model, touch exclusion, delay groups, rich variant, dark mode cascade, positioning, arrow, animation, SSR safety, and cleanup
- Events section unchanged (still "No custom events")
</success_criteria>

<output>
After completion, create `.planning/phases/82-tooltip/82-03-SUMMARY.md`
</output>
