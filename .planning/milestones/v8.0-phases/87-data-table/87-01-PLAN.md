---
phase: 87-data-table
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/styles/tailwind.css
autonomous: true
requirements:
  - DAT-01

must_haves:
  truths:
    - "Data Table renders with correct monochrome colors in dark mode via semantic cascade for applicable tokens"
    - "The .dark block in tailwind.css no longer contains --ui-data-table-* declarations for tokens that cascade correctly via semantic .dark overrides"
    - "Dark-mode-specific tokens (selected-bg, badge oklch colors, overlay, shadow, editable-hover, editing-bg, header-hover-bg) are preserved in .dark as exceptions"
    - "The :root block data-table tokens are untouched and use double-fallback var() form for color tokens"
  artifacts:
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Data Table .dark block pruned to oklch exceptions and value-flip exceptions only"
      contains: "--ui-data-table-header-bg: var(--color-muted, var(--ui-color-muted))"
  key_links:
    - from: "packages/core/src/styles/tailwind.css (.dark block)"
      to: "data table dark mode appearance"
      via: "semantic cascade: .dark --color-muted cascades into --ui-data-table-header-bg"
      pattern: "Remove 11 lines (comment + 10 --ui-data-table-* declarations) from .dark block"
---

<objective>
Remove the 10 hardcoded data table dark mode token declarations from the `.dark` block in `tailwind.css` that cascade correctly via semantic `.dark` overrides. Preserve the 19 exceptions that require dark-specific literal values.

Unlike simpler components, Data Table has many dark-mode exceptions:
- `selected-bg` / `selected-hover-bg`: oklch literals with dark-appropriate lightness (0.25/0.28 vs :root 0.97/0.94)
- `header-hover-bg`: flips from rgba(0,0,0,0.05) to rgba(255,255,255,0.05) — value inversion
- `sticky-shadow`: stronger opacity in dark mode (0.2 vs :root 0.06)
- `badge-default-bg`: rgba(255,255,255,0.1) vs :root var(--color-muted) — different approach in dark
- All 10 badge color variants: oklch literals with dark-appropriate lightness
- `overlay-bg`: flips from rgba(255,255,255,0.6) to rgba(0,0,0,0.5) — value inversion
- `editable-hover-bg`: flips from rgba(0,0,0,0.03) to rgba(255,255,255,0.05) — value inversion
- `editing-bg`: references var(--color-gray-950) dark base — cannot cascade
- `menu-shadow`: stronger rgba shadow values for dark mode

Tokens that DO cascade and can be removed: header-bg, row-bg, row-hover-bg, border-color, text-color, header-text, skeleton-base, skeleton-highlight, menu-bg, badge-default-text.

Purpose: Align data table dark mode with the v8.0 pattern established in Phases 70–86: semantic cascade where possible, explicit exception only where the value literally cannot cascade from :root.
Output: `tailwind.css` with 11 fewer lines (comment + 10 cascadeable data-table dark declarations) in the `.dark` block.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key context the executor needs. Extracted from tailwind.css. -->

From packages/core/src/styles/tailwind.css :root block (lines ~1020-1050) — these stay UNCHANGED:
```css
  --ui-data-table-header-bg: var(--color-muted, var(--ui-color-muted));
  --ui-data-table-row-bg: var(--color-background, white);
  --ui-data-table-row-hover-bg: var(--color-muted, var(--ui-color-muted));
  --ui-data-table-border-color: var(--color-border, var(--ui-color-border));
  --ui-data-table-text-color: var(--color-foreground, var(--ui-color-foreground));
  --ui-data-table-header-text: var(--color-muted-foreground, var(--ui-color-muted-foreground));
  --ui-data-table-selected-bg: oklch(0.97 0.01 250);
  --ui-data-table-selected-hover-bg: oklch(0.94 0.02 250);
  --ui-data-table-skeleton-base: var(--color-border, var(--ui-color-border));
  --ui-data-table-skeleton-highlight: var(--color-muted, var(--ui-color-muted));
  --ui-data-table-header-hover-bg: rgba(0, 0, 0, 0.05);
  --ui-data-table-sticky-shadow: rgba(0, 0, 0, 0.06);
  --ui-data-table-menu-bg: var(--color-card, var(--ui-color-card));
  --ui-data-table-menu-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.07);
  --ui-data-table-overlay-bg: rgba(255, 255, 255, 0.6);
  --ui-data-table-editable-hover-bg: rgba(0, 0, 0, 0.03);
  --ui-data-table-editing-bg: color-mix(in oklch, var(--color-primary, var(--ui-color-primary)) 5%, var(--color-background, white));
  --ui-data-table-badge-default-bg: var(--color-muted, var(--ui-color-muted));
  --ui-data-table-badge-default-text: var(--color-foreground, var(--ui-color-foreground));
  --ui-data-table-badge-green-bg: oklch(0.93 0.06 150);
  --ui-data-table-badge-green-text: oklch(0.35 0.10 150);
  --ui-data-table-badge-blue-bg: oklch(0.93 0.06 250);
  --ui-data-table-badge-blue-text: oklch(0.35 0.10 250);
  --ui-data-table-badge-red-bg: oklch(0.93 0.06 25);
  --ui-data-table-badge-red-text: oklch(0.35 0.10 25);
  --ui-data-table-badge-yellow-bg: oklch(0.93 0.06 85);
  --ui-data-table-badge-yellow-text: oklch(0.40 0.12 85);
  --ui-data-table-badge-purple-bg: oklch(0.93 0.06 310);
  --ui-data-table-badge-purple-text: oklch(0.35 0.10 310);
```

From packages/core/src/styles/tailwind.css .dark block — REMOVE ONLY THESE 11 LINES:
```css
  /* Data Table dark mode */
  --ui-data-table-header-bg: var(--color-gray-800);
  --ui-data-table-row-bg: var(--color-gray-950);
  --ui-data-table-row-hover-bg: var(--color-gray-800);
  --ui-data-table-border-color: var(--color-gray-700);
  --ui-data-table-text-color: var(--color-gray-50);
  --ui-data-table-header-text: var(--color-gray-400);
  --ui-data-table-skeleton-base: var(--color-gray-700);
  --ui-data-table-skeleton-highlight: var(--color-gray-600);
  --ui-data-table-menu-bg: var(--color-gray-900);
  --ui-data-table-badge-default-text: var(--color-gray-50);
```

KEEP in .dark (19 exception tokens — must NOT be removed):
```css
  --ui-data-table-selected-bg: oklch(0.25 0.03 250);          /* dark lightness; :root=0.97 */
  --ui-data-table-selected-hover-bg: oklch(0.28 0.04 250);    /* dark lightness; :root=0.94 */
  --ui-data-table-header-hover-bg: rgba(255, 255, 255, 0.05); /* inverted from :root rgba(0,0,0,0.05) */
  --ui-data-table-sticky-shadow: rgba(0, 0, 0, 0.2);          /* stronger opacity in dark; :root=0.06 */
  --ui-data-table-menu-bg: var(--color-gray-900);             /* WAIT — see analysis below */
  --ui-data-table-badge-default-bg: rgba(255, 255, 255, 0.1); /* inverted; :root=var(--color-muted) */
  --ui-data-table-badge-green-bg: oklch(0.30 0.06 150);
  --ui-data-table-badge-green-text: oklch(0.80 0.12 150);
  --ui-data-table-badge-blue-bg: oklch(0.30 0.06 250);
  --ui-data-table-badge-blue-text: oklch(0.80 0.10 250);
  --ui-data-table-badge-red-bg: oklch(0.30 0.06 25);
  --ui-data-table-badge-red-text: oklch(0.80 0.10 25);
  --ui-data-table-badge-yellow-bg: oklch(0.30 0.06 85);
  --ui-data-table-badge-yellow-text: oklch(0.85 0.12 85);
  --ui-data-table-badge-purple-bg: oklch(0.30 0.06 310);
  --ui-data-table-badge-purple-text: oklch(0.80 0.10 310);
  --ui-data-table-overlay-bg: rgba(0, 0, 0, 0.5);            /* inverted from :root rgba(255,255,255,0.6) */
  --ui-data-table-editable-hover-bg: rgba(255, 255, 255, 0.05); /* inverted from :root rgba(0,0,0,0.03) */
  --ui-data-table-editing-bg: color-mix(in oklch, var(--color-primary, var(--ui-color-primary)) 8%, var(--color-gray-950));  /* dark base */
  --ui-data-table-menu-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.2); /* stronger dark shadow */
```

Why the 10 removals are safe (semantic cascade):
- `header-bg` → `:root` uses `var(--color-muted, ...)` → `.dark` sets `--color-muted` to a dark gray
- `row-bg` → `:root` uses `var(--color-background, white)` → `.dark` sets `--color-background`
- `row-hover-bg` → `:root` uses `var(--color-muted, ...)` → cascades via `.dark --color-muted`
- `border-color` → `:root` uses `var(--color-border, ...)` → `.dark` sets `--color-border`
- `text-color` → `:root` uses `var(--color-foreground, ...)` → `.dark` sets `--color-foreground`
- `header-text` → `:root` uses `var(--color-muted-foreground, ...)` → `.dark` sets `--color-muted-foreground`
- `skeleton-base` → `:root` uses `var(--color-border, ...)` → cascades via `.dark --color-border`
- `skeleton-highlight` → `:root` uses `var(--color-muted, ...)` → cascades via `.dark --color-muted`
- `menu-bg` → `:root` uses `var(--color-card, ...)` → `.dark` sets `--color-card` to a dark value
- `badge-default-text` → `:root` uses `var(--color-foreground, ...)` → cascades via `.dark --color-foreground`
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove cascadeable data-table dark mode declarations from .dark block</name>
  <files>packages/core/src/styles/tailwind.css</files>
  <action>
    In `packages/core/src/styles/tailwind.css`, locate the `.dark` block. Find the "Data Table dark mode" comment and the following declarations. Remove exactly these 11 lines:

    ```
      /* Data Table dark mode */
      --ui-data-table-header-bg: var(--color-gray-800);
      --ui-data-table-row-bg: var(--color-gray-950);
      --ui-data-table-row-hover-bg: var(--color-gray-800);
      --ui-data-table-border-color: var(--color-gray-700);
      --ui-data-table-text-color: var(--color-gray-50);
      --ui-data-table-header-text: var(--color-gray-400);
      --ui-data-table-skeleton-base: var(--color-gray-700);
      --ui-data-table-skeleton-highlight: var(--color-gray-600);
      --ui-data-table-menu-bg: var(--color-gray-900);
      --ui-data-table-badge-default-text: var(--color-gray-50);
    ```

    Do NOT remove these data-table exceptions (they must stay in .dark):
    - selected-bg, selected-hover-bg (oklch dark lightness)
    - header-hover-bg, badge-default-bg, overlay-bg, editable-hover-bg (value inversions)
    - sticky-shadow, menu-shadow (stronger dark opacity)
    - editing-bg (references var(--color-gray-950) dark base)
    - All 10 badge oklch color variants

    Do NOT touch the `:root` block data-table tokens.
    Do NOT touch any other component's declarations.

    After editing, the .dark block will still contain a "Data Table" section with the 19 exception tokens. Add a comment "/* Data Table dark mode exceptions (oklch literals and value inversions that cannot cascade) */" in place of the removed "/* Data Table dark mode */" comment to clarify why these remain.
  </action>
  <verify>
    <automated>grep -n "ui-data-table" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css</automated>
    Expect: All --ui-data-table-* in :root block (lines ~1020-1050). In .dark block: only exception tokens remain (selected-bg, selected-hover-bg, header-hover-bg, sticky-shadow, badge-default-bg, badge-green/blue/red/yellow/purple variants, overlay-bg, editable-hover-bg, editing-bg, menu-shadow). No header-bg, row-bg, row-hover-bg, border-color, text-color, header-text, skeleton-base, skeleton-highlight, menu-bg, badge-default-text in .dark.
  </verify>
  <done>The .dark block retains exactly 19 data-table exception tokens (oklch literals and value inversions). The 10 semantic-cascade tokens are removed. The :root block is untouched with all 29 data-table token entries.</done>
</task>

</tasks>

<verification>
grep -c "ui-data-table" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css
Expected: 48 occurrences total (29 in :root + 19 in .dark; previously was 58 = 29 :root + 29 .dark + comment line).

grep -n "ui-data-table-header-bg\|ui-data-table-row-bg\|ui-data-table-row-hover-bg\|ui-data-table-border-color\|ui-data-table-text-color\|ui-data-table-header-text\|ui-data-table-skeleton-base\|ui-data-table-skeleton-highlight\|ui-data-table-menu-bg\|ui-data-table-badge-default-text" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css
Expected: Only :root occurrences for each (no .dark occurrences).
</verification>

<success_criteria>
- `.dark` block no longer contains the 10 semantic-cascade data-table tokens
- `.dark` block retains 19 data-table exception tokens (oklch literals and value inversions)
- `:root` block retains all 29 data-table tokens unchanged
- Data Table dark mode cascades via `.dark` semantic color tokens for applicable properties
</success_criteria>

<output>
After completion, create `.planning/phases/87-data-table/87-01-SUMMARY.md`
</output>
