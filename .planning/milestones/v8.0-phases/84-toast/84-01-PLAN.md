---
phase: 84-toast
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/core/src/styles/tailwind.css
autonomous: true
requirements:
  - TST-01

must_haves:
  truths:
    - "Toast base (bg/text/border) renders with correct card colors in dark mode via semantic cascade (no hardcoded gray values for the base 3)"
    - "The .dark block in tailwind.css no longer contains --ui-toast-bg, --ui-toast-text, or --ui-toast-border"
    - "The 12 variant oklch dark mode tokens remain in .dark (they cannot cascade — they are explicit dark-mode values)"
  artifacts:
    - path: "packages/core/src/styles/tailwind.css"
      provides: "Toast token defaults in :root; base toast .dark declarations removed, variant .dark declarations kept"
      contains: "--ui-toast-bg: var(--color-card, var(--ui-color-card))"
  key_links:
    - from: "packages/core/src/styles/tailwind.css (.dark block)"
      to: "toast component dark mode appearance"
      via: "semantic cascade: .dark --color-card cascades into --ui-toast-bg"
      pattern: "Remove 3 base --ui-toast-* declarations + comment from .dark block; keep 12 variant oklch declarations"
---

<objective>
Remove the 3 hardcoded base toast dark mode overrides (`--ui-toast-bg`, `--ui-toast-text`, `--ui-toast-border`) from the `.dark` block in `tailwind.css`. The `:root` block already uses double-fallback semantic card tokens which cascade correctly in dark mode — the explicit base overrides are redundant.

The 12 variant oklch tokens (success/error/warning/info bg/border/icon) must STAY in `.dark` because they use distinct dark-mode lightness values (oklch 0.25 vs 0.95 in :root) that cannot cascade through semantic color tokens.

Purpose: Base toast dark mode should cascade automatically via `.dark --color-card` semantic tokens, exactly as established in Phases 70-83.
Output: `tailwind.css` with 4 fewer lines under the `.dark` block (the base toast bg/text/border declarations + their comment). The 12 variant oklch dark mode lines remain untouched.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key context the executor needs. -->

From packages/core/src/styles/tailwind.css :root block (ground truth — these stay unchanged):
```css
--ui-toast-bg: var(--color-card, var(--ui-color-card));
--ui-toast-text: var(--color-card-foreground, var(--ui-color-card-foreground));
--ui-toast-border: var(--color-border, var(--ui-color-border));
--ui-toast-radius: 0.5rem;
--ui-toast-padding: 1rem;
--ui-toast-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
--ui-toast-max-width: 24rem;
--ui-toast-gap: 0.75rem;
--ui-toast-z-index: 55;
--ui-toast-success-bg: oklch(0.95 0.05 150);
--ui-toast-success-border: oklch(0.70 0.15 150);
--ui-toast-success-icon: oklch(0.55 0.20 150);
--ui-toast-error-bg: oklch(0.95 0.05 25);
--ui-toast-error-border: oklch(0.70 0.15 25);
--ui-toast-error-icon: oklch(0.55 0.20 25);
--ui-toast-warning-bg: oklch(0.95 0.05 85);
--ui-toast-warning-border: oklch(0.70 0.15 85);
--ui-toast-warning-icon: oklch(0.55 0.20 85);
--ui-toast-info-bg: oklch(0.95 0.05 250);
--ui-toast-info-border: oklch(0.70 0.15 250);
--ui-toast-info-icon: oklch(0.55 0.20 250);
```

From packages/core/src/styles/tailwind.css .dark block — ONLY THESE 4 LINES ARE TO BE REMOVED:
```css
  /* Toast dark mode */
  --ui-toast-bg: var(--color-gray-900);
  --ui-toast-text: var(--color-gray-50);
  --ui-toast-border: var(--color-gray-800);
```

From packages/core/src/styles/tailwind.css .dark block — THESE 12 LINES MUST STAY (variant exceptions):
```css
  /* Toast variant dark mode - lower lightness backgrounds, higher lightness icons */
  --ui-toast-success-bg: oklch(0.25 0.05 150);
  --ui-toast-success-border: oklch(0.45 0.12 150);
  --ui-toast-success-icon: oklch(0.70 0.18 150);
  --ui-toast-error-bg: oklch(0.25 0.05 25);
  --ui-toast-error-border: oklch(0.45 0.12 25);
  --ui-toast-error-icon: oklch(0.70 0.18 25);
  --ui-toast-warning-bg: oklch(0.25 0.05 85);
  --ui-toast-warning-border: oklch(0.45 0.12 85);
  --ui-toast-warning-icon: oklch(0.70 0.18 85);
  --ui-toast-info-bg: oklch(0.25 0.05 250);
  --ui-toast-info-border: oklch(0.45 0.12 250);
  --ui-toast-info-icon: oklch(0.70 0.18 250);
```

Why the variant tokens stay: The :root light-mode variant backgrounds use oklch lightness 0.95 (very light). Dark mode needs lightness 0.25 (very dark). There is no semantic color token that bridges this gap — they must be explicitly overridden in .dark. Same exception pattern as switch thumb-bg (Phase 77-01), date-range compare-* oklch (Phase 80-01), time-picker oklch literals (Phase 81-01).

The .dark block also sets --color-card: var(--color-gray-900), --color-card-foreground: var(--color-gray-50), and --color-border: var(--color-gray-800) — so the :root double-fallback cascade is sufficient for the base 3 tokens.

Established pattern: Same partial removal was done for checkbox (75-01, kept check-color white exception) and switch (77-01, kept thumb-bg white exception).
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove base toast dark mode declarations from .dark block</name>
  <files>packages/core/src/styles/tailwind.css</files>
  <action>
    In `packages/core/src/styles/tailwind.css`, locate the `.dark` block. Find and remove exactly these 4 lines (comment + 3 base declarations):

    ```
      /* Toast dark mode */
      --ui-toast-bg: var(--color-gray-900);
      --ui-toast-text: var(--color-gray-50);
      --ui-toast-border: var(--color-gray-800);
    ```

    Do NOT remove the variant comment or any of the 12 variant oklch declarations that follow — they must stay:
    ```
      /* Toast variant dark mode - lower lightness backgrounds, higher lightness icons */
      --ui-toast-success-bg: oklch(0.25 0.05 150);
      ... (all 12 variant lines)
    ```

    Do NOT touch the `:root` block toast tokens — they are correct and must stay.
    Do NOT touch any other component's declarations.

    The removal is correct because:
    - `:root` already defines `--ui-toast-bg: var(--color-card, var(--ui-color-card))`
    - `.dark` overrides `--color-card: var(--color-gray-900)` (semantic cascade)
    - Therefore `--ui-toast-bg` cascades to `var(--color-gray-900)` in dark mode automatically
    - Same logic applies for text (card-foreground) and border tokens

    After removal, verify the .dark block no longer contains `--ui-toast-bg`, `--ui-toast-text`, or `--ui-toast-border`, but still contains all 12 variant oklch declarations.
  </action>
  <verify>
    <automated>grep -n "ui-toast" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css</automated>
    Expect: All --ui-toast-bg/text/border occurrences are only in the :root block (not in .dark). The 12 variant oklch lines still appear in .dark.
    Also: grep -c "ui-toast" packages/core/src/styles/tailwind.css
    Expect: 21 occurrences (9 base :root + 12 variant :root/dark — the 3 removed base .dark lines bring total from 24 to 21, keeping the 12 variant .dark lines).
  </verify>
  <done>The .dark block has no --ui-toast-bg, --ui-toast-text, or --ui-toast-border declarations. All 12 variant oklch .dark declarations remain. The :root block still has all toast tokens with double-fallback var() form.</done>
</task>

</tasks>

<verification>
grep -n "ui-toast-bg\|ui-toast-text\|ui-toast-border" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css
Expected: Only :root block matches for -bg, -text, -border. No .dark block matches for these 3 tokens.

grep -n "ui-toast-success-bg\|ui-toast-error-bg\|ui-toast-warning-bg\|ui-toast-info-bg" /Users/sn0w/Documents/dev/lit-components/packages/core/src/styles/tailwind.css
Expected: Each appears twice — once in :root (0.95 lightness) and once in .dark (0.25 lightness).
</verification>

<success_criteria>
- `.dark` block contains no `--ui-toast-bg`, `--ui-toast-text`, or `--ui-toast-border` declarations
- `.dark` block retains all 12 variant oklch tokens (success/error/warning/info bg/border/icon)
- `:root` block retains all toast tokens unchanged
- Base toast dark mode now cascades via `.dark --color-card` semantic token
</success_criteria>

<output>
After completion, create `.planning/phases/84-toast/84-01-SUMMARY.md`
</output>
