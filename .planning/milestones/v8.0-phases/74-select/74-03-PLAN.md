---
phase: 74-select
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/select/SKILL.md
autonomous: true
requirements: [SEL-03]

must_haves:
  truths:
    - "The SKILL.md Events table lists all 3 events: change, clear, and create"
    - "The SKILL.md CSS Custom Properties table has 20+ entries covering all token categories (layout, typography, spacing, trigger, dropdown, option, tag, checkbox)"
    - "The SKILL.md CSS token defaults match the exact tailwind.css :root values (structural tokens use rem/px, color tokens use var() double-fallback)"
    - "The SKILL.md has a Behavior Notes section covering select-specific behaviors (multi-select tags, combobox, async loading, etc.)"
  artifacts:
    - path: "skill/skills/select/SKILL.md"
      provides: "Accurate Select skill file with Behavior Notes and complete CSS token table"
      contains: "## Behavior Notes"
  key_links:
    - from: "skill/skills/select/SKILL.md (CSS Custom Properties table)"
      to: "packages/core/src/styles/tailwind.css (:root select block)"
      via: "manually authored token table matching tailwind.css :root values"
      pattern: "--ui-select-radius.*0\\.375rem"
---

<objective>
Rewrite skill/skills/select/SKILL.md with accurate v8.0 content: correct CSS token defaults, complete token table, missing events (clear, create), and a new Behavior Notes section.

Purpose: The current SKILL.md has three accuracy problems:
1. Events table only lists `change` — misses `clear` and `create`
2. CSS token table has only 7 entries with stale defaults (e.g. `var(--radius-md)` instead of `0.375rem`; `var(--shadow-md)` instead of actual shadow value)
3. No Behavior Notes section — Claude has no guidance on multi-select tag behavior, combobox/searchable mode, async loading, creatable mode, or accessibility patterns

The same "add Behavior Notes + expand CSS tokens" pattern was applied in Phase 70-03 (button), 71-03 (dialog), 72-03 (input), 73-03 (textarea).

Output: Updated SKILL.md with: corrected 3-event Events table, 27-entry CSS token table with correct defaults, and new Behavior Notes section with 8+ entries covering select-specific behavior.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Current SKILL.md state — what needs to change -->

Current Events table (INCOMPLETE — missing clear and create):
```markdown
| Event | Detail | Description |
|-------|--------|-------------|
| `change` | `{ value: string \| string[] }` | Fired when the selected value changes. |
```

Correct Events table (all 3 events):
```markdown
| Event | Detail | Description |
|-------|--------|-------------|
| `change` | `{ value: string \| string[] }` | Fired when the selected value changes. |
| `clear` | `{}` | Fired when the selection is cleared via the clear button or keyboard (Delete/Backspace). |
| `create` | `{ value: string }` | Fired in creatable mode when user creates a new option. Contains the typed text. |
```

Current CSS Custom Properties table (7 entries, stale defaults — REPLACE ENTIRELY):
```markdown
| `--ui-select-radius` | `var(--radius-md)` | ...  ← WRONG: should be 0.375rem
| `--ui-select-dropdown-shadow` | `var(--shadow-md)` | ...  ← WRONG: should be actual shadow value
```

Correct CSS Custom Properties table (27 entries, exact tailwind.css :root values):
```markdown
| Property | Default | Description |
|----------|---------|-------------|
| `--ui-select-radius` | `0.375rem` | Border radius of the trigger and dropdown. |
| `--ui-select-border-width` | `1px` | Border width of the trigger. |
| `--ui-select-transition` | `150ms` | Transition duration for border color changes. |
| `--ui-select-dropdown-shadow` | `0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)` | Box shadow for the dropdown. |
| `--ui-select-dropdown-max-height` | `15rem` | Maximum height of the dropdown before scroll. |
| `--ui-select-font-size-sm` | `0.875rem` | Font size for the sm size variant. |
| `--ui-select-font-size-md` | `1rem` | Font size for the md size variant. |
| `--ui-select-font-size-lg` | `1.125rem` | Font size for the lg size variant. |
| `--ui-select-padding-x-md` | `1rem` | Horizontal padding for the md size variant. |
| `--ui-select-padding-y-md` | `0.5rem` | Vertical padding for the md size variant. |
| `--ui-select-bg` | `var(--color-background, white)` | Trigger background color. |
| `--ui-select-text` | `var(--color-foreground, var(--ui-color-foreground))` | Trigger text color. |
| `--ui-select-border` | `var(--color-border, var(--ui-color-border))` | Trigger border color. |
| `--ui-select-placeholder` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Placeholder text color. |
| `--ui-select-border-focus` | `var(--color-ring, var(--ui-color-ring))` | Trigger border color on focus. |
| `--ui-select-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring outline color. |
| `--ui-select-bg-disabled` | `var(--color-muted, var(--ui-color-muted))` | Trigger background when disabled. |
| `--ui-select-text-disabled` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Trigger text color when disabled. |
| `--ui-select-border-error` | `var(--color-destructive, var(--ui-color-destructive))` | Trigger border color in error/validation state. |
| `--ui-select-dropdown-bg` | `var(--color-card, var(--ui-color-card))` | Dropdown background color. |
| `--ui-select-dropdown-border` | `var(--color-border, var(--ui-color-border))` | Dropdown border color. |
| `--ui-select-option-bg-hover` | `var(--color-accent, var(--ui-color-accent))` | Option background on hover. |
| `--ui-select-option-text` | `var(--color-foreground, var(--ui-color-foreground))` | Option text color. |
| `--ui-select-option-check` | `var(--color-primary, var(--ui-color-primary))` | Checkmark icon color on selected option. |
| `--ui-select-tag-bg` | `var(--color-secondary, var(--ui-color-secondary))` | Tag/chip background in multi-select mode. |
| `--ui-select-tag-text` | `var(--color-secondary-foreground, var(--ui-color-secondary-foreground))` | Tag/chip text color in multi-select mode. |
| `--ui-select-checkbox-bg-checked` | `var(--color-primary, var(--ui-color-primary))` | Checkbox background when checked in multi-select. |
```

New Behavior Notes section to ADD before CSS Custom Properties:
```markdown
## Behavior Notes

- **Multi-select tags**: When `multiple` is enabled, selected options appear as removable pill tags inside the trigger. Overflow tags collapse to a "+N more" indicator when the trigger width is exceeded.
- **Dropdown stays open**: In `multiple` mode, the dropdown remains open after each selection, allowing users to select multiple items without reopening.
- **Combobox / Searchable**: Adding `searchable` transforms the trigger into a text input. Options filter in real-time using case-insensitive substring matching. Match text is highlighted in bold.
- **Creatable mode**: `creatable` requires `searchable`. When no exact match exists, a "Create 'xyz'" option appears. Selecting it fires the `create` event with the typed value; the component does NOT automatically add the option — the consumer is responsible for adding it.
- **Async options**: `options` accepts a Promise. While pending, a loading skeleton displays. If the Promise rejects, an error state with a retry button appears.
- **Async search**: `asyncSearch` enables server-side filtering. Each call receives the current query and an AbortSignal; previous requests are automatically cancelled. Use `debounceDelay` (default 300ms) and `minSearchLength` (default 0) to control when the function is called.
- **Focus management**: DOM focus stays on the trigger button/input. The highlighted option is tracked via `aria-activedescendant`, following the W3C APG combobox pattern. This provides a smooth screen reader experience without moving focus into the dropdown.
- **Form participation**: The component uses ElementInternals (`formAssociated = true`) for native form submission and validation. The `required` attribute causes a validation error message on blur when no option is selected. `name` sets the form field name for submission.
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite select SKILL.md with Behavior Notes and expanded CSS tokens</name>
  <files>skill/skills/select/SKILL.md</files>
  <action>
In skill/skills/select/SKILL.md, make three targeted changes:

1. **Replace the Events table** — add `clear` and `create` events to the table (currently only `change` is listed).

   Replace:
   ```markdown
   | `change` | `{ value: string \| string[] }` | Fired when the selected value changes. |
   ```
   With:
   ```markdown
   | `change` | `{ value: string \| string[] }` | Fired when the selected value changes. |
   | `clear` | `{}` | Fired when the selection is cleared via the clear button or keyboard (Delete/Backspace). |
   | `create` | `{ value: string }` | Fired in creatable mode when user creates a new option. Contains the typed text. |
   ```

2. **Add Behavior Notes section** — insert the following section immediately before the existing `## CSS Custom Properties` heading:

   ```markdown
   ## Behavior Notes

   - **Multi-select tags**: When `multiple` is enabled, selected options appear as removable pill tags inside the trigger. Overflow tags collapse to a "+N more" indicator when the trigger width is exceeded.
   - **Dropdown stays open**: In `multiple` mode, the dropdown remains open after each selection, allowing users to select multiple items without reopening.
   - **Combobox / Searchable**: Adding `searchable` transforms the trigger into a text input. Options filter in real-time using case-insensitive substring matching. Match text is highlighted in bold.
   - **Creatable mode**: `creatable` requires `searchable`. When no exact match exists, a "Create 'xyz'" option appears. Selecting it fires the `create` event with the typed value; the component does NOT automatically add the option — the consumer is responsible for adding it.
   - **Async options**: `options` accepts a Promise. While pending, a loading skeleton displays. If the Promise rejects, an error state with a retry button appears.
   - **Async search**: `asyncSearch` enables server-side filtering. Each call receives the current query and an AbortSignal; previous requests are automatically cancelled. Use `debounceDelay` (default 300ms) and `minSearchLength` (default 0) to control when the function is called.
   - **Focus management**: DOM focus stays on the trigger button/input. The highlighted option is tracked via `aria-activedescendant`, following the W3C APG combobox pattern. This provides a smooth screen reader experience without moving focus into the dropdown.
   - **Form participation**: The component uses ElementInternals (`formAssociated = true`) for native form submission and validation. The `required` attribute causes a validation error message on blur when no option is selected. `name` sets the form field name for submission.
   ```

3. **Replace the CSS Custom Properties table** — replace the entire existing table (7 entries with stale defaults like `var(--radius-md)` and `var(--shadow-md)`) with the 27-entry table using exact tailwind.css :root values:

   ```markdown
   | Property | Default | Description |
   |----------|---------|-------------|
   | `--ui-select-radius` | `0.375rem` | Border radius of the trigger and dropdown. |
   | `--ui-select-border-width` | `1px` | Border width of the trigger. |
   | `--ui-select-transition` | `150ms` | Transition duration for border color changes. |
   | `--ui-select-dropdown-shadow` | `0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)` | Box shadow for the dropdown. |
   | `--ui-select-dropdown-max-height` | `15rem` | Maximum height of the dropdown before scroll. |
   | `--ui-select-font-size-sm` | `0.875rem` | Font size for the sm size variant. |
   | `--ui-select-font-size-md` | `1rem` | Font size for the md size variant. |
   | `--ui-select-font-size-lg` | `1.125rem` | Font size for the lg size variant. |
   | `--ui-select-padding-x-md` | `1rem` | Horizontal padding for the md size variant. |
   | `--ui-select-padding-y-md` | `0.5rem` | Vertical padding for the md size variant. |
   | `--ui-select-bg` | `var(--color-background, white)` | Trigger background color. |
   | `--ui-select-text` | `var(--color-foreground, var(--ui-color-foreground))` | Trigger text color. |
   | `--ui-select-border` | `var(--color-border, var(--ui-color-border))` | Trigger border color. |
   | `--ui-select-placeholder` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Placeholder text color. |
   | `--ui-select-border-focus` | `var(--color-ring, var(--ui-color-ring))` | Trigger border color on focus. |
   | `--ui-select-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring outline color. |
   | `--ui-select-bg-disabled` | `var(--color-muted, var(--ui-color-muted))` | Trigger background when disabled. |
   | `--ui-select-text-disabled` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Trigger text color when disabled. |
   | `--ui-select-border-error` | `var(--color-destructive, var(--ui-color-destructive))` | Trigger border color in error/validation state. |
   | `--ui-select-dropdown-bg` | `var(--color-card, var(--ui-color-card))` | Dropdown background color. |
   | `--ui-select-dropdown-border` | `var(--color-border, var(--ui-color-border))` | Dropdown border color. |
   | `--ui-select-option-bg-hover` | `var(--color-accent, var(--ui-color-accent))` | Option background on hover. |
   | `--ui-select-option-text` | `var(--color-foreground, var(--ui-color-foreground))` | Option text color. |
   | `--ui-select-option-check` | `var(--color-primary, var(--ui-color-primary))` | Checkmark icon color on selected option. |
   | `--ui-select-tag-bg` | `var(--color-secondary, var(--ui-color-secondary))` | Tag/chip background in multi-select mode. |
   | `--ui-select-tag-text` | `var(--color-secondary-foreground, var(--ui-color-secondary-foreground))` | Tag/chip text color in multi-select mode. |
   | `--ui-select-checkbox-bg-checked` | `var(--color-primary, var(--ui-color-primary))` | Checkbox background when checked in multi-select. |
   ```

Do NOT modify the frontmatter, Usage section, Props tables, or Slots section — they are correct.
  </action>
  <verify>
    <automated>grep -c "^|" /Users/sn0w/Documents/dev/lit-components/skill/skills/select/SKILL.md</automated>
  </verify>
  <done>The SKILL.md Events table has 3 events (change, clear, create). The "## Behavior Notes" section exists with 8 bullet points. The CSS Custom Properties table has 27 entries. The `--ui-select-radius` default shows `0.375rem` (not `var(--radius-md)`). The `--ui-select-dropdown-shadow` default shows the actual shadow value (not `var(--shadow-md)`).</done>
</task>

</tasks>

<verification>
1. Run: `grep -c "^|" skill/skills/select/SKILL.md` — should be 60+ (table rows across all tables)
2. Run: `grep "Behavior Notes" skill/skills/select/SKILL.md` — should return one line
3. Run: `grep "ui-select-radius" skill/skills/select/SKILL.md` — should show `0.375rem` not `var(--radius-md)`
4. Run: `grep "clear\|create" skill/skills/select/SKILL.md | grep "^\|"` — should show both `clear` and `create` event rows
</verification>

<success_criteria>
- SKILL.md Events table has all 3 events: change, clear, create
- SKILL.md has a new Behavior Notes section with 8 bullet points covering multi-select tags, dropdown behavior, combobox, creatable, async options, async search, focus management, and form participation
- SKILL.md CSS Custom Properties table expanded from 7 to 27 entries
- Structural token defaults are exact values (0.375rem, 1px, 150ms), not var() aliases
- Color token defaults use full double-fallback var() form matching tailwind.css :root
- SEL-03 satisfied: skill/skills/select skill file is accurate and up-to-date
</success_criteria>

<output>
After completion, create `.planning/phases/74-select/74-03-SUMMARY.md` with what was changed and the before/after counts.
</output>
