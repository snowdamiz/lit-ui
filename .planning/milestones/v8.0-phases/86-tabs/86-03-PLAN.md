---
phase: 86-tabs
plan: "03"
type: execute
wave: 1
depends_on: []
files_modified:
  - skill/skills/tabs/SKILL.md
autonomous: true
requirements:
  - TAB-03

must_haves:
  truths:
    - "SKILL.md CSS Custom Properties table has 25 entries matching tailwind.css :root exactly"
    - "Color token defaults use double-fallback var() form (e.g. var(--color-border, var(--ui-color-border)))"
    - "The active-bg default correctly shows var(--color-background, white)"
    - "Behavior Notes section exists covering tabs-specific behaviors (orientation, activation-mode, indicator, overflow scroll, lazy, keyboard nav, etc.)"
  artifacts:
    - path: "skill/skills/tabs/SKILL.md"
      provides: "Accurate SKILL.md with 25 CSS tokens and Behavior Notes section"
      contains: "var(--color-muted, var(--ui-color-muted))"
  key_links:
    - from: "skill/skills/tabs/SKILL.md (CSS Custom Properties table)"
      to: "packages/core/src/styles/tailwind.css (:root tabs block)"
      via: "Default values match tailwind.css :root entries exactly"
      pattern: "var(--color-border, var(--ui-color-border)) double-fallback form"
---

<objective>
Update `skill/skills/tabs/SKILL.md` to fix the CSS Custom Properties table (correct double-fallback defaults for all color tokens) and add a Behavior Notes section.

Current issues:
1. Color token defaults use single `var()` form instead of double-fallback form
2. `--ui-tabs-tab-active-bg` shows `var(--color-background)` instead of `var(--color-background, white)`
3. No Behavior Notes section (all prior phases 70-85 added this section)

Purpose: Claude agents using this skill file will implement tabs correctly without needing to read source files.
Output: `SKILL.md` with corrected 25-entry CSS token table (double-fallback color defaults) and a Behavior Notes section with ~13 entries.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Exact tailwind.css :root tabs token block (ground truth for default values): -->

```css
  --ui-tabs-border: var(--color-border, var(--ui-color-border));

  --ui-tabs-list-bg: var(--color-muted, var(--ui-color-muted));
  --ui-tabs-list-padding: 0.25rem;
  --ui-tabs-list-radius: 0.375rem;
  --ui-tabs-list-gap: 0.25rem;

  --ui-tabs-tab-padding: 0.5rem 1rem;
  --ui-tabs-tab-radius: 0.25rem;
  --ui-tabs-tab-font-size: 0.875rem;
  --ui-tabs-tab-font-weight: 500;
  --ui-tabs-tab-text: var(--color-muted-foreground, var(--ui-color-muted-foreground));
  --ui-tabs-tab-bg: transparent;
  --ui-tabs-tab-hover-text: var(--color-foreground, var(--ui-color-foreground));
  --ui-tabs-tab-hover-bg: transparent;

  --ui-tabs-tab-active-text: var(--color-foreground, var(--ui-color-foreground));
  --ui-tabs-tab-active-bg: var(--color-background, white);
  --ui-tabs-tab-active-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.05);

  --ui-tabs-panel-padding: 1rem 0;
  --ui-tabs-panel-text: var(--color-foreground, var(--ui-color-foreground));

  --ui-tabs-ring: var(--color-ring, var(--ui-color-ring));

  --ui-tabs-transition: 150ms;

  --ui-tabs-indicator-color: var(--color-primary, var(--ui-color-primary));
  --ui-tabs-indicator-height: 2px;
  --ui-tabs-indicator-radius: 9999px;
  --ui-tabs-indicator-transition: 200ms;

  --ui-tabs-scroll-button-size: 2rem;
```

From tabs.ts source — key behaviors to document in Behavior Notes:
- `lui-tabs` manages active tab state centrally; tab buttons are rendered by the parent (not by child panels)
- `value` prop = controlled mode; `default-value` = uncontrolled mode (initial value)
- `ui-change` event fires on `lui-tabs` with `{ value: string }` detail when active tab changes
- `orientation` = `"horizontal"` | `"vertical"` — controls both layout and keyboard arrow key direction
- `activation-mode` = `"automatic"` (activates on focus, default) | `"manual"` (arrows move focus only; Enter/Space activates)
- Roving tabindex: only the active tab button has `tabindex="0"`; others have `tabindex="-1"`
- Animated sliding indicator: uses CSS transform (translateX/translateY) updated via JS; respects `prefers-reduced-motion`
- Overflow scroll: `--ui-tabs-scroll-button-size` controls scroll button size; scroll buttons appear automatically when tablist overflows
- `lazy` on `lui-tab-panel`: defers slot content rendering until first activation; content preserved after deactivation (not destroyed)
- `data-state` on `lui-tab-panel`: `"active"` | `"inactive"` for CSS targeting or test queries
- Keyboard: Arrow Left/Right (horizontal) or Arrow Up/Down (vertical) navigate between enabled tabs; Home/End jump to first/last enabled tab
- Panel tabindex: panels get `tabindex="0"` only when they contain no focusable children (W3C APG pattern)
- SSR compatible via `isServer` guards; ResizeObserver and indicator positioning skip on server
- Child discovery via `slotchange` event on default slot

Established Behavior Notes pattern from prior phases (e.g. Phase 85-03 Accordion: 13 entries, Phase 84-03 Toast: 13 entries, Phase 83-03 Popover: 13 entries).
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix CSS token defaults and add Behavior Notes to SKILL.md</name>
  <files>skill/skills/tabs/SKILL.md</files>
  <action>
    In `skill/skills/tabs/SKILL.md`, make two changes:

    **1. Replace the CSS Custom Properties table** (currently 25 entries with stale single-var() defaults for color tokens) with 25 accurate entries:

    ```markdown
    ## CSS Custom Properties

    | Property | Default | Description |
    |----------|---------|-------------|
    | `--ui-tabs-border` | `var(--color-border, var(--ui-color-border))` | Border color. |
    | `--ui-tabs-list-bg` | `var(--color-muted, var(--ui-color-muted))` | Tab list background. |
    | `--ui-tabs-list-padding` | `0.25rem` | Tab list padding. |
    | `--ui-tabs-list-radius` | `0.375rem` | Tab list border radius. |
    | `--ui-tabs-list-gap` | `0.25rem` | Gap between tab buttons. |
    | `--ui-tabs-tab-padding` | `0.5rem 1rem` | Tab button padding. |
    | `--ui-tabs-tab-radius` | `0.25rem` | Tab button border radius. |
    | `--ui-tabs-tab-font-size` | `0.875rem` | Tab font size. |
    | `--ui-tabs-tab-font-weight` | `500` | Tab font weight. |
    | `--ui-tabs-tab-text` | `var(--color-muted-foreground, var(--ui-color-muted-foreground))` | Inactive tab text color. |
    | `--ui-tabs-tab-bg` | `transparent` | Inactive tab background. |
    | `--ui-tabs-tab-hover-text` | `var(--color-foreground, var(--ui-color-foreground))` | Hover tab text color. |
    | `--ui-tabs-tab-hover-bg` | `transparent` | Hover tab background. |
    | `--ui-tabs-tab-active-text` | `var(--color-foreground, var(--ui-color-foreground))` | Active tab text color. |
    | `--ui-tabs-tab-active-bg` | `var(--color-background, white)` | Active tab background. |
    | `--ui-tabs-tab-active-shadow` | `0 1px 2px 0 rgb(0 0 0 / 0.05)` | Active tab box shadow. |
    | `--ui-tabs-panel-padding` | `1rem 0` | Panel content padding. |
    | `--ui-tabs-panel-text` | `var(--color-foreground, var(--ui-color-foreground))` | Panel text color. |
    | `--ui-tabs-ring` | `var(--color-ring, var(--ui-color-ring))` | Focus ring color. |
    | `--ui-tabs-transition` | `150ms` | Transition duration. |
    | `--ui-tabs-indicator-color` | `var(--color-primary, var(--ui-color-primary))` | Sliding indicator color. |
    | `--ui-tabs-indicator-height` | `2px` | Sliding indicator height. |
    | `--ui-tabs-indicator-radius` | `9999px` | Sliding indicator border radius. |
    | `--ui-tabs-indicator-transition` | `200ms` | Sliding indicator transition duration. |
    | `--ui-tabs-scroll-button-size` | `2rem` | Scroll button size for overflow navigation. |
    ```

    **2. Append a Behavior Notes section** at the end of the file:

    ```markdown
    ## Behavior Notes

    - **State management**: `lui-tabs` manages active tab state centrally. Tab buttons are rendered by the parent inside `role="tablist"` — `lui-tab-panel` provides label and value metadata, not the button itself.
    - **Controlled mode**: Set `value` on `lui-tabs` to control the active tab externally. React to the `ui-change` event (`{ value: string }`) to keep it in sync.
    - **Uncontrolled mode**: Use `default-value` for the initial active tab. Omit `value` entirely — once `value` is set it takes precedence over `default-value`.
    - **Orientation**: `orientation="horizontal"` (default) lays tabs in a row with Left/Right arrow navigation. `orientation="vertical"` stacks tabs with Up/Down arrow navigation and side-by-side layout.
    - **Activation mode**: `activation-mode="automatic"` (default) activates a tab when it receives focus via arrow keys. `activation-mode="manual"` separates focus from activation — arrows move focus, Enter/Space activates the focused tab. Use manual mode when switching tabs has side effects (e.g. network requests).
    - **Roving tabindex**: Only the active tab button has `tabindex="0"`. All others have `tabindex="-1"`. Tab key enters and exits the tablist as a single stop.
    - **Animated indicator**: A sliding underline indicator tracks the active tab using CSS `transform: translateX/translateY`. Indicator position is computed via JS from button bounding rects. Respects `prefers-reduced-motion` (transition-duration set to 0ms).
    - **Overflow scroll**: When the tablist overflows its container, left/right scroll buttons appear automatically. `--ui-tabs-scroll-button-size` controls button dimensions. Scrolls 75% of container width per click.
    - **Lazy panels**: `lazy` attribute on `lui-tab-panel` defers slot content rendering until the first time the tab is activated. Once rendered, content is preserved when the tab is deactivated (not destroyed).
    - **data-state attribute**: Each `lui-tab-panel` exposes `data-state="active"` or `data-state="inactive"` for CSS targeting or test queries.
    - **Keyboard navigation**: Arrow Left/Right (horizontal) or Arrow Up/Down (vertical) move between enabled tabs with wrapping. Home/End jump to first/last enabled tab. Disabled tabs are skipped.
    - **Panel tabindex**: Active panels receive `tabindex="0"` only when they contain no focusable children (W3C APG Tabs pattern). If a panel has focusable children, the panel itself is not focusable.
    - **SSR compatibility**: `isServer` guards skip DOM operations (ResizeObserver, indicator calculation, scroll detection) during server-side rendering.
    ```

    Do NOT change the Usage examples, Props tables, Slots tables, or Events table — only update the CSS Custom Properties table and append Behavior Notes.
  </action>
  <verify>
    <automated>grep -c "ui-tabs-" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md</automated>
    Expect: 25 token rows in the CSS Custom Properties table (plus occurrences in Behavior Notes = more than 25 total matches).

    Also run:
    <automated>grep "Behavior Notes" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md</automated>
    Expect: Section heading found.

    Also run:
    <automated>grep "ui-color-border\|ui-color-muted\|ui-color-foreground\|ui-color-ring\|ui-color-primary" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md</automated>
    Expect: Matches confirming double-fallback var() form for color tokens.

    Also run:
    <automated>grep "color-background, white" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md</automated>
    Expect: 1 match for --ui-tabs-tab-active-bg with literal white fallback.
  </verify>
  <done>SKILL.md CSS Custom Properties table has 25 entries with double-fallback defaults for all color tokens (active-bg uses literal white); Behavior Notes section appended with ~13 entries covering state management, orientation, activation mode, indicator, overflow scroll, lazy loading, keyboard nav, and accessibility.</done>
</task>

</tasks>

<verification>
grep -n "Behavior Notes" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md
Expected: Section heading present.

grep "var(--color-muted, var(--ui-color-muted))" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md
Expected: Found (correct double-fallback default for list-bg token).

grep "color-background, white" /Users/sn0w/Documents/dev/lit-components/skill/skills/tabs/SKILL.md
Expected: Found (active-bg literal white fallback preserved).
</verification>

<success_criteria>
- CSS Custom Properties table has exactly 25 entries
- All color token defaults use double-fallback `var(--color-X, var(--ui-color-X))` form (active-bg uses literal `white`)
- Behavior Notes section present with ~13 entries
</success_criteria>

<output>
After completion, create `.planning/phases/86-tabs/86-03-SUMMARY.md`
</output>
