---
phase: 80-date-range-picker
plan: 03
type: execute
wave: 3
depends_on:
  - 80-01
  - 80-02
files_modified:
  - skill/skills/date-range-picker/SKILL.md
autonomous: true
requirements:
  - DRP-03

must_haves:
  truths:
    - "SKILL.md CSS Custom Properties table lists exactly the 31 --ui-date-range-* tokens from tailwind.css :root with correct defaults"
    - "No stale --ui-range-* or --ui-date-picker-* token names remain in the skill file"
    - "Behavior Notes section exists covering range selection, comparison mode, presets, drag selection, dark mode, and form integration"
    - "Events table is accurate (change event with correct detail shape)"
  artifacts:
    - path: "skill/skills/date-range-picker/SKILL.md"
      provides: "Date Range Picker skill with 31 CSS tokens, 1 event, and Behavior Notes"
      contains: "ui-date-range-bg"
  key_links:
    - from: "skill/skills/date-range-picker/SKILL.md CSS Custom Properties"
      to: "packages/core/src/styles/tailwind.css :root"
      via: "token names and defaults matching tailwind.css :root exactly"
      pattern: "ui-date-range-bg.*color-background"
---

<objective>
Rewrite skill/skills/date-range-picker/SKILL.md to replace stale --ui-range-* / --ui-date-picker-* token entries with the 31 actual --ui-date-range-* tokens from tailwind.css :root, and add a Behavior Notes section.

Purpose: The current SKILL.md misleads Claude with wrong token names, causing incorrect code generation. This is the agent-facing document — accuracy here directly affects implementation quality.

Output: SKILL.md with 31 accurate CSS tokens, verified Events table, and a Behavior Notes section matching the pattern established in Phases 70-03 through 79-03.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/80-date-range-picker/80-02-SUMMARY.md

The established pattern (Phases 70-03 through 79-03): Expand SKILL.md CSS token table to match tailwind.css :root exactly; use double-fallback var() form for color tokens; use exact literal values for structural tokens; add Behavior Notes section with 8-12 entries covering popup behavior, keyboard nav, interaction model, dark mode, form integration.

**Current SKILL.md state:** 7 stale entries with wrong token names (--ui-range-*, --ui-date-picker-*) and hardcoded hex defaults. Needs full replacement.

**Correct 31 tokens from tailwind.css :root:**
1.  --ui-date-range-bg: var(--color-background, white)
2.  --ui-date-range-text: var(--color-foreground, var(--ui-color-foreground))
3.  --ui-date-range-border: var(--color-border, var(--ui-color-border))
4.  --ui-date-range-placeholder: var(--color-muted-foreground, var(--ui-color-muted-foreground))
5.  --ui-date-range-label-text: var(--color-foreground, var(--ui-color-foreground))
6.  --ui-date-range-error: var(--color-destructive, var(--ui-color-destructive))
7.  --ui-date-range-ring: var(--color-ring, var(--ui-color-ring))
8.  --ui-date-range-popup-bg: var(--color-card, var(--ui-color-card))
9.  --ui-date-range-popup-border: var(--color-border, var(--ui-color-border))
10. --ui-date-range-popup-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.08)
11. --ui-date-range-hover-bg: var(--color-muted, var(--ui-color-muted))
12. --ui-date-range-disabled-bg: var(--color-muted, var(--ui-color-muted))
13. --ui-date-range-disabled-border: var(--color-border, var(--ui-color-border))
14. --ui-date-range-helper-text: var(--color-muted-foreground, var(--ui-color-muted-foreground))
15. --ui-date-range-action-text: var(--color-muted-foreground, var(--ui-color-muted-foreground))
16. --ui-date-range-preset-bg: var(--color-background, white)
17. --ui-date-range-preset-text: var(--color-foreground, var(--ui-color-foreground))
18. --ui-date-range-preset-border: var(--color-border, var(--ui-color-border))
19. --ui-date-range-preset-hover-bg: var(--color-muted, var(--ui-color-muted))
20. --ui-date-range-sidebar-border: var(--color-border, var(--ui-color-border))
21. --ui-date-range-footer-border: var(--color-border, var(--ui-color-border))
22. --ui-date-range-clear-border: var(--color-border, var(--ui-color-border))
23. --ui-date-range-clear-text: var(--color-foreground, var(--ui-color-foreground))
24. --ui-date-range-clear-hover-bg: var(--color-muted, var(--ui-color-muted))
25. --ui-date-range-toggle-border: var(--color-border, var(--ui-color-border))
26. --ui-date-range-toggle-hover-bg: var(--color-muted, var(--ui-color-muted))
27. --ui-date-range-toggle-active-bg: var(--color-primary, var(--ui-color-primary))
28. --ui-date-range-toggle-active-text: var(--color-primary-foreground, var(--ui-color-primary-foreground))
29. --ui-date-range-compare-highlight-bg: oklch(0.93 0.06 85)
30. --ui-date-range-compare-preview-bg: oklch(0.97 0.03 85)
31. --ui-date-range-z-index: 40

**Events (verify against date-range-picker.ts source):**
- `ui-change` event (or `change` — verify the actual event name in the component source) with detail: `{ startDate: string, endDate: string, isoInterval: string, compareStartDate?: string, compareEndDate?: string, compareIsoInterval?: string }`

**Important:** Check the actual event name in packages/date-range-picker/src/date-range-picker.ts before writing the SKILL.md. Prior components use `ui-change` (checkbox, switch) while calendar/date-picker use `change`. Use whatever the source fires.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite SKILL.md with 31 accurate CSS tokens, correct Events, and Behavior Notes</name>
  <files>skill/skills/date-range-picker/SKILL.md</files>
  <action>
First, read packages/date-range-picker/src/date-range-picker.ts to confirm the actual event name dispatched (look for `dispatchEvent(new CustomEvent(` calls) and the exact detail shape.

Then rewrite skill/skills/date-range-picker/SKILL.md preserving the frontmatter and Props table (they are accurate), but replacing:

1. **CSS Custom Properties table**: Replace the 7 stale entries with all 31 --ui-date-range-* tokens listed in the context above. Use the same markdown table format as the current file. Column order: Property | Default | Description.

2. **Events table**: Update to use the correct event name (verify from source). Detail column must match the actual dispatched detail: `{ startDate: string, endDate: string, isoInterval: string, compareStartDate?: string, compareEndDate?: string, compareIsoInterval?: string }`.

3. **Behavior Notes section**: Add a new `## Behavior Notes` section at the end of the file (after Events) with 10-12 bullet entries covering:
   - Two-click range selection model (first click = start, second click = end; auto-normalizes if end < start)
   - Dual-calendar popup layout (two months side by side)
   - Drag selection: click-drag for faster range selection; releases on same cell stays in "start-selected" state
   - Popup uses Floating UI for positioning (anchored to input, viewport-aware)
   - Presets sidebar: `presets` attribute enables default presets (Last 7/30/90 Days, This Month); pass `DateRangePreset[]` array via JS for custom presets
   - Comparison mode: `comparison` attribute enables a second range; toggle buttons in popup switch active range (primary = blue tokens, compare = amber oklch tokens)
   - compare-highlight-bg and compare-preview-bg use oklch literals in :root; override them to change comparison overlay colors
   - Dark mode: all tokens except compare-highlight-bg and compare-preview-bg cascade automatically through semantic .dark overrides; no per-component .dark block required
   - Form association: submits as ISO 8601 interval format `YYYY-MM-DD/YYYY-MM-DD`; name attribute sets the field name
   - Keyboard navigation: Escape closes popup and returns focus to input; Tab trapped within popup; arrow keys navigate calendar days
   - range-* tokens (selected-bg, highlight-bg, preview-bg) are applied by the embedded calendar component directly, not by --ui-date-range-* tokens
   - min-days / max-days constrain the allowed range duration; violating durations show tooltip on disabled dates

Commit: `feat(80-03): expand SKILL.md CSS tokens 7→31 with correct --ui-date-range-* names; add Behavior Notes`
  </action>
  <verify>
    <automated>grep -c "ui-date-range" /Users/sn0w/Documents/dev/lit-components/skill/skills/date-range-picker/SKILL.md</automated>
  </verify>
  <done>
grep shows 31+ matches for "ui-date-range" in SKILL.md. No "ui-range-selected", "ui-date-picker-radius", or other stale names remain. A "## Behavior Notes" section exists at the end of the file with at least 10 bullet entries.
  </done>
</task>

</tasks>

<verification>
1. `grep -c "ui-date-range" skill/skills/date-range-picker/SKILL.md` — returns 31+
2. `grep "ui-range-selected\|ui-date-picker-radius\|ui-date-picker-bg" skill/skills/date-range-picker/SKILL.md` — returns empty (stale names gone)
3. `grep "Behavior Notes" skill/skills/date-range-picker/SKILL.md` — returns match
4. `grep "ui-date-range-toggle-active-bg\|ui-date-range-compare-preview-bg\|ui-date-range-z-index" skill/skills/date-range-picker/SKILL.md` — returns matches (new tokens present)
</verification>

<success_criteria>
- SKILL.md CSS Custom Properties table has exactly 31 --ui-date-range-* entries
- All color token defaults use double-fallback var() form matching tailwind.css :root
- popup-shadow, compare-highlight-bg, compare-preview-bg, z-index use exact literal values
- Events table event name matches the actual event dispatched by date-range-picker.ts
- Behavior Notes section exists with 10+ entries
- No stale --ui-range-* or --ui-date-picker-* names remain
</success_criteria>

<output>
After completion, create `.planning/phases/80-date-range-picker/80-03-SUMMARY.md`
</output>
