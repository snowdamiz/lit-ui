# Requirements Archive: v2.0 NPM + SSR

**Archived:** 2026-01-25
**Status:** SHIPPED

This is the archived requirements specification for v2.0.
For current requirements, see `.planning/PROJECT.md` (Active/Validated sections).

---

# Requirements: LitUI v2.0

**Defined:** 2026-01-24
**Core Value:** Developers can use polished, accessible UI components in any framework without lock-in

## v2.0 Requirements

Requirements for NPM package distribution and SSR compatibility.

### Monorepo Infrastructure

- [x] **MONO-01**: Project uses pnpm workspaces for package management
- [x] **MONO-02**: Changesets configured for version management and changelogs
- [x] **MONO-03**: Shared TypeScript config across packages
- [x] **MONO-04**: Shared Vite build config for library mode

### Core Package (@lit-ui/core)

- [x] **CORE-01**: @lit-ui/core package exports TailwindElement base class
- [x] **CORE-02**: TailwindElement supports SSR with static styles (no constructable stylesheets)
- [x] **CORE-03**: TailwindElement optimizes to constructable stylesheets on client after hydration
- [x] **CORE-04**: Design tokens exported as CSS custom properties
- [x] **CORE-05**: Package has proper exports field with conditional exports
- [x] **CORE-06**: Package marked sideEffects: false for tree shaking
- [x] **CORE-07**: Lit declared as peer dependency ^3.0.0

### Component Packages

- [x] **COMP-01**: @lit-ui/button package exports Button component
- [x] **COMP-02**: @lit-ui/dialog package exports Dialog component
- [x] **COMP-03**: Components use isServer guards for ElementInternals
- [x] **COMP-04**: Components use isServer guards for DOM APIs (showModal, etc.)
- [x] **COMP-05**: Both packages depend on @lit-ui/core as peer dependency
- [x] **COMP-06**: TypeScript declarations generated and exported
- [x] **COMP-07**: ESM-only output (no CJS)

### SSR Package (@lit-ui/ssr)

- [x] **SSR-01**: @lit-ui/ssr package provides SSR render utilities
- [x] **SSR-02**: Render function outputs Declarative Shadow DOM HTML
- [x] **SSR-03**: Hydration helper ensures correct module load order
- [x] **SSR-04**: isServer utility exported for component authors
- [x] **SSR-05**: SSR package re-exports @lit-labs/ssr essentials

### SSR Framework Integration

- [x] **FRAME-01**: Next.js integration guide with working example
- [x] **FRAME-02**: Astro integration guide with working example
- [x] **FRAME-03**: Generic Node.js SSR example for other frameworks

### CLI Enhancement

- [x] **CLI-01**: lit-ui.json supports mode: "copy-source" | "npm"
- [x] **CLI-02**: `lit-ui init` prompts for distribution mode
- [x] **CLI-03**: `lit-ui add` in npm mode runs npm/pnpm/yarn install
- [x] **CLI-04**: `lit-ui add` in copy-source mode works as before
- [x] **CLI-05**: `lit-ui migrate` converts copy-source to npm mode

### Publishing

- [x] **PUB-01**: All packages published to npm under @lit-ui scope
- [x] **PUB-02**: Package versions follow semver
- [x] **PUB-03**: README included in each published package
- [x] **PUB-04**: Changelog generated via changesets

### Documentation

- [x] **DOC-01**: NPM installation guide in docs site
- [x] **DOC-02**: SSR setup guide with hydration instructions
- [x] **DOC-03**: Migration guide from copy-source to npm mode

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| MONO-01 | Phase 13 | Complete |
| MONO-02 | Phase 13 | Complete |
| MONO-03 | Phase 13 | Complete |
| MONO-04 | Phase 13 | Complete |
| CORE-01 | Phase 14 | Complete |
| CORE-02 | Phase 14 | Complete |
| CORE-03 | Phase 14 | Complete |
| CORE-04 | Phase 14 | Complete |
| CORE-05 | Phase 14 | Complete |
| CORE-06 | Phase 14 | Complete |
| CORE-07 | Phase 14 | Complete |
| COMP-01 | Phase 15 | Complete |
| COMP-02 | Phase 15 | Complete |
| COMP-03 | Phase 15 | Complete |
| COMP-04 | Phase 15 | Complete |
| COMP-05 | Phase 15 | Complete |
| COMP-06 | Phase 15 | Complete |
| COMP-07 | Phase 15 | Complete |
| SSR-01 | Phase 16 | Complete |
| SSR-02 | Phase 16 | Complete |
| SSR-03 | Phase 16 | Complete |
| SSR-04 | Phase 16 | Complete |
| SSR-05 | Phase 16 | Complete |
| FRAME-01 | Phase 17 | Complete |
| FRAME-02 | Phase 17 | Complete |
| FRAME-03 | Phase 17 | Complete |
| CLI-01 | Phase 18 | Complete |
| CLI-02 | Phase 18 | Complete |
| CLI-03 | Phase 18 | Complete |
| CLI-04 | Phase 18 | Complete |
| CLI-05 | Phase 18 | Complete |
| PUB-01 | Phase 19 | Complete |
| PUB-02 | Phase 19 | Complete |
| PUB-03 | Phase 19 | Complete |
| PUB-04 | Phase 19 | Complete |
| DOC-01 | Phase 20 | Complete |
| DOC-02 | Phase 20 | Complete |
| DOC-03 | Phase 20 | Complete |

---

## Milestone Summary

**Shipped:** 35 of 35 v2.0 requirements
**Adjusted:** None
**Dropped:** None

---
*Archived: 2026-01-25 as part of v2.0 milestone completion*
