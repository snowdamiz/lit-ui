# Milestone v4.1: Select Component

**Status:** ✅ SHIPPED 2026-01-27
**Phases:** 31-37
**Total Plans:** 28

## Overview

Full-featured Select component with single-select, multi-select, combobox/autocomplete, and async data loading — completing the form toolkit with the most complex form primitive. Built on Floating UI for positioning, @tanstack/lit-virtual for performance, and ARIA 1.2 combobox pattern for accessibility.

## Phases

### Phase 31: Select Infrastructure

**Goal**: Foundational CSS tokens, package structure, and positioning library are ready for Select component development
**Depends on**: None (builds on existing theme system from v3.0, patterns from v4.0)
**Plans**: 2 plans

Plans:
- [x] 31-01: Add CSS tokens for select to @lit-ui/core (45 --ui-select-* custom properties)
- [x] 31-02: Create @lit-ui/select package with Floating UI positioning

---

### Phase 32: Core Single Select

**Goal**: Users can select a single value from a dropdown with full keyboard navigation, ARIA compliance, and form participation
**Depends on**: Phase 31 (CSS tokens and package must exist)
**Plans**: 4 plans

Plans:
- [x] 32-01: Dropdown and options infrastructure
- [x] 32-02: Keyboard navigation and type-ahead
- [x] 32-03: Form participation and visual states
- [x] 32-04: Final verification checkpoint

---

### Phase 33: Select Enhancements

**Goal**: Select component supports advanced organization and customization features beyond basic single-select
**Depends on**: Phase 32 (core single select must work)
**Plans**: 4 plans

Plans:
- [x] 33-01: Slot-based options with custom content
- [x] 33-02: Option groups component
- [x] 33-03: Clearable select
- [x] 33-04: Final verification checkpoint

---

### Phase 34: Multi-Select

**Goal**: Users can select multiple values displayed as removable tags with proper form submission
**Depends on**: Phase 32 (single select foundation required)
**Plans**: 4 plans

Plans:
- [x] 34-01: Core multi-select mode with selection tracking and form participation
- [x] 34-02: Tag display with removal functionality
- [x] 34-03: Tag overflow and select all / deselect all actions
- [x] 34-04: Human verification checkpoint

---

### Phase 35: Combobox

**Goal**: Users can type to filter options with highlighted matches and optional ability to create new options
**Depends on**: Phase 32 (single select foundation), benefits from Phase 34 patterns
**Plans**: 4 plans

Plans:
- [x] 35-01: Searchable mode foundation with filtering and input trigger
- [x] 35-02: Match highlighting and empty state
- [x] 35-03: Custom filter function and creatable mode
- [x] 35-04: Human verification checkpoint

---

### Phase 36: Async Loading

**Goal**: Select supports loading options from async sources with proper loading states, error handling, and performance optimization
**Depends on**: Phase 32 (core select), Phase 35 (combobox for async search)
**Plans**: 6 plans

Plans:
- [x] 36-01: Add dependencies and skeleton loading placeholders
- [x] 36-02: Promise-based options with loading/error states
- [x] 36-03: Async search with debounce and AbortController
- [x] 36-04: Virtual scrolling integration
- [x] 36-05: Infinite scroll pagination
- [x] 36-06: Human verification checkpoint

---

### Phase 37: CLI and Documentation

**Goal**: Developers can install Select via CLI and learn all features from comprehensive documentation
**Depends on**: Phase 32-36 (Select component features complete)
**Plans**: 4 plans

Plans:
- [x] 37-01: CLI NPM mode and list command integration
- [x] 37-02: Async & Performance documentation section
- [x] 37-03: CLI registry and template gap closure
- [x] 37-04: Accessibility documentation section

---

## Milestone Summary

**Key Decisions:**

- Floating UI for dropdown positioning (collision detection, auto-placement)
- ARIA 1.2 combobox pattern (aria-controls, not aria-owns)
- Options via property + slot fallback (flexible API)
- @tanstack/lit-virtual for DOM recycling (100+ options)
- AbortController for async search (prevent race conditions)
- IntersectionObserver sentinel for infinite scroll
- Minimal CLI starter template (~200 lines vs 1500+ full component)

**Issues Resolved:**

- Slot render loop in searchable mode (fixed: always render slot, hide with display:none)
- MutationObserver infinite loop (fixed: prevent re-render on mutation during sync)

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- None (zero TODO/FIXME/HACK in component code)

---

_For current project status, see .planning/ROADMAP.md_
