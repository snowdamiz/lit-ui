---
phase: 096-cli-integration-documentation
plan: 04
type: execute
wave: 3
depends_on:
  - 096-01
  - 096-03
files_modified:
  - apps/docs/src/pages/charts/ScatterChartPage.tsx
  - apps/docs/src/pages/charts/HeatmapChartPage.tsx
  - apps/docs/src/pages/charts/CandlestickChartPage.tsx
  - apps/docs/src/pages/charts/TreemapChartPage.tsx
  - apps/docs/src/App.tsx
  - apps/docs/src/nav.ts
autonomous: true
requirements:
  - DOCS-01
  - DOCS-02

must_haves:
  truths:
    - "Developer can navigate to /charts/scatter-chart, /charts/heatmap-chart, /charts/candlestick-chart, /charts/treemap-chart and see working docs"
    - "All 8 chart routes are registered in App.tsx and all 8 chart pages appear in nav.ts under a 'Charts' section"
    - "Docs include a bundle size section explaining Canvas vs WebGL impact and per-chart tree-shaking"
    - "Scatter chart page documents the enable-gl WebGL path with size implications"
  artifacts:
    - path: "apps/docs/src/pages/charts/ScatterChartPage.tsx"
      provides: "Scatter chart docs page with WebGL note"
      contains: "lui-scatter-chart"
    - path: "apps/docs/src/pages/charts/HeatmapChartPage.tsx"
      provides: "Heatmap chart docs page"
      contains: "lui-heatmap-chart"
    - path: "apps/docs/src/pages/charts/CandlestickChartPage.tsx"
      provides: "Candlestick chart docs page with OHLC order warning"
      contains: "lui-candlestick-chart"
    - path: "apps/docs/src/pages/charts/TreemapChartPage.tsx"
      provides: "Treemap chart docs page"
      contains: "lui-treemap-chart"
    - path: "apps/docs/src/App.tsx"
      provides: "Routes for all 8 chart pages"
      contains: "charts/line-chart"
    - path: "apps/docs/src/nav.ts"
      provides: "Charts nav section with 8 items"
      contains: "Charts"
  key_links:
    - from: "apps/docs/src/App.tsx"
      to: "apps/docs/src/pages/charts/*Page.tsx"
      via: "React Router Route elements"
      pattern: "path=\"charts/.*-chart\""
    - from: "apps/docs/src/nav.ts"
      to: "chart route paths"
      via: "NavSection items href field"
      pattern: "href.*\/charts\/"
---

<objective>
Create docs pages for the final 4 chart types (Scatter, Heatmap, Candlestick, Treemap), wire all 8 chart routes into App.tsx, add a Charts navigation section to nav.ts, and document bundle size guidance.

Purpose: Completes DOCS-01 (all 8 chart pages) and DOCS-02 (bundle size guidance). This is the final plan of v9.0.
Output: 4 chart page files, updated App.tsx routes, updated nav.ts with Charts section.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/096-cli-integration-documentation/096-01-SUMMARY.md
@.planning/phases/096-cli-integration-documentation/096-03-SUMMARY.md

<interfaces>
<!-- Patterns from this codebase the executor needs directly. -->

From apps/docs/src/App.tsx (existing route registration — pattern to follow):
```tsx
import { ButtonPage } from './pages/components/ButtonPage'
// ... other imports

export default function App() {
  return (
    <ThemeProvider>
      <BrowserRouter>
        <Routes>
          <Route element={<DocsLayout />}>
            {/* Components */}
            <Route path="components/button" element={<ButtonPage />} />
            {/* ... */}
            {/* Catch-all for undefined routes */}
            <Route path="*" element={<Placeholder />} />
          </Route>
        </Routes>
      </BrowserRouter>
    </ThemeProvider>
  )
}
```
Add chart routes as: `<Route path="charts/line-chart" element={<LineChartPage />} />` etc.
IMPORTANT: The 4 pages from Plan 03 are in `./pages/charts/LineChartPage` (not `./pages/components/`).
Add ALL 8 routes (4 from Plan 03 + 4 from this plan) to App.tsx.

From apps/docs/src/nav.ts (existing navigation — pattern to follow):
```typescript
export const navigation: NavSection[] = [
  { title: "Overview", items: [...] },
  { title: "Guides", items: [...] },
  { title: "Components", items: [
    { title: "Accordion", href: "/components/accordion" },
    // ...
    { title: "Tooltip", href: "/components/tooltip" },
  ]},
  { title: "Tools", items: [...] },
]
```
Add a new "Charts" section AFTER "Components" and BEFORE "Tools":
```typescript
{
  title: "Charts",
  items: [
    { title: "Line Chart", href: "/charts/line-chart" },
    { title: "Area Chart", href: "/charts/area-chart" },
    { title: "Bar Chart", href: "/charts/bar-chart" },
    { title: "Pie Chart", href: "/charts/pie-chart" },
    { title: "Scatter Chart", href: "/charts/scatter-chart" },
    { title: "Heatmap Chart", href: "/charts/heatmap-chart" },
    { title: "Candlestick Chart", href: "/charts/candlestick-chart" },
    { title: "Treemap Chart", href: "/charts/treemap-chart" },
  ],
},
```

Chart data binding pattern (REQUIRED for demos — same as Plan 03):
```tsx
import { useEffect, useRef } from 'react';
function ScatterChartDemo() {
  const ref = useRef<HTMLElement>(null);
  useEffect(() => {
    if (ref.current) {
      (ref.current as any).data = [ ... ];
    }
  }, []);
  return <lui-scatter-chart ref={ref as any} style={{ height: '300px', display: 'block' }} />;
}
```

Chart-specific props from RESEARCH.md:
- LuiScatterChart: bubble:boolean(false). Note: add enable-gl:boolean(false) to props table — "WebGL rendering for 500K+ points via echarts-gl (lazy loaded ~200KB gzipped additional)"
- LuiHeatmapChart: x-categories:string[]([])), y-categories:string[]([])), color-range:[string,string](['#313695','#a50026'])
  NOTE: x-categories and y-categories are set as ATTRIBUTES (string arrays via JSON) OR via property. For the demo, set via property in useEffect.
- LuiCandlestickChart: bull-color:string('#26a69a'), bear-color:string('#ef5350'), show-volume:boolean(false), moving-averages:MAConfig[](undefined)
  CRITICAL: OhlcBar data order is [open, close, low, high] — NOT standard OHLC acronym order. Document this prominently in the props description and demo code.
- LuiTreemapChart: breadcrumb:boolean(true), rounded:boolean(false), level-colors:string[][]|null(null)

Demo data for each chart:
- ScatterChart: 10 {x, y} points. e.g. [{x:10,y:20},{x:30,y:50},...]
- HeatmapChart: {xCategories:['Mon','Tue','Wed','Thu','Fri'], yCategories:['Morning','Afternoon','Evening'], data:[{x:0,y:0,value:85},{x:1,y:1,value:42},...]} set as separate properties: ref.current.xCategories, ref.current.yCategories, ref.current.data
  Wait — HeatmapChart: x-categories and y-categories are @property declarations on LuiHeatmapChart. In JSX pass as attributes: x-categories={JSON.stringify([...])} OR set via ref. Use ref+useEffect for consistency.
- CandlestickChart: OhlcBar[] — 5 bars in [open, close, low, high] format:
  [{date:'2024-01-01', ohlc:[100,110,95,115]}, ...]
- TreemapChart: TreemapNode[] — [{name:'Electronics',value:42,children:[{name:'Phones',value:25},{name:'Laptops',value:17}]},{name:'Clothing',value:28,children:[{name:'Shirts',value:15},{name:'Pants',value:13}]}]

Bundle size section content (for DOCS-02 — include in ScatterChartPage.tsx as it's the chart with WebGL impact, AND add a brief note in each other chart page footer or as a standalone section):
| Import | What's included | Approx. gzipped |
| `import '@lit-ui/charts'` (all charts) | All 8 chart types + all ECharts modules | ~350KB+ |
| `import '@lit-ui/charts/line-chart'` | LineChart + line ECharts modules | ~135KB |
| `import '@lit-ui/charts/scatter-chart'` | ScatterChart + scatter modules | ~135KB |
| Canvas mode (default) | No extra cost | 0 |
| WebGL mode (`enable-gl`) | echarts-gl, lazy loaded | +~200KB gzipped |
Recommendation: Add this as a `## Bundle Size` section inside ScatterChartPage.tsx (since it's the chart with WebGL), and add a brief 2-sentence callout at the top of each other chart page noting to use subpath imports.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ScatterChartPage.tsx, HeatmapChartPage.tsx, CandlestickChartPage.tsx, TreemapChartPage.tsx</name>
  <files>
    apps/docs/src/pages/charts/ScatterChartPage.tsx
    apps/docs/src/pages/charts/HeatmapChartPage.tsx
    apps/docs/src/pages/charts/CandlestickChartPage.tsx
    apps/docs/src/pages/charts/TreemapChartPage.tsx
  </files>
  <action>
Create 4 chart page files in apps/docs/src/pages/charts/. Follow the same structure as the Plan 03 pages (LineChartPage, etc.). Each page must:
1. Side-effect import the subpath: `import '@lit-ui/charts/scatter-chart'` etc.
2. Define a demo component using useRef + useEffect to set .data property
3. Include ExampleBlock with the demo
4. Include PropsTable with chart-specific props + shared BaseChartElement props
5. Include CSS token table (same 10 tokens for all charts)
6. Export a named function: `export function ScatterChartPage() { ... }`

**ScatterChartPage.tsx specifics:**
- Description: "Scatter and bubble chart with optional WebGL rendering for 500K+ point datasets."
- Demo data: 10 {x, y} scatter points (random-ish values covering a range)
- Props: bubble:boolean(false), plus all BaseChartElement props. For enable-gl, description must say: "Enables WebGL rendering via echarts-gl for datasets with 500K+ points. Adds ~200KB gzipped when activated (lazy loaded)."
- After the PropsTable, add a `## Bundle Size` section as a styled div with a table comparing: full import vs subpath import vs Canvas vs WebGL. Use Tailwind table styling consistent with the rest of the docs app (check-mark for good, info for reference)

**HeatmapChartPage.tsx specifics:**
- Description: "Cartesian heatmap with configurable x/y category axes and VisualMap color scale."
- Demo: Set xCategories, yCategories, and data via useEffect (three separate property assignments). Use 5x3 grid (Mon-Fri x Morning/Afternoon/Evening).
- Props: x-categories:string[]([])), y-categories:string[]([])), color-range:[string,string](default shown), plus BaseChartElement shared

**CandlestickChartPage.tsx specifics:**
- Description: "OHLC candlestick chart with volume panel, SMA/EMA moving averages, and streaming."
- CRITICAL: In the props table for `data`, the type description MUST include: "OhlcBar[] — each bar is { date: string, ohlc: [open, close, low, high] }. WARNING: ohlc array order is [open, close, low, high], NOT the standard OHLC acronym order."
- Demo data: 5 OhlcBar objects with dates and realistic-looking price data
- Props: bull-color, bear-color, show-volume, moving-averages, plus BaseChartElement shared

**TreemapChartPage.tsx specifics:**
- Description: "Hierarchical treemap with space-filling layout, breadcrumb navigation, and per-level colors."
- Demo: TreemapNode[] with 2 root nodes each having 2 children (structure from interfaces section)
- Props: breadcrumb:boolean(true), rounded:boolean(false), level-colors:string[][]|null(null), plus BaseChartElement shared

For ALL 4 pages, add a brief callout box near the top (after the header, before examples):
```tsx
<div className="mb-8 p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 text-sm text-blue-800 dark:text-blue-200">
  <strong>Tree-shaking tip:</strong> Import <code>@lit-ui/charts/scatter-chart</code> (subpath) instead of <code>@lit-ui/charts</code> to include only this chart's modules (~135KB gzipped vs 350KB+ for all charts).
</div>
```
  </action>
  <verify>
    <automated>cd /Users/sn0w/Documents/dev/lit-components && pnpm --filter lit-ui-docs tsc --noEmit 2>&1 | grep "error TS" | wc -l</automated>
  </verify>
  <done>TypeScript check outputs 0 (no errors). 8 TSX files exist in apps/docs/src/pages/charts/ (4 from Plan 03 + 4 from this task). All 4 new pages export named functions.</done>
</task>

<task type="auto">
  <name>Task 2: Wire all 8 chart routes into App.tsx and add Charts section to nav.ts</name>
  <files>
    apps/docs/src/App.tsx
    apps/docs/src/nav.ts
  </files>
  <action>
**App.tsx:** Add imports and routes for all 8 chart pages. Import from `./pages/charts/` path (not components/).

Add these imports near the top (after existing page imports, before the default export):
```tsx
import { LineChartPage } from './pages/charts/LineChartPage'
import { AreaChartPage } from './pages/charts/AreaChartPage'
import { BarChartPage } from './pages/charts/BarChartPage'
import { PieChartPage } from './pages/charts/PieChartPage'
import { ScatterChartPage } from './pages/charts/ScatterChartPage'
import { HeatmapChartPage } from './pages/charts/HeatmapChartPage'
import { CandlestickChartPage } from './pages/charts/CandlestickChartPage'
import { TreemapChartPage } from './pages/charts/TreemapChartPage'
```

Add these routes inside the `<Route element={<DocsLayout />}>` group, BEFORE the catch-all `<Route path="*" ...>`:
```tsx
{/* Charts */}
<Route path="charts/line-chart" element={<LineChartPage />} />
<Route path="charts/area-chart" element={<AreaChartPage />} />
<Route path="charts/bar-chart" element={<BarChartPage />} />
<Route path="charts/pie-chart" element={<PieChartPage />} />
<Route path="charts/scatter-chart" element={<ScatterChartPage />} />
<Route path="charts/heatmap-chart" element={<HeatmapChartPage />} />
<Route path="charts/candlestick-chart" element={<CandlestickChartPage />} />
<Route path="charts/treemap-chart" element={<TreemapChartPage />} />
```

**nav.ts:** Add a "Charts" NavSection AFTER the "Components" section and BEFORE the "Tools" section:
```typescript
{
  title: "Charts",
  items: [
    { title: "Line Chart", href: "/charts/line-chart" },
    { title: "Area Chart", href: "/charts/area-chart" },
    { title: "Bar Chart", href: "/charts/bar-chart" },
    { title: "Pie Chart", href: "/charts/pie-chart" },
    { title: "Scatter Chart", href: "/charts/scatter-chart" },
    { title: "Heatmap Chart", href: "/charts/heatmap-chart" },
    { title: "Candlestick Chart", href: "/charts/candlestick-chart" },
    { title: "Treemap Chart", href: "/charts/treemap-chart" },
  ],
},
```

After editing both files, run a TypeScript check:
`cd /Users/sn0w/Documents/dev/lit-components && pnpm --filter lit-ui-docs build 2>&1 | tail -20`
Fix any TypeScript errors before considering this task done.
  </action>
  <verify>
    <automated>grep -c "charts/" /Users/sn0w/Documents/dev/lit-components/apps/docs/src/App.tsx</automated>
  </verify>
  <done>App.tsx has 8 chart routes (grep for "charts/" shows 8); nav.ts has a "Charts" section with 8 items; docs app builds without TypeScript errors</done>
</task>

</tasks>

<verification>
1. `ls apps/docs/src/pages/charts/` shows 8 TSX files
2. `grep "charts/" apps/docs/src/App.tsx | wc -l` outputs 8
3. `grep -A 20 "title: \"Charts\"" apps/docs/src/nav.ts | grep href | wc -l` outputs 8
4. `pnpm --filter lit-ui-docs build` exits 0 (docs app builds without errors)
</verification>

<success_criteria>
- 4 new chart pages created in apps/docs/src/pages/charts/
- App.tsx has routes for all 8 chart types under `charts/[name]` paths
- nav.ts has a "Charts" NavSection with 8 items
- ScatterChartPage includes the bundle size table (DOCS-02)
- All other pages have the tree-shaking callout box
- Docs app TypeScript build passes
</success_criteria>

<output>
After completion, create `.planning/phases/096-cli-integration-documentation/096-04-SUMMARY.md`
</output>
