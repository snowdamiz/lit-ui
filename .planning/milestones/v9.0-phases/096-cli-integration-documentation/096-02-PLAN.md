---
phase: 096-cli-integration-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/cli/src/registry/registry.json
  - packages/cli/src/utils/install-component.ts
  - packages/cli/src/templates/line-chart.ts
  - packages/cli/src/templates/area-chart.ts
  - packages/cli/src/templates/bar-chart.ts
  - packages/cli/src/templates/pie-chart.ts
  - packages/cli/src/templates/scatter-chart.ts
  - packages/cli/src/templates/heatmap-chart.ts
  - packages/cli/src/templates/candlestick-chart.ts
  - packages/cli/src/templates/treemap-chart.ts
  - packages/cli/src/templates/index.ts
autonomous: true
requirements:
  - CLI-01
  - CLI-03

must_haves:
  truths:
    - "Developer can run 'npx lit-ui add line-chart' (and all 7 other chart names) and receive a working starter file"
    - "Each chart template imports from the correct subpath '@lit-ui/charts/line-chart' (not full package)"
    - "In npm mode, all 8 chart names map to '@lit-ui/charts' (single package, not '@lit-ui/line-chart')"
  artifacts:
    - path: "packages/cli/src/registry/registry.json"
      provides: "8 new chart entries in the components array"
      contains: "line-chart.*@lit-ui/charts"
    - path: "packages/cli/src/utils/install-component.ts"
      provides: "componentToPackage mapping for all 8 chart names"
      contains: "line-chart.*@lit-ui/charts"
    - path: "packages/cli/src/templates/line-chart.ts"
      provides: "LINE_CHART_TEMPLATE — working Lit component using @lit-ui/charts/line-chart"
      contains: "LINE_CHART_TEMPLATE"
    - path: "packages/cli/src/templates/index.ts"
      provides: "Exports all 8 chart templates + COMPONENT_TEMPLATES map entries"
      contains: "LINE_CHART_TEMPLATE"
  key_links:
    - from: "packages/cli/src/registry/registry.json"
      to: "packages/cli/src/utils/install-component.ts"
      via: "CLI add command uses registry for copy-source, install-component for npm mode"
      pattern: "line-chart.*@lit-ui/charts"
    - from: "packages/cli/src/templates/index.ts"
      to: "COMPONENT_TEMPLATES record"
      via: "getComponentTemplate() lookup by name"
      pattern: "COMPONENT_TEMPLATES.*line-chart"
---

<objective>
Add all 8 chart types to the CLI so developers can install them via `npx lit-ui add [chart-name]`, receiving a working copy-source starter template or having @lit-ui/charts installed via npm.

Purpose: CLI-01 and CLI-03 — charts must be first-class citizens in the CLI install UX alongside existing 18 components.
Output: 8 registry entries, 8 template files, updated install-component.ts and templates/index.ts.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

<interfaces>
<!-- Key contracts and existing patterns. Executor uses these directly. -->

From packages/cli/src/registry/registry.json (existing pattern for one component):
```json
{
  "name": "button",
  "description": "A customizable button with variants, sizes, loading state, and form participation",
  "files": [
    { "path": "components/button/button.ts", "type": "component" }
  ],
  "dependencies": [],
  "registryDependencies": []
}
```

Chart registry entries DIFFER from component entries:
- "dependencies": ["@lit-ui/charts"] (the npm package to install)
- "registryDependencies": [] (no other CLI components needed)
- "files[].path" uses "components/charts/[name].ts" — getTargetPath() maps this to {cwd}/{componentsPath}/[name].ts

From packages/cli/src/utils/install-component.ts (componentToPackage):
```typescript
export const componentToPackage: Record<string, string> = {
  button: '@lit-ui/button',
  dialog: '@lit-ui/dialog',
  // ... 13 entries total
};
```
Must add 8 entries, ALL mapping to '@lit-ui/charts' (NOT '@lit-ui/line-chart' etc.)

From packages/cli/src/templates/index.ts (COMPONENT_TEMPLATES pattern):
```typescript
export { BUTTON_TEMPLATE } from './button.js';
import { BUTTON_TEMPLATE } from './button.js';
export const COMPONENT_TEMPLATES: Record<string, string> = {
  button: BUTTON_TEMPLATE,
  // ...
};
```
Each chart template must be exported AND added to COMPONENT_TEMPLATES with key matching the chart name.

From packages/cli/src/templates/button.ts (template style — abbreviated):
```typescript
export const BUTTON_TEMPLATE = `/**
 * ui-button - ...
 */
import { ... } from 'lit';
// ... full component code ...
`;
```

Chart template props reference (from RESEARCH.md):
- LuiLineChart: smooth:boolean, zoom:boolean, mark-lines:MarkLineSpec[]
- LuiAreaChart: smooth:boolean, zoom:boolean, stacked:boolean
- LuiBarChart: stacked:boolean, horizontal:boolean, show-labels:boolean, color-by-data:boolean
- LuiPieChart: min-percent:number, inner-radius:string|number, center-label:string
- LuiScatterChart: bubble:boolean
- LuiHeatmapChart: x-categories:string[], y-categories:string[], color-range:[string,string]
- LuiCandlestickChart: bull-color:string, bear-color:string, show-volume:boolean, moving-averages:MAConfig[]
- LuiTreemapChart: breadcrumb:boolean, rounded:boolean, level-colors:string[][]

All charts share BaseChartElement props: data, option (EChartsOption), loading:boolean, enable-gl:boolean, max-points:number
All chart data is set via JS property (.data = [...]) NOT HTML attribute — templates must show this pattern.
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add 8 chart entries to registry.json and update install-component.ts</name>
  <files>
    packages/cli/src/registry/registry.json
    packages/cli/src/utils/install-component.ts
  </files>
  <action>
**registry.json:** Add 8 new entries to the "components" array. Follow the existing component entry shape but with chart-specific values. Add AFTER the last existing component entry (do not modify existing entries):

```json
{
  "name": "line-chart",
  "description": "Real-time line chart with multi-series, smooth curves, zoom/pan, and streaming via pushData(). Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/line-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "area-chart",
  "description": "Filled area chart with stacked and smooth options and streaming via pushData(). Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/area-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "bar-chart",
  "description": "Grouped, stacked, and horizontal bar chart with value labels and streaming via pushData(). Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/bar-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "pie-chart",
  "description": "Pie and donut chart with small-slice merging, configurable inner radius, center label, and streaming. Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/pie-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "scatter-chart",
  "description": "Scatter and bubble chart with optional WebGL rendering for 500K+ points via enable-gl. Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/scatter-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "heatmap-chart",
  "description": "Cartesian heatmap with configurable x/y categories, VisualMap color scale, and streaming. Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/heatmap-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "candlestick-chart",
  "description": "OHLC candlestick chart with volume panel, SMA/EMA overlays, and streaming new bars. Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/candlestick-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
},
{
  "name": "treemap-chart",
  "description": "Hierarchical treemap with breadcrumb navigation, rounded cells, and per-level colors. Powered by ECharts via @lit-ui/charts.",
  "files": [{ "path": "components/charts/treemap-chart.ts", "type": "component" }],
  "dependencies": ["@lit-ui/charts"],
  "registryDependencies": []
}
```

**install-component.ts:** Add 8 entries to the componentToPackage Record. ALL 8 chart names map to '@lit-ui/charts' (not separate packages):
```typescript
'line-chart': '@lit-ui/charts',
'area-chart': '@lit-ui/charts',
'bar-chart': '@lit-ui/charts',
'pie-chart': '@lit-ui/charts',
'scatter-chart': '@lit-ui/charts',
'heatmap-chart': '@lit-ui/charts',
'candlestick-chart': '@lit-ui/charts',
'treemap-chart': '@lit-ui/charts',
```
  </action>
  <verify>
    <automated>cd /Users/sn0w/Documents/dev/lit-components && node -e "const r = JSON.parse(require('fs').readFileSync('packages/cli/src/registry/registry.json','utf8')); const charts = r.components.filter(c => c.name.includes('chart')); console.log('Chart entries:', charts.length, charts.map(c=>c.name).join(', '))"</automated>
  </verify>
  <done>8 chart entries exist in registry.json components array; install-component.ts componentToPackage has 8 entries all mapping to '@lit-ui/charts'</done>
</task>

<task type="auto">
  <name>Task 2: Create 8 chart template files and update templates/index.ts</name>
  <files>
    packages/cli/src/templates/line-chart.ts
    packages/cli/src/templates/area-chart.ts
    packages/cli/src/templates/bar-chart.ts
    packages/cli/src/templates/pie-chart.ts
    packages/cli/src/templates/scatter-chart.ts
    packages/cli/src/templates/heatmap-chart.ts
    packages/cli/src/templates/candlestick-chart.ts
    packages/cli/src/templates/treemap-chart.ts
    packages/cli/src/templates/index.ts
  </files>
  <action>
Create 8 template files following the pattern in packages/cli/src/templates/button.ts. Each template is a TypeScript string exported as a named constant.

KEY RULES for all templates:
- Import from subpath '@lit-ui/charts/[name]' NOT from '@lit-ui/charts' — demonstrates tree-shaking
- Type imports use 'type' keyword from '@lit-ui/charts' (the full package for types)
- Data set via constructor or connectedCallback using `this.shadowRoot?.querySelector` or via a wrapper approach — show .data property assignment pattern clearly in JSDoc comment
- Each template wraps `lui-*-chart` in a simple LitElement host component named `my-[chart-name]`
- Use `void LuiXxxChart;` after the import to ensure the side effect (custom element registration) is kept by bundlers

**line-chart.ts** — export LINE_CHART_TEMPLATE:
Wrapper component sets `.data` on the `lui-line-chart` element in `firstUpdated()`. Demo data: two series 'Sales' and 'Revenue' with 7 numeric data points each. Props demonstrated: smooth, zoom.

**area-chart.ts** — export AREA_CHART_TEMPLATE:
Same pattern. Demo data: two series with 7 points. Props: smooth, stacked.

**bar-chart.ts** — export BAR_CHART_TEMPLATE:
Demo data: BarChartSeries with categories: ['Q1','Q2','Q3','Q4'] and two series. Props: show-labels.

**pie-chart.ts** — export PIE_CHART_TEMPLATE:
Demo data: PieSlice[] array with 5 named slices. Props: min-percent="2", inner-radius="40%", center-label="Total".

**scatter-chart.ts** — export SCATTER_CHART_TEMPLATE:
Demo data: ScatterPoint[] array with 10 x/y points. Props: bubble (set to false in demo, comment notes how to enable). Comment notes enable-gl for 500K+ points.

**heatmap-chart.ts** — export HEATMAP_CHART_TEMPLATE:
Demo data: HeatmapCell[] with x-categories=['Mon','Tue','Wed'], y-categories=['Morning','Afternoon','Evening'], and 9 cell values. Props: x-categories, y-categories attributes.

**candlestick-chart.ts** — export CANDLESTICK_CHART_TEMPLATE:
Demo data: OhlcBar[] with 5 bars using [open, close, low, high] order (comment warns this is NOT OHLC acronym order). Props: bull-color, bear-color, show-volume.

**treemap-chart.ts** — export TREEMAP_CHART_TEMPLATE:
Demo data: TreemapNode[] with 2 top-level nodes each having 2 children. Props: breadcrumb (default true), rounded.

**templates/index.ts** — update to add all 8 chart exports:
Add to the existing file (preserve all current exports):
- 8 new `export { X_CHART_TEMPLATE } from './x-chart.js'` lines
- 8 new `import { X_CHART_TEMPLATE } from './x-chart.js'` lines
- 8 new entries in COMPONENT_TEMPLATES: `'line-chart': LINE_CHART_TEMPLATE`, etc.

IMPORTANT: In template string content, escape backticks as \\\` and escape ${...} as \${...} — the entire template is itself a JS template literal string. Look at button.ts for the exact escaping pattern.
  </action>
  <verify>
    <automated>cd /Users/sn0w/Documents/dev/lit-components && pnpm --filter @lit-ui/cli build 2>&1 | tail -10</automated>
  </verify>
  <done>CLI builds successfully; all 8 template files exist in packages/cli/src/templates/; templates/index.ts exports all 8 and adds them to COMPONENT_TEMPLATES</done>
</task>

</tasks>

<verification>
1. `pnpm --filter @lit-ui/cli build` exits 0
2. `ls packages/cli/src/templates/ | grep chart` shows 8 files
3. `node -e "const r = JSON.parse(require('fs').readFileSync('packages/cli/src/registry/registry.json','utf8')); console.log(r.components.filter(c=>c.name.includes('chart')).length)"` outputs 8
4. `grep "chart" packages/cli/src/utils/install-component.ts | grep "@lit-ui/charts" | wc -l` outputs 8
</verification>

<success_criteria>
- 8 chart entries in registry.json, all with `"dependencies": ["@lit-ui/charts"]`
- 8 template files exist, each importing from correct subpath
- install-component.ts has 8 chart names mapped to '@lit-ui/charts'
- templates/index.ts COMPONENT_TEMPLATES has 8 chart entries
- CLI builds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/096-cli-integration-documentation/096-02-SUMMARY.md`
</output>
