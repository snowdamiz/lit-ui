<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>lit-ui Foundation Demo</title>
  <style>
    body {
      font-family: system-ui, sans-serif;
      padding: 2rem;
      background: var(--color-background, #fff);
      color: var(--color-foreground, #000);
      transition: background-color 0.2s, color 0.2s;
    }
    .demo-grid {
      display: grid;
      gap: 1.5rem;
      max-width: 800px;
      margin: 0 auto;
    }
    .controls {
      margin-bottom: 2rem;
      display: flex;
      gap: 1rem;
      align-items: center;
    }
    .controls button {
      padding: 0.5rem 1rem;
      border-radius: 0.375rem;
      border: 1px solid #ccc;
      background: #f5f5f5;
      cursor: pointer;
    }
    .controls button:hover {
      background: #e5e5e5;
    }
    h1 {
      margin-bottom: 0.5rem;
    }
    h2 {
      margin-top: 2.5rem;
      margin-bottom: 1rem;
      border-bottom: 1px solid #ddd;
      padding-bottom: 0.5rem;
    }
    .subtitle {
      color: #666;
      margin-bottom: 2rem;
    }
    .demo-section {
      margin-bottom: 2rem;
    }
    .demo-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
    }
    .demo-label {
      font-weight: 500;
      min-width: 120px;
      color: #555;
    }
    .checklist {
      margin-top: 3rem;
      padding: 1.5rem;
      background: #f9fafb;
      border-radius: 0.5rem;
      border: 1px solid #e5e7eb;
    }
    .checklist h3 {
      margin-top: 0;
      margin-bottom: 1rem;
    }
    .checklist ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .checklist li {
      padding: 0.5rem 0;
      border-bottom: 1px solid #e5e7eb;
    }
    .checklist li:last-child {
      border-bottom: none;
    }
    .checklist input[type="checkbox"] {
      margin-right: 0.75rem;
    }
    form {
      padding: 1rem;
      background: #f0f9ff;
      border: 1px solid #bae6fd;
      border-radius: 0.5rem;
    }
  </style>
</head>
<body>
  <h1>lit-ui Foundation Demo</h1>
  <p class="subtitle">Validating Tailwind + Shadow DOM integration</p>

  <div class="controls">
    <button onclick="document.documentElement.classList.toggle('dark')">
      Toggle Dark Mode
    </button>
    <span>Click to test theme switching</span>
  </div>

  <div class="demo-grid">
    <demo-card title="Standard Card"></demo-card>
    <demo-card title="Elevated Card" elevated></demo-card>
  </div>

  <!-- Button Demo Section -->
  <h2>Button Component Demo</h2>

  <div class="demo-section">
    <h3>Variants (BTN-01)</h3>
    <div class="demo-row">
      <ui-button variant="primary">Primary</ui-button>
      <ui-button variant="secondary">Secondary</ui-button>
      <ui-button variant="outline">Outline</ui-button>
      <ui-button variant="ghost">Ghost</ui-button>
      <ui-button variant="destructive">Destructive</ui-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>Sizes (BTN-02)</h3>
    <div class="demo-row">
      <span class="demo-label">Small:</span>
      <ui-button variant="primary" size="sm">Small</ui-button>
      <ui-button variant="secondary" size="sm">Small</ui-button>
      <ui-button variant="outline" size="sm">Small</ui-button>
    </div>
    <div class="demo-row">
      <span class="demo-label">Medium:</span>
      <ui-button variant="primary" size="md">Medium</ui-button>
      <ui-button variant="secondary" size="md">Medium</ui-button>
      <ui-button variant="outline" size="md">Medium</ui-button>
    </div>
    <div class="demo-row">
      <span class="demo-label">Large:</span>
      <ui-button variant="primary" size="lg">Large</ui-button>
      <ui-button variant="secondary" size="lg">Large</ui-button>
      <ui-button variant="outline" size="lg">Large</ui-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>States (BTN-03)</h3>
    <div class="demo-row">
      <span class="demo-label">Disabled:</span>
      <ui-button variant="primary" disabled>Disabled Primary</ui-button>
      <ui-button variant="secondary" disabled>Disabled Secondary</ui-button>
      <ui-button variant="destructive" disabled>Disabled Destructive</ui-button>
    </div>
    <div class="demo-row">
      <span class="demo-label">Loading:</span>
      <ui-button id="loading-demo" variant="primary" loading>Loading...</ui-button>
      <button id="toggle-loading" onclick="toggleLoading()">Toggle Loading</button>
    </div>
  </div>

  <div class="demo-section">
    <h3>Form Participation (BTN-06)</h3>
    <form id="test-form" onsubmit="event.preventDefault(); alert('Form submitted!');">
      <p style="margin-top: 0;">Click the button below to test form submission:</p>
      <ui-button type="submit" variant="primary">Submit Form</ui-button>
    </form>
  </div>

  <div class="demo-section">
    <h3>Icon Slots (BTN-08)</h3>
    <div class="demo-row">
      <span class="demo-label">Icon Start:</span>
      <ui-button variant="primary">
        <svg slot="icon-start" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"/>
        </svg>
        Continue
      </ui-button>
      <ui-button variant="secondary">
        <svg slot="icon-start" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
        </svg>
        Add Item
      </ui-button>
    </div>
    <div class="demo-row">
      <span class="demo-label">Icon End:</span>
      <ui-button variant="outline">
        Open Link
        <svg slot="icon-end" viewBox="0 0 20 20" fill="currentColor">
          <path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"/>
          <path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"/>
        </svg>
      </ui-button>
      <ui-button variant="ghost">
        Download
        <svg slot="icon-end" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
        </svg>
      </ui-button>
    </div>
    <div class="demo-row">
      <span class="demo-label">Both Icons:</span>
      <ui-button variant="primary" size="lg">
        <svg slot="icon-start" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
        Navigate
        <svg slot="icon-end" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"/>
        </svg>
      </ui-button>
    </div>
  </div>

  <div class="demo-section">
    <h3>Keyboard & Focus (BTN-04, BTN-05)</h3>
    <p>Tab through these buttons to test focus ring visibility:</p>
    <div class="demo-row">
      <ui-button variant="primary">Tab to me</ui-button>
      <ui-button variant="secondary">Then me</ui-button>
      <ui-button variant="outline">And me</ui-button>
      <ui-button variant="ghost">Also me</ui-button>
      <ui-button variant="destructive">Finally me</ui-button>
    </div>
    <p style="font-size: 0.875rem; color: #666;">Press Enter or Space to activate the focused button</p>
  </div>

  <!-- Dialog Demo Section -->
  <h2>Dialog Component Demo</h2>

  <div class="demo-section">
    <h3>Basic Dialog (DLG-01, DLG-02, DLG-03)</h3>
    <p>Click the button to open a basic dialog. Press Escape or click outside to close.</p>
    <div class="demo-row">
      <ui-button id="basic-dialog-trigger" variant="primary" onclick="openBasicDialog()">Open Basic Dialog</ui-button>
    </div>
    <ui-dialog id="basic-dialog">
      <span slot="title">Basic Dialog</span>
      <p>This is a basic dialog with title, content, and footer.</p>
      <p>You can close it by pressing <strong>Escape</strong>, clicking the <strong>backdrop</strong>, or clicking the <strong>Close</strong> button.</p>
      <div slot="footer">
        <ui-button variant="secondary" onclick="closeBasicDialog()">Cancel</ui-button>
        <ui-button variant="primary" onclick="closeBasicDialog()">Close</ui-button>
      </div>
    </ui-dialog>
  </div>

  <div class="demo-section">
    <h3>Size Variants (DLG-04)</h3>
    <p>Dialogs come in three sizes: small, medium, and large.</p>
    <div class="demo-row">
      <ui-button variant="outline" onclick="openSizeDialog('sm')">Small Dialog</ui-button>
      <ui-button variant="outline" onclick="openSizeDialog('md')">Medium Dialog</ui-button>
      <ui-button variant="outline" onclick="openSizeDialog('lg')">Large Dialog</ui-button>
    </div>
    <ui-dialog id="size-dialog-sm" size="sm">
      <span slot="title">Small Dialog</span>
      <p>This is a small dialog (max-width: 24rem).</p>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeSizeDialog('sm')">Close</ui-button>
      </div>
    </ui-dialog>
    <ui-dialog id="size-dialog-md" size="md">
      <span slot="title">Medium Dialog</span>
      <p>This is a medium dialog (max-width: 28rem). This is the default size.</p>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeSizeDialog('md')">Close</ui-button>
      </div>
    </ui-dialog>
    <ui-dialog id="size-dialog-lg" size="lg">
      <span slot="title">Large Dialog</span>
      <p>This is a large dialog (max-width: 32rem). Use this for more complex content.</p>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeSizeDialog('lg')">Close</ui-button>
      </div>
    </ui-dialog>
  </div>

  <div class="demo-section">
    <h3>Non-Dismissible Dialog (DLG-05)</h3>
    <p>This dialog cannot be closed via Escape or backdrop click. Only the button works.</p>
    <div class="demo-row">
      <ui-button variant="destructive" onclick="openNonDismissibleDialog()">Open Non-Dismissible Dialog</ui-button>
    </div>
    <ui-dialog id="non-dismissible-dialog" dismissible="false">
      <span slot="title">Confirm Action</span>
      <p>This dialog is <strong>non-dismissible</strong>. You must click one of the buttons below to close it.</p>
      <p>Try pressing Escape or clicking outside - it won't close.</p>
      <div slot="footer">
        <ui-button variant="secondary" onclick="closeNonDismissibleDialog()">Cancel</ui-button>
        <ui-button variant="destructive" onclick="closeNonDismissibleDialog()">Confirm Delete</ui-button>
      </div>
    </ui-dialog>
  </div>

  <div class="demo-section">
    <h3>Nested Dialogs (DLG-06)</h3>
    <p>Open a dialog from within another dialog. Each closes independently.</p>
    <div class="demo-row">
      <ui-button variant="primary" onclick="openParentDialog()">Open Parent Dialog</ui-button>
    </div>
    <ui-dialog id="parent-dialog" size="lg">
      <span slot="title">Parent Dialog</span>
      <p>This is the parent dialog. Click the button below to open a nested child dialog.</p>
      <p>When you close the child dialog, this parent dialog should remain open.</p>
      <div style="margin-top: 1rem;">
        <ui-button variant="secondary" onclick="openChildDialog()">Open Child Dialog</ui-button>
      </div>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeParentDialog()">Close Parent</ui-button>
      </div>
    </ui-dialog>
    <ui-dialog id="child-dialog">
      <span slot="title">Child Dialog</span>
      <p>This is the nested child dialog. It appears on top of the parent.</p>
      <p>Closing this will return focus to the parent dialog's trigger element.</p>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeChildDialog()">Close Child</ui-button>
      </div>
    </ui-dialog>
  </div>

  <div class="demo-section">
    <h3>With Close Button (DLG-07)</h3>
    <p>Dialog with an X close button in the corner.</p>
    <div class="demo-row">
      <ui-button variant="outline" onclick="openCloseButtonDialog()">Open Dialog with Close Button</ui-button>
    </div>
    <ui-dialog id="close-button-dialog" show-close-button>
      <span slot="title">Close Button Demo</span>
      <p>This dialog has an X button in the top-right corner.</p>
      <p>You can close it via the X button, Escape, backdrop click, or the footer button.</p>
      <div slot="footer">
        <ui-button variant="primary" onclick="closeCloseButtonDialog()">Got it</ui-button>
      </div>
    </ui-dialog>
  </div>

  <div class="demo-section">
    <h3>Animations & Reduced Motion (DLG-08, DLG-09)</h3>
    <p>Dialogs animate in/out with a fade + scale effect. Enable "Reduce motion" in your OS accessibility settings to disable animations.</p>
    <p style="font-size: 0.875rem; color: #666;">Open any dialog above to see the animations.</p>
  </div>

  <div class="demo-section">
    <h3>Body Scroll Lock (DLG-10)</h3>
    <p>When a dialog is open, the page body cannot scroll. This prevents confusing scroll behavior.</p>
    <div style="height: 200px; overflow: auto; border: 1px solid #ddd; padding: 1rem; margin-top: 1rem;">
      <p>This is some long content to demonstrate scroll behavior:</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
      <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
      <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    </div>
  </div>

  <div class="checklist">
    <h3>Button Verification Checklist</h3>
    <ul>
      <li><input type="checkbox"> All 5 variants render with distinct colors (primary=blue, secondary=gray, outline=bordered, ghost=transparent, destructive=red)</li>
      <li><input type="checkbox"> All 3 sizes have different padding/font (sm &lt; md &lt; lg)</li>
      <li><input type="checkbox"> Disabled buttons are visually muted (opacity reduced)</li>
      <li><input type="checkbox"> Loading button shows pulsing dots animation</li>
      <li><input type="checkbox"> Form submit button triggers "Form submitted!" alert</li>
      <li><input type="checkbox"> Tab navigation moves focus between buttons</li>
      <li><input type="checkbox"> Enter/Space activates focused button</li>
      <li><input type="checkbox"> Focus ring is visible as inner glow (inset shadow)</li>
      <li><input type="checkbox"> Icons render at correct size and position</li>
      <li><input type="checkbox"> Dark mode toggle changes all button variant colors</li>
    </ul>
  </div>

  <div class="checklist">
    <h3>Dialog Verification Checklist</h3>
    <ul>
      <li><input type="checkbox"> Basic dialog opens with fade+scale animation</li>
      <li><input type="checkbox"> Escape key closes dismissible dialogs</li>
      <li><input type="checkbox"> Backdrop click closes dismissible dialogs</li>
      <li><input type="checkbox"> Focus returns to trigger button after close</li>
      <li><input type="checkbox"> All three sizes (sm, md, lg) have different widths</li>
      <li><input type="checkbox"> Non-dismissible dialog ignores Escape and backdrop click</li>
      <li><input type="checkbox"> Nested dialogs: child closes independently of parent</li>
      <li><input type="checkbox"> Dialog with close button shows X in top-right corner</li>
      <li><input type="checkbox"> Animations respect "Reduce motion" OS setting</li>
      <li><input type="checkbox"> Body scroll is locked when dialog is open</li>
      <li><input type="checkbox"> Dark mode styling works correctly</li>
    </ul>
  </div>

  <script type="module" src="/src/index.ts"></script>
  <script>
    function toggleLoading() {
      const loadingBtn = document.querySelector('#loading-demo');
      loadingBtn.loading = !loadingBtn.loading;
    }

    // Dialog demo functions
    function openBasicDialog() {
      document.querySelector('#basic-dialog').show();
    }
    function closeBasicDialog() {
      document.querySelector('#basic-dialog').open = false;
    }

    function openSizeDialog(size) {
      document.querySelector('#size-dialog-' + size).show();
    }
    function closeSizeDialog(size) {
      document.querySelector('#size-dialog-' + size).open = false;
    }

    function openNonDismissibleDialog() {
      document.querySelector('#non-dismissible-dialog').show();
    }
    function closeNonDismissibleDialog() {
      document.querySelector('#non-dismissible-dialog').open = false;
    }

    function openParentDialog() {
      document.querySelector('#parent-dialog').show();
    }
    function closeParentDialog() {
      document.querySelector('#parent-dialog').open = false;
    }
    function openChildDialog() {
      document.querySelector('#child-dialog').show();
    }
    function closeChildDialog() {
      document.querySelector('#child-dialog').open = false;
    }

    function openCloseButtonDialog() {
      document.querySelector('#close-button-dialog').show();
    }
    function closeCloseButtonDialog() {
      document.querySelector('#close-button-dialog').open = false;
    }

    // Add event listener to handle child dialog close event stop propagation
    document.addEventListener('DOMContentLoaded', () => {
      const childDialog = document.querySelector('#child-dialog');
      if (childDialog) {
        childDialog.addEventListener('close', (e) => {
          e.stopPropagation();
        });
      }
    });
  </script>
</body>
</html>
